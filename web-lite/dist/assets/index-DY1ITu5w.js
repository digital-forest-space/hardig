var c1=Object.defineProperty;var u1=(n,e,t)=>e in n?c1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ft=(n,e,t)=>u1(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function _i(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Mc(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var ce={},Pc={};Pc.byteLength=f1;Pc.toByteArray=p1;Pc.fromByteArray=y1;var sr=[],Hn=[],l1=typeof Uint8Array<"u"?Uint8Array:Array,Pu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var oo=0,d1=Pu.length;oo<d1;++oo)sr[oo]=Pu[oo],Hn[Pu.charCodeAt(oo)]=oo;Hn[45]=62;Hn[95]=63;function w0(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function f1(n){var e=w0(n),t=e[0],r=e[1];return(t+r)*3/4-r}function h1(n,e,t){return(e+t)*3/4-t}function p1(n){var e,t=w0(n),r=t[0],i=t[1],o=new l1(h1(n,r,i)),s=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=Hn[n.charCodeAt(c)]<<18|Hn[n.charCodeAt(c+1)]<<12|Hn[n.charCodeAt(c+2)]<<6|Hn[n.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Hn[n.charCodeAt(c)]<<2|Hn[n.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=Hn[n.charCodeAt(c)]<<10|Hn[n.charCodeAt(c+1)]<<4|Hn[n.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function g1(n){return sr[n>>18&63]+sr[n>>12&63]+sr[n>>6&63]+sr[n&63]}function m1(n,e,t){for(var r,i=[],o=e;o<t;o+=3)r=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),i.push(g1(r));return i.join("")}function y1(n){for(var e,t=n.length,r=t%3,i=[],o=16383,s=0,a=t-r;s<a;s+=o)i.push(m1(n,s,s+o>a?a:s+o));return r===1?(e=n[t-1],i.push(sr[e>>2]+sr[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(sr[e>>10]+sr[e>>4&63]+sr[e<<2&63]+"=")),i.join("")}var xd={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */xd.read=function(n,e,t,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,u=c>>1,d=-7,p=t?i-1:0,w=t?-1:1,h=n[e+p];for(p+=w,o=h&(1<<-d)-1,h>>=-d,d+=a;d>0;o=o*256+n[e+p],p+=w,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=r;d>0;s=s*256+n[e+p],p+=w,d-=8);if(o===0)o=1-u;else{if(o===c)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(h?-1:1)*s*Math.pow(2,o-r)};xd.write=function(n,e,t,r,i,o){var s,a,c,u=o*8-i-1,d=(1<<u)-1,p=d>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,b=r?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=d):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+p>=1?e+=w/c:e+=w*Math.pow(2,1-p),e*c>=2&&(s++,c/=2),s+p>=d?(a=0,s=d):s+p>=1?(a=(e*c-1)*Math.pow(2,i),s=s+p):(a=e*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;n[t+h]=a&255,h+=b,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;n[t+h]=s&255,h+=b,s/=256,u-=8);n[t+h-b]|=S*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=Pc,t=xd,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=x,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const R=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(R,g),R.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(R){if(R>i)throw new RangeError('The value "'+R+'" is invalid for option "size"');const g=new Uint8Array(R);return Object.setPrototypeOf(g,a.prototype),g}function a(R,g,y){if(typeof R=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(R)}return c(R,g,y)}a.poolSize=8192;function c(R,g,y){if(typeof R=="string")return w(R,g);if(ArrayBuffer.isView(R))return b(R);if(R==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(Tn(R,ArrayBuffer)||R&&Tn(R.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Tn(R,SharedArrayBuffer)||R&&Tn(R.buffer,SharedArrayBuffer)))return S(R,g,y);if(typeof R=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=R.valueOf&&R.valueOf();if(O!=null&&O!==R)return a.from(O,g,y);const U=A(R);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof R[Symbol.toPrimitive]=="function")return a.from(R[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}a.from=function(R,g,y){return c(R,g,y)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(R){if(typeof R!="number")throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function d(R,g,y){return u(R),R<=0?s(R):g!==void 0?typeof y=="string"?s(R).fill(g,y):s(R).fill(g):s(R)}a.alloc=function(R,g,y){return d(R,g,y)};function p(R){return u(R),s(R<0?0:I(R)|0)}a.allocUnsafe=function(R){return p(R)},a.allocUnsafeSlow=function(R){return p(R)};function w(R,g){if((typeof g!="string"||g==="")&&(g="utf8"),!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);const y=k(R,g)|0;let O=s(y);const U=O.write(R,g);return U!==y&&(O=O.slice(0,U)),O}function h(R){const g=R.length<0?0:I(R.length)|0,y=s(g);for(let O=0;O<g;O+=1)y[O]=R[O]&255;return y}function b(R){if(Tn(R,Uint8Array)){const g=new Uint8Array(R);return S(g.buffer,g.byteOffset,g.byteLength)}return h(R)}function S(R,g,y){if(g<0||R.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let O;return g===void 0&&y===void 0?O=new Uint8Array(R):y===void 0?O=new Uint8Array(R,g):O=new Uint8Array(R,g,y),Object.setPrototypeOf(O,a.prototype),O}function A(R){if(a.isBuffer(R)){const g=I(R.length)|0,y=s(g);return y.length===0||R.copy(y,0,0,g),y}if(R.length!==void 0)return typeof R.length!="number"||Qe(R.length)?s(0):h(R);if(R.type==="Buffer"&&Array.isArray(R.data))return h(R.data)}function I(R){if(R>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return R|0}function x(R){return+R!=R&&(R=0),a.alloc(+R)}a.isBuffer=function(g){return g!=null&&g._isBuffer===!0&&g!==a.prototype},a.compare=function(g,y){if(Tn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),Tn(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(g)||!a.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(g===y)return 0;let O=g.length,U=y.length;for(let z=0,Z=Math.min(O,U);z<Z;++z)if(g[z]!==y[z]){O=g[z],U=y[z];break}return O<U?-1:U<O?1:0},a.isEncoding=function(g){switch(String(g).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(g,y){if(!Array.isArray(g))throw new TypeError('"list" argument must be an Array of Buffers');if(g.length===0)return a.alloc(0);let O;if(y===void 0)for(y=0,O=0;O<g.length;++O)y+=g[O].length;const U=a.allocUnsafe(y);let z=0;for(O=0;O<g.length;++O){let Z=g[O];if(Tn(Z,Uint8Array))z+Z.length>U.length?(a.isBuffer(Z)||(Z=a.from(Z)),Z.copy(U,z)):Uint8Array.prototype.set.call(U,Z,z);else if(a.isBuffer(Z))Z.copy(U,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=Z.length}return U};function k(R,g){if(a.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||Tn(R,ArrayBuffer))return R.byteLength;if(typeof R!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);const y=R.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&y===0)return 0;let U=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Je(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return it(R).length;default:if(U)return O?-1:Je(R).length;g=(""+g).toLowerCase(),U=!0}}a.byteLength=k;function B(R,g,y){let O=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,g>>>=0,y<=g))return"";for(R||(R="utf8");;)switch(R){case"hex":return C(this,g,y);case"utf8":case"utf-8":return l(this,g,y);case"ascii":return E(this,g,y);case"latin1":case"binary":return N(this,g,y);case"base64":return v(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,g,y);default:if(O)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),O=!0}}a.prototype._isBuffer=!0;function L(R,g,y){const O=R[g];R[g]=R[y],R[y]=O}a.prototype.swap16=function(){const g=this.length;if(g%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let y=0;y<g;y+=2)L(this,y,y+1);return this},a.prototype.swap32=function(){const g=this.length;if(g%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let y=0;y<g;y+=4)L(this,y,y+3),L(this,y+1,y+2);return this},a.prototype.swap64=function(){const g=this.length;if(g%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let y=0;y<g;y+=8)L(this,y,y+7),L(this,y+1,y+6),L(this,y+2,y+5),L(this,y+3,y+4);return this},a.prototype.toString=function(){const g=this.length;return g===0?"":arguments.length===0?l(this,0,g):B.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(g){if(!a.isBuffer(g))throw new TypeError("Argument must be a Buffer");return this===g?!0:a.compare(this,g)===0},a.prototype.inspect=function(){let g="";const y=n.INSPECT_MAX_BYTES;return g=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(g+=" ... "),"<Buffer "+g+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(g,y,O,U,z){if(Tn(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(g))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof g);if(y===void 0&&(y=0),O===void 0&&(O=g?g.length:0),U===void 0&&(U=0),z===void 0&&(z=this.length),y<0||O>g.length||U<0||z>this.length)throw new RangeError("out of range index");if(U>=z&&y>=O)return 0;if(U>=z)return-1;if(y>=O)return 1;if(y>>>=0,O>>>=0,U>>>=0,z>>>=0,this===g)return 0;let Z=z-U,Re=O-y;const ve=Math.min(Z,Re),be=this.slice(U,z),Ye=g.slice(y,O);for(let _e=0;_e<ve;++_e)if(be[_e]!==Ye[_e]){Z=be[_e],Re=Ye[_e];break}return Z<Re?-1:Re<Z?1:0};function $(R,g,y,O,U){if(R.length===0)return-1;if(typeof y=="string"?(O=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,Qe(y)&&(y=U?0:R.length-1),y<0&&(y=R.length+y),y>=R.length){if(U)return-1;y=R.length-1}else if(y<0)if(U)y=0;else return-1;if(typeof g=="string"&&(g=a.from(g,O)),a.isBuffer(g))return g.length===0?-1:W(R,g,y,O,U);if(typeof g=="number")return g=g&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(R,g,y):Uint8Array.prototype.lastIndexOf.call(R,g,y):W(R,[g],y,O,U);throw new TypeError("val must be string, number or Buffer")}function W(R,g,y,O,U){let z=1,Z=R.length,Re=g.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(R.length<2||g.length<2)return-1;z=2,Z/=2,Re/=2,y/=2}function ve(Ye,_e){return z===1?Ye[_e]:Ye.readUInt16BE(_e*z)}let be;if(U){let Ye=-1;for(be=y;be<Z;be++)if(ve(R,be)===ve(g,Ye===-1?0:be-Ye)){if(Ye===-1&&(Ye=be),be-Ye+1===Re)return Ye*z}else Ye!==-1&&(be-=be-Ye),Ye=-1}else for(y+Re>Z&&(y=Z-Re),be=y;be>=0;be--){let Ye=!0;for(let _e=0;_e<Re;_e++)if(ve(R,be+_e)!==ve(g,_e)){Ye=!1;break}if(Ye)return be}return-1}a.prototype.includes=function(g,y,O){return this.indexOf(g,y,O)!==-1},a.prototype.indexOf=function(g,y,O){return $(this,g,y,O,!0)},a.prototype.lastIndexOf=function(g,y,O){return $(this,g,y,O,!1)};function Y(R,g,y,O){y=Number(y)||0;const U=R.length-y;O?(O=Number(O),O>U&&(O=U)):O=U;const z=g.length;O>z/2&&(O=z/2);let Z;for(Z=0;Z<O;++Z){const Re=parseInt(g.substr(Z*2,2),16);if(Qe(Re))return Z;R[y+Z]=Re}return Z}function D(R,g,y,O){return je(Je(g,R.length-y),R,y,O)}function j(R,g,y,O){return je(ht(g),R,y,O)}function G(R,g,y,O){return je(it(g),R,y,O)}function V(R,g,y,O){return je(ma(g,R.length-y),R,y,O)}a.prototype.write=function(g,y,O,U){if(y===void 0)U="utf8",O=this.length,y=0;else if(O===void 0&&typeof y=="string")U=y,O=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(O)?(O=O>>>0,U===void 0&&(U="utf8")):(U=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-y;if((O===void 0||O>z)&&(O=z),g.length>0&&(O<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let Z=!1;for(;;)switch(U){case"hex":return Y(this,g,y,O);case"utf8":case"utf-8":return D(this,g,y,O);case"ascii":case"latin1":case"binary":return j(this,g,y,O);case"base64":return G(this,g,y,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,g,y,O);default:if(Z)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),Z=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function v(R,g,y){return g===0&&y===R.length?e.fromByteArray(R):e.fromByteArray(R.slice(g,y))}function l(R,g,y){y=Math.min(R.length,y);const O=[];let U=g;for(;U<y;){const z=R[U];let Z=null,Re=z>239?4:z>223?3:z>191?2:1;if(U+Re<=y){let ve,be,Ye,_e;switch(Re){case 1:z<128&&(Z=z);break;case 2:ve=R[U+1],(ve&192)===128&&(_e=(z&31)<<6|ve&63,_e>127&&(Z=_e));break;case 3:ve=R[U+1],be=R[U+2],(ve&192)===128&&(be&192)===128&&(_e=(z&15)<<12|(ve&63)<<6|be&63,_e>2047&&(_e<55296||_e>57343)&&(Z=_e));break;case 4:ve=R[U+1],be=R[U+2],Ye=R[U+3],(ve&192)===128&&(be&192)===128&&(Ye&192)===128&&(_e=(z&15)<<18|(ve&63)<<12|(be&63)<<6|Ye&63,_e>65535&&_e<1114112&&(Z=_e))}}Z===null?(Z=65533,Re=1):Z>65535&&(Z-=65536,O.push(Z>>>10&1023|55296),Z=56320|Z&1023),O.push(Z),U+=Re}return _(O)}const f=4096;function _(R){const g=R.length;if(g<=f)return String.fromCharCode.apply(String,R);let y="",O=0;for(;O<g;)y+=String.fromCharCode.apply(String,R.slice(O,O+=f));return y}function E(R,g,y){let O="";y=Math.min(R.length,y);for(let U=g;U<y;++U)O+=String.fromCharCode(R[U]&127);return O}function N(R,g,y){let O="";y=Math.min(R.length,y);for(let U=g;U<y;++U)O+=String.fromCharCode(R[U]);return O}function C(R,g,y){const O=R.length;(!g||g<0)&&(g=0),(!y||y<0||y>O)&&(y=O);let U="";for(let z=g;z<y;++z)U+=pt[R[z]];return U}function P(R,g,y){const O=R.slice(g,y);let U="";for(let z=0;z<O.length-1;z+=2)U+=String.fromCharCode(O[z]+O[z+1]*256);return U}a.prototype.slice=function(g,y){const O=this.length;g=~~g,y=y===void 0?O:~~y,g<0?(g+=O,g<0&&(g=0)):g>O&&(g=O),y<0?(y+=O,y<0&&(y=0)):y>O&&(y=O),y<g&&(y=g);const U=this.subarray(g,y);return Object.setPrototypeOf(U,a.prototype),U};function T(R,g,y){if(R%1!==0||R<0)throw new RangeError("offset is not uint");if(R+g>y)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(g,y,O){g=g>>>0,y=y>>>0,O||T(g,y,this.length);let U=this[g],z=1,Z=0;for(;++Z<y&&(z*=256);)U+=this[g+Z]*z;return U},a.prototype.readUintBE=a.prototype.readUIntBE=function(g,y,O){g=g>>>0,y=y>>>0,O||T(g,y,this.length);let U=this[g+--y],z=1;for(;y>0&&(z*=256);)U+=this[g+--y]*z;return U},a.prototype.readUint8=a.prototype.readUInt8=function(g,y){return g=g>>>0,y||T(g,1,this.length),this[g]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(g,y){return g=g>>>0,y||T(g,2,this.length),this[g]|this[g+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(g,y){return g=g>>>0,y||T(g,2,this.length),this[g]<<8|this[g+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(g,y){return g=g>>>0,y||T(g,4,this.length),(this[g]|this[g+1]<<8|this[g+2]<<16)+this[g+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(g,y){return g=g>>>0,y||T(g,4,this.length),this[g]*16777216+(this[g+1]<<16|this[g+2]<<8|this[g+3])},a.prototype.readBigUInt64LE=jn(function(g){g=g>>>0,zn(g,"offset");const y=this[g],O=this[g+7];(y===void 0||O===void 0)&&Ke(g,this.length-8);const U=y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24,z=this[++g]+this[++g]*2**8+this[++g]*2**16+O*2**24;return BigInt(U)+(BigInt(z)<<BigInt(32))}),a.prototype.readBigUInt64BE=jn(function(g){g=g>>>0,zn(g,"offset");const y=this[g],O=this[g+7];(y===void 0||O===void 0)&&Ke(g,this.length-8);const U=y*2**24+this[++g]*2**16+this[++g]*2**8+this[++g],z=this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+O;return(BigInt(U)<<BigInt(32))+BigInt(z)}),a.prototype.readIntLE=function(g,y,O){g=g>>>0,y=y>>>0,O||T(g,y,this.length);let U=this[g],z=1,Z=0;for(;++Z<y&&(z*=256);)U+=this[g+Z]*z;return z*=128,U>=z&&(U-=Math.pow(2,8*y)),U},a.prototype.readIntBE=function(g,y,O){g=g>>>0,y=y>>>0,O||T(g,y,this.length);let U=y,z=1,Z=this[g+--U];for(;U>0&&(z*=256);)Z+=this[g+--U]*z;return z*=128,Z>=z&&(Z-=Math.pow(2,8*y)),Z},a.prototype.readInt8=function(g,y){return g=g>>>0,y||T(g,1,this.length),this[g]&128?(255-this[g]+1)*-1:this[g]},a.prototype.readInt16LE=function(g,y){g=g>>>0,y||T(g,2,this.length);const O=this[g]|this[g+1]<<8;return O&32768?O|4294901760:O},a.prototype.readInt16BE=function(g,y){g=g>>>0,y||T(g,2,this.length);const O=this[g+1]|this[g]<<8;return O&32768?O|4294901760:O},a.prototype.readInt32LE=function(g,y){return g=g>>>0,y||T(g,4,this.length),this[g]|this[g+1]<<8|this[g+2]<<16|this[g+3]<<24},a.prototype.readInt32BE=function(g,y){return g=g>>>0,y||T(g,4,this.length),this[g]<<24|this[g+1]<<16|this[g+2]<<8|this[g+3]},a.prototype.readBigInt64LE=jn(function(g){g=g>>>0,zn(g,"offset");const y=this[g],O=this[g+7];(y===void 0||O===void 0)&&Ke(g,this.length-8);const U=this[g+4]+this[g+5]*2**8+this[g+6]*2**16+(O<<24);return(BigInt(U)<<BigInt(32))+BigInt(y+this[++g]*2**8+this[++g]*2**16+this[++g]*2**24)}),a.prototype.readBigInt64BE=jn(function(g){g=g>>>0,zn(g,"offset");const y=this[g],O=this[g+7];(y===void 0||O===void 0)&&Ke(g,this.length-8);const U=(y<<24)+this[++g]*2**16+this[++g]*2**8+this[++g];return(BigInt(U)<<BigInt(32))+BigInt(this[++g]*2**24+this[++g]*2**16+this[++g]*2**8+O)}),a.prototype.readFloatLE=function(g,y){return g=g>>>0,y||T(g,4,this.length),t.read(this,g,!0,23,4)},a.prototype.readFloatBE=function(g,y){return g=g>>>0,y||T(g,4,this.length),t.read(this,g,!1,23,4)},a.prototype.readDoubleLE=function(g,y){return g=g>>>0,y||T(g,8,this.length),t.read(this,g,!0,52,8)},a.prototype.readDoubleBE=function(g,y){return g=g>>>0,y||T(g,8,this.length),t.read(this,g,!1,52,8)};function m(R,g,y,O,U,z){if(!a.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>U||g<z)throw new RangeError('"value" argument is out of bounds');if(y+O>R.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(g,y,O,U){if(g=+g,y=y>>>0,O=O>>>0,!U){const Re=Math.pow(2,8*O)-1;m(this,g,y,O,Re,0)}let z=1,Z=0;for(this[y]=g&255;++Z<O&&(z*=256);)this[y+Z]=g/z&255;return y+O},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(g,y,O,U){if(g=+g,y=y>>>0,O=O>>>0,!U){const Re=Math.pow(2,8*O)-1;m(this,g,y,O,Re,0)}let z=O-1,Z=1;for(this[y+z]=g&255;--z>=0&&(Z*=256);)this[y+z]=g/Z&255;return y+O},a.prototype.writeUint8=a.prototype.writeUInt8=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,1,255,0),this[y]=g&255,y+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,2,65535,0),this[y]=g&255,this[y+1]=g>>>8,y+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,2,65535,0),this[y]=g>>>8,this[y+1]=g&255,y+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,4,4294967295,0),this[y+3]=g>>>24,this[y+2]=g>>>16,this[y+1]=g>>>8,this[y]=g&255,y+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,4,4294967295,0),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4};function M(R,g,y,O,U){He(g,O,U,R,y,7);let z=Number(g&BigInt(4294967295));R[y++]=z,z=z>>8,R[y++]=z,z=z>>8,R[y++]=z,z=z>>8,R[y++]=z;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return R[y++]=Z,Z=Z>>8,R[y++]=Z,Z=Z>>8,R[y++]=Z,Z=Z>>8,R[y++]=Z,y}function oe(R,g,y,O,U){He(g,O,U,R,y,7);let z=Number(g&BigInt(4294967295));R[y+7]=z,z=z>>8,R[y+6]=z,z=z>>8,R[y+5]=z,z=z>>8,R[y+4]=z;let Z=Number(g>>BigInt(32)&BigInt(4294967295));return R[y+3]=Z,Z=Z>>8,R[y+2]=Z,Z=Z>>8,R[y+1]=Z,Z=Z>>8,R[y]=Z,y+8}a.prototype.writeBigUInt64LE=jn(function(g,y=0){return M(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=jn(function(g,y=0){return oe(this,g,y,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(g,y,O,U){if(g=+g,y=y>>>0,!U){const ve=Math.pow(2,8*O-1);m(this,g,y,O,ve-1,-ve)}let z=0,Z=1,Re=0;for(this[y]=g&255;++z<O&&(Z*=256);)g<0&&Re===0&&this[y+z-1]!==0&&(Re=1),this[y+z]=(g/Z>>0)-Re&255;return y+O},a.prototype.writeIntBE=function(g,y,O,U){if(g=+g,y=y>>>0,!U){const ve=Math.pow(2,8*O-1);m(this,g,y,O,ve-1,-ve)}let z=O-1,Z=1,Re=0;for(this[y+z]=g&255;--z>=0&&(Z*=256);)g<0&&Re===0&&this[y+z+1]!==0&&(Re=1),this[y+z]=(g/Z>>0)-Re&255;return y+O},a.prototype.writeInt8=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,1,127,-128),g<0&&(g=255+g+1),this[y]=g&255,y+1},a.prototype.writeInt16LE=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,2,32767,-32768),this[y]=g&255,this[y+1]=g>>>8,y+2},a.prototype.writeInt16BE=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,2,32767,-32768),this[y]=g>>>8,this[y+1]=g&255,y+2},a.prototype.writeInt32LE=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,4,2147483647,-2147483648),this[y]=g&255,this[y+1]=g>>>8,this[y+2]=g>>>16,this[y+3]=g>>>24,y+4},a.prototype.writeInt32BE=function(g,y,O){return g=+g,y=y>>>0,O||m(this,g,y,4,2147483647,-2147483648),g<0&&(g=4294967295+g+1),this[y]=g>>>24,this[y+1]=g>>>16,this[y+2]=g>>>8,this[y+3]=g&255,y+4},a.prototype.writeBigInt64LE=jn(function(g,y=0){return M(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=jn(function(g,y=0){return oe(this,g,y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne(R,g,y,O,U,z){if(y+O>R.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function ue(R,g,y,O,U){return g=+g,y=y>>>0,U||ne(R,g,y,4),t.write(R,g,y,O,23,4),y+4}a.prototype.writeFloatLE=function(g,y,O){return ue(this,g,y,!0,O)},a.prototype.writeFloatBE=function(g,y,O){return ue(this,g,y,!1,O)};function Ie(R,g,y,O,U){return g=+g,y=y>>>0,U||ne(R,g,y,8),t.write(R,g,y,O,52,8),y+8}a.prototype.writeDoubleLE=function(g,y,O){return Ie(this,g,y,!0,O)},a.prototype.writeDoubleBE=function(g,y,O){return Ie(this,g,y,!1,O)},a.prototype.copy=function(g,y,O,U){if(!a.isBuffer(g))throw new TypeError("argument should be a Buffer");if(O||(O=0),!U&&U!==0&&(U=this.length),y>=g.length&&(y=g.length),y||(y=0),U>0&&U<O&&(U=O),U===O||g.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),g.length-y<U-O&&(U=g.length-y+O);const z=U-O;return this===g&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(y,O,U):Uint8Array.prototype.set.call(g,this.subarray(O,U),y),z},a.prototype.fill=function(g,y,O,U){if(typeof g=="string"){if(typeof y=="string"?(U=y,y=0,O=this.length):typeof O=="string"&&(U=O,O=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!a.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(g.length===1){const Z=g.charCodeAt(0);(U==="utf8"&&Z<128||U==="latin1")&&(g=Z)}}else typeof g=="number"?g=g&255:typeof g=="boolean"&&(g=Number(g));if(y<0||this.length<y||this.length<O)throw new RangeError("Out of range index");if(O<=y)return this;y=y>>>0,O=O===void 0?this.length:O>>>0,g||(g=0);let z;if(typeof g=="number")for(z=y;z<O;++z)this[z]=g;else{const Z=a.isBuffer(g)?g:a.from(g,U),Re=Z.length;if(Re===0)throw new TypeError('The value "'+g+'" is invalid for argument "value"');for(z=0;z<O-y;++z)this[z+y]=Z[z%Re]}return this};const we={};function ye(R,g,y){we[R]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${R}]`,this.stack,delete this.name}get code(){return R}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${R}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(R){return R?`${R} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(R,g){return`The "${R}" argument must be of type number. Received type ${typeof g}`},TypeError),ye("ERR_OUT_OF_RANGE",function(R,g,y){let O=`The value of "${R}" is out of range.`,U=y;return Number.isInteger(y)&&Math.abs(y)>2**32?U=dt(String(y)):typeof y=="bigint"&&(U=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(U=dt(U)),U+="n"),O+=` It must be ${g}. Received ${U}`,O},RangeError);function dt(R){let g="",y=R.length;const O=R[0]==="-"?1:0;for(;y>=O+4;y-=3)g=`_${R.slice(y-3,y)}${g}`;return`${R.slice(0,y)}${g}`}function ze(R,g,y){zn(g,"offset"),(R[g]===void 0||R[g+y]===void 0)&&Ke(g,R.length-(y+1))}function He(R,g,y,O,U,z){if(R>y||R<g){const Z=typeof g=="bigint"?"n":"";let Re;throw g===0||g===BigInt(0)?Re=`>= 0${Z} and < 2${Z} ** ${(z+1)*8}${Z}`:Re=`>= -(2${Z} ** ${(z+1)*8-1}${Z}) and < 2 ** ${(z+1)*8-1}${Z}`,new we.ERR_OUT_OF_RANGE("value",Re,R)}ze(O,U,z)}function zn(R,g){if(typeof R!="number")throw new we.ERR_INVALID_ARG_TYPE(g,"number",R)}function Ke(R,g,y){throw Math.floor(R)!==R?(zn(R,y),new we.ERR_OUT_OF_RANGE("offset","an integer",R)):g<0?new we.ERR_BUFFER_OUT_OF_BOUNDS:new we.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,R)}const ft=/[^+/0-9A-Za-z-_]/g;function ga(R){if(R=R.split("=")[0],R=R.trim().replace(ft,""),R.length<2)return"";for(;R.length%4!==0;)R=R+"=";return R}function Je(R,g){g=g||1/0;let y;const O=R.length;let U=null;const z=[];for(let Z=0;Z<O;++Z){if(y=R.charCodeAt(Z),y>55295&&y<57344){if(!U){if(y>56319){(g-=3)>-1&&z.push(239,191,189);continue}else if(Z+1===O){(g-=3)>-1&&z.push(239,191,189);continue}U=y;continue}if(y<56320){(g-=3)>-1&&z.push(239,191,189),U=y;continue}y=(U-55296<<10|y-56320)+65536}else U&&(g-=3)>-1&&z.push(239,191,189);if(U=null,y<128){if((g-=1)<0)break;z.push(y)}else if(y<2048){if((g-=2)<0)break;z.push(y>>6|192,y&63|128)}else if(y<65536){if((g-=3)<0)break;z.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((g-=4)<0)break;z.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return z}function ht(R){const g=[];for(let y=0;y<R.length;++y)g.push(R.charCodeAt(y)&255);return g}function ma(R,g){let y,O,U;const z=[];for(let Z=0;Z<R.length&&!((g-=2)<0);++Z)y=R.charCodeAt(Z),O=y>>8,U=y%256,z.push(U),z.push(O);return z}function it(R){return e.toByteArray(ga(R))}function je(R,g,y,O){let U;for(U=0;U<O&&!(U+y>=g.length||U>=R.length);++U)g[U+y]=R[U];return U}function Tn(R,g){return R instanceof g||R!=null&&R.constructor!=null&&R.constructor.name!=null&&R.constructor.name===g.name}function Qe(R){return R!==R}const pt=function(){const R="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const O=y*16;for(let U=0;U<16;++U)g[O+U]=R[y]+R[U]}return g}();function jn(R){return typeof BigInt>"u"?gt:R}function gt(){throw new Error("BigInt not supported")}})(ce);globalThis.Buffer=ce.Buffer;var Gs,Ee,b0,v0,ki,Jf,E0,A0,R0,Bd,Cl,xl,S0,xs={},k0=[],_1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,js=Array.isArray;function dr(n,e){for(var t in e)n[t]=e[t];return n}function Md(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Fr(n,e,t){var r,i,o,s={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?Gs.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)s[o]===void 0&&(s[o]=n.defaultProps[o]);return Es(n,s,r,i,null)}function Es(n,e,t,r,i){var o={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++b0,__i:-1,__u:0};return i==null&&Ee.vnode!=null&&Ee.vnode(o),o}function w1(){return{current:null}}function Ln(n){return n.children}function Qn(n,e){this.props=n,this.context=e}function Bo(n,e){if(e==null)return n.__?Bo(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Bo(n):null}function I0(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return I0(n)}}function Bl(n){(!n.__d&&(n.__d=!0)&&ki.push(n)&&!sc.__r++||Jf!=Ee.debounceRendering)&&((Jf=Ee.debounceRendering)||E0)(sc)}function sc(){for(var n,e,t,r,i,o,s,a=1;ki.length;)ki.length>a&&ki.sort(A0),n=ki.shift(),a=ki.length,n.__d&&(t=void 0,r=void 0,i=(r=(e=n).__v).__e,o=[],s=[],e.__P&&((t=dr({},r)).__v=r.__v+1,Ee.vnode&&Ee.vnode(t),Pd(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,o,i??Bo(r),!!(32&r.__u),s),t.__v=r.__v,t.__.__k[t.__i]=t,O0(o,t,s),r.__e=r.__=null,t.__e!=i&&I0(t)));sc.__r=0}function T0(n,e,t,r,i,o,s,a,c,u,d){var p,w,h,b,S,A,I,x=r&&r.__k||k0,k=e.length;for(c=b1(t,e,x,c,k),p=0;p<k;p++)(h=t.__k[p])!=null&&(w=h.__i==-1?xs:x[h.__i]||xs,h.__i=p,A=Pd(n,h,w,i,o,s,a,c,u,d),b=h.__e,h.ref&&w.ref!=h.ref&&(w.ref&&Ld(w.ref,null,h),d.push(h.ref,h.__c||b,h)),S==null&&b!=null&&(S=b),(I=!!(4&h.__u))||w.__k===h.__k?c=N0(h,c,n,I):typeof h.type=="function"&&A!==void 0?c=A:b&&(c=b.nextSibling),h.__u&=-7);return t.__e=S,c}function b1(n,e,t,r,i){var o,s,a,c,u,d=t.length,p=d,w=0;for(n.__k=new Array(i),o=0;o<i;o++)(s=e[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=n.__k[o]=Es(null,s,null,null,null):js(s)?s=n.__k[o]=Es(Ln,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=n.__k[o]=Es(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):n.__k[o]=s,c=o+w,s.__=n,s.__b=n.__b+1,a=null,(u=s.__i=v1(s,t,c,p))!=-1&&(p--,(a=t[u])&&(a.__u|=2)),a==null||a.__v==null?(u==-1&&(i>d?w--:i<d&&w++),typeof s.type!="function"&&(s.__u|=4)):u!=c&&(u==c-1?w--:u==c+1?w++:(u>c?w--:w++,s.__u|=4))):n.__k[o]=null;if(p)for(o=0;o<d;o++)(a=t[o])!=null&&!(2&a.__u)&&(a.__e==r&&(r=Bo(a)),x0(a,a));return r}function N0(n,e,t,r){var i,o;if(typeof n.type=="function"){for(i=n.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=n,e=N0(i[o],e,t,r));return e}n.__e!=e&&(r&&(e&&n.type&&!e.parentNode&&(e=Bo(n)),t.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ur(n,e){return e=e||[],n==null||typeof n=="boolean"||(js(n)?n.some(function(t){Ur(t,e)}):e.push(n)),e}function v1(n,e,t,r){var i,o,s,a=n.key,c=n.type,u=e[t],d=u!=null&&(2&u.__u)==0;if(u===null&&a==null||d&&a==u.key&&c==u.type)return t;if(r>(d?1:0)){for(i=t-1,o=t+1;i>=0||o<e.length;)if((u=e[s=i>=0?i--:o++])!=null&&!(2&u.__u)&&a==u.key&&c==u.type)return s}return-1}function Qf(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||_1.test(e)?t:t+"px"}function ya(n,e,t,r,i){var o,s;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||Qf(n.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||Qf(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(R0,"$1")),s=e.toLowerCase(),e=s in n||e=="onFocusOut"||e=="onFocusIn"?s.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?r?t.u=r.u:(t.u=Bd,n.addEventListener(e,o?xl:Cl,o)):n.removeEventListener(e,o?xl:Cl,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function eh(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=Bd++;else if(e.t<t.u)return;return t(Ee.event?Ee.event(e):e)}}}function Pd(n,e,t,r,i,o,s,a,c,u){var d,p,w,h,b,S,A,I,x,k,B,L,$,W,Y,D,j,G=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(c=!!(32&t.__u),o=[a=e.__e=t.__e]),(d=Ee.__b)&&d(e);e:if(typeof G=="function")try{if(I=e.props,x="prototype"in G&&G.prototype.render,k=(d=G.contextType)&&r[d.__c],B=d?k?k.props.value:d.__:r,t.__c?A=(p=e.__c=t.__c).__=p.__E:(x?e.__c=p=new G(I,B):(e.__c=p=new Qn(I,B),p.constructor=G,p.render=A1),k&&k.sub(p),p.state||(p.state={}),p.__n=r,w=p.__d=!0,p.__h=[],p._sb=[]),x&&p.__s==null&&(p.__s=p.state),x&&G.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=dr({},p.__s)),dr(p.__s,G.getDerivedStateFromProps(I,p.__s))),h=p.props,b=p.state,p.__v=e,w)x&&G.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),x&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(x&&G.getDerivedStateFromProps==null&&I!==h&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(I,B),e.__v==t.__v||!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(I,p.__s,B)===!1){for(e.__v!=t.__v&&(p.props=I,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(V){V&&(V.__=e)}),L=0;L<p._sb.length;L++)p.__h.push(p._sb[L]);p._sb=[],p.__h.length&&s.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(I,p.__s,B),x&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(h,b,S)})}if(p.context=B,p.props=I,p.__P=n,p.__e=!1,$=Ee.__r,W=0,x){for(p.state=p.__s,p.__d=!1,$&&$(e),d=p.render(p.props,p.state,p.context),Y=0;Y<p._sb.length;Y++)p.__h.push(p._sb[Y]);p._sb=[]}else do p.__d=!1,$&&$(e),d=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++W<25);p.state=p.__s,p.getChildContext!=null&&(r=dr(dr({},r),p.getChildContext())),x&&!w&&p.getSnapshotBeforeUpdate!=null&&(S=p.getSnapshotBeforeUpdate(h,b)),D=d,d!=null&&d.type===Ln&&d.key==null&&(D=C0(d.props.children)),a=T0(n,js(D)?D:[D],e,t,r,i,o,s,a,c,u),p.base=e.__e,e.__u&=-161,p.__h.length&&s.push(p),A&&(p.__E=p.__=null)}catch(V){if(e.__v=null,c||o!=null)if(V.then){for(e.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else{for(j=o.length;j--;)Md(o[j]);Ml(e)}else e.__e=t.__e,e.__k=t.__k,V.then||Ml(e);Ee.__e(V,e,t)}else o==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=E1(t.__e,e,t,r,i,o,s,c,u);return(d=Ee.diffed)&&d(e),128&e.__u?void 0:a}function Ml(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Ml)}function O0(n,e,t){for(var r=0;r<t.length;r++)Ld(t[r],t[++r],t[++r]);Ee.__c&&Ee.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(o){o.call(i)})}catch(o){Ee.__e(o,i.__v)}})}function C0(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:js(n)?n.map(C0):dr({},n)}function E1(n,e,t,r,i,o,s,a,c){var u,d,p,w,h,b,S,A=t.props||xs,I=e.props,x=e.type;if(x=="svg"?i="http://www.w3.org/2000/svg":x=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((h=o[u])&&"setAttribute"in h==!!x&&(x?h.localName==x:h.nodeType==3)){n=h,o[u]=null;break}}if(n==null){if(x==null)return document.createTextNode(I);n=document.createElementNS(i,x,I.is&&I),a&&(Ee.__m&&Ee.__m(e,o),a=!1),o=null}if(x==null)A===I||a&&n.data==I||(n.data=I);else{if(o=o&&Gs.call(n.childNodes),!a&&o!=null)for(A={},u=0;u<n.attributes.length;u++)A[(h=n.attributes[u]).name]=h.value;for(u in A)if(h=A[u],u!="children"){if(u=="dangerouslySetInnerHTML")p=h;else if(!(u in I)){if(u=="value"&&"defaultValue"in I||u=="checked"&&"defaultChecked"in I)continue;ya(n,u,null,h,i)}}for(u in I)h=I[u],u=="children"?w=h:u=="dangerouslySetInnerHTML"?d=h:u=="value"?b=h:u=="checked"?S=h:a&&typeof h!="function"||A[u]===h||ya(n,u,h,A[u],i);if(d)a||p&&(d.__html==p.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(p&&(n.innerHTML=""),T0(e.type=="template"?n.content:n,js(w)?w:[w],e,t,r,x=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,s,o?o[0]:t.__k&&Bo(t,0),a,c),o!=null)for(u=o.length;u--;)Md(o[u]);a||(u="value",x=="progress"&&b==null?n.removeAttribute("value"):b!=null&&(b!==n[u]||x=="progress"&&!b||x=="option"&&b!=A[u])&&ya(n,u,b,A[u],i),u="checked",S!=null&&S!=n[u]&&ya(n,u,S,A[u],i))}return n}function Ld(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(i){Ee.__e(i,t)}}function x0(n,e,t){var r,i;if(Ee.unmount&&Ee.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||Ld(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Ee.__e(o,e)}r.base=r.__P=null}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&x0(r[i],e,t||typeof n.type!="function");t||Md(n.__e),n.__c=n.__=n.__e=void 0}function A1(n,e,t){return this.constructor(n,t)}function Mo(n,e,t){var r,i,o,s;e==document&&(e=document.documentElement),Ee.__&&Ee.__(n,e),i=(r=typeof t=="function")?null:t&&t.__k||e.__k,o=[],s=[],Pd(e,n=(!r&&t||e).__k=Fr(Ln,null,[n]),i||xs,xs,e.namespaceURI,!r&&t?[t]:i?null:e.firstChild?Gs.call(e.childNodes):null,o,!r&&t?t:i?i.__e:e.firstChild,r,s),O0(o,n,s)}function B0(n,e){Mo(n,e,B0)}function R1(n,e,t){var r,i,o,s,a=dr({},n.props);for(o in n.type&&n.type.defaultProps&&(s=n.type.defaultProps),e)o=="key"?r=e[o]:o=="ref"?i=e[o]:a[o]=e[o]===void 0&&s!=null?s[o]:e[o];return arguments.length>2&&(a.children=arguments.length>3?Gs.call(arguments,2):t),Es(n.type,a,r||n.key,i||n.ref,null)}function Lc(n){function e(t){var r,i;return this.getChildContext||(r=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&r.forEach(function(s){s.__e=!0,Bl(s)})},this.sub=function(o){r.add(o);var s=o.componentWillUnmount;o.componentWillUnmount=function(){r&&r.delete(o),s&&s.call(o)}}),t.children}return e.__c="__cC"+S0++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}Gs=k0.slice,Ee={__e:function(n,e,t,r){for(var i,o,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(n)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),s=i.__d),s)return i.__E=i}catch(a){n=a}throw n}},b0=0,v0=function(n){return n!=null&&n.constructor===void 0},Qn.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=dr({},this.state),typeof n=="function"&&(n=n(dr({},t),this.props)),n&&dr(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Bl(this))},Qn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Bl(this))},Qn.prototype.render=Ln,ki=[],E0=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,A0=function(n,e){return n.__v.__b-e.__v.__b},sc.__r=0,R0=/(PointerCapture)$|Capture$/i,Bd=0,Cl=eh(!1),xl=eh(!0),S0=0;var S1=0;function F(n,e,t,r,i,o){e||(e={});var s,a,c=e;if("ref"in c)for(a in c={},e)a=="ref"?s=e[a]:c[a]=e[a];var u={type:n,props:c,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--S1,__i:-1,__u:0,__source:i,__self:o};if(typeof n=="function"&&(s=n.defaultProps))for(a in s)c[a]===void 0&&(c[a]=s[a]);return Ee.vnode&&Ee.vnode(u),u}var hi,Xe,Lu,th,Po=0,M0=[],st=Ee,nh=st.__b,rh=st.__r,ih=st.diffed,oh=st.__c,sh=st.unmount,ah=st.__;function Zo(n,e){st.__h&&st.__h(Xe,n,Po||e),Po=0;var t=Xe.__H||(Xe.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function Ge(n){return Po=1,Ud(D0,n)}function Ud(n,e,t){var r=Zo(hi++,2);if(r.t=n,!r.__c&&(r.__=[t?t(e):D0(void 0,e),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=Xe,!Xe.__f)){var i=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(w){return!!w.__c});if(d.every(function(w){return!w.__N}))return!o||o.call(this,a,c,u);var p=r.__c.props!==a;return d.forEach(function(w){if(w.__N){var h=w.__[0];w.__=w.__N,w.__N=void 0,h!==w.__[0]&&(p=!0)}}),o&&o.call(this,a,c,u)||p};Xe.__f=!0;var o=Xe.shouldComponentUpdate,s=Xe.componentWillUpdate;Xe.componentWillUpdate=function(a,c,u){if(this.__e){var d=o;o=void 0,i(a,c,u),o=d}s&&s.call(this,a,c,u)},Xe.shouldComponentUpdate=i}return r.__N||r.__}function qt(n,e){var t=Zo(hi++,3);!st.__s&&Dd(t.__H,e)&&(t.__=n,t.u=e,Xe.__H.__h.push(t))}function Wr(n,e){var t=Zo(hi++,4);!st.__s&&Dd(t.__H,e)&&(t.__=n,t.u=e,Xe.__h.push(t))}function nn(n){return Po=5,bt(function(){return{current:n}},[])}function P0(n,e,t){Po=6,Wr(function(){if(typeof n=="function"){var r=n(e());return function(){n(null),r&&typeof r=="function"&&r()}}if(n)return n.current=e(),function(){return n.current=null}},t==null?t:t.concat(n))}function bt(n,e){var t=Zo(hi++,7);return Dd(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function rn(n,e){return Po=8,bt(function(){return n},e)}function Ys(n){var e=Xe.context[n.__c],t=Zo(hi++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(Xe)),e.props.value):n.__}function L0(n,e){st.useDebugValue&&st.useDebugValue(e?e(n):n)}function U0(){var n=Zo(hi++,11);if(!n.__){for(var e=Xe.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var t=e.__m||(e.__m=[0,0]);n.__="P"+t[0]+"-"+t[1]++}return n.__}function k1(){for(var n;n=M0.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Ua),n.__H.__h.forEach(Pl),n.__H.__h=[]}catch(e){n.__H.__h=[],st.__e(e,n.__v)}}st.__b=function(n){Xe=null,nh&&nh(n)},st.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),ah&&ah(n,e)},st.__r=function(n){rh&&rh(n),hi=0;var e=(Xe=n.__c).__H;e&&(Lu===Xe?(e.__h=[],Xe.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Ua),e.__h.forEach(Pl),e.__h=[],hi=0)),Lu=Xe},st.diffed=function(n){ih&&ih(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(M0.push(e)!==1&&th===st.requestAnimationFrame||((th=st.requestAnimationFrame)||I1)(k1)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Lu=Xe=null},st.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Ua),t.__h=t.__h.filter(function(r){return!r.__||Pl(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],st.__e(r,t.__v)}}),oh&&oh(n,e)},st.unmount=function(n){sh&&sh(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Ua(r)}catch(i){e=i}}),t.__H=void 0,e&&st.__e(e,t.__v))};var ch=typeof requestAnimationFrame=="function";function I1(n){var e,t=function(){clearTimeout(r),ch&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,35);ch&&(e=requestAnimationFrame(t))}function Ua(n){var e=Xe,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Xe=e}function Pl(n){var e=Xe;n.__c=n.__(),Xe=e}function Dd(n,e){return!n||n.length!==e.length||e.some(function(t,r){return t!==n[r]})}function D0(n,e){return typeof e=="function"?e(n):e}const so=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zs(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Bs(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function zr(n,...e){if(!Zs(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function F0(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Bs(n.outputLen),Bs(n.blockLen)}function Lo(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function W0(n,e){zr(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function T1(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function pi(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function Uu(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function rr(n,e){return n<<32-e|n>>>e}const N1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function O1(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function C1(n){for(let e=0;e<n.length;e++)n[e]=O1(n[e]);return n}const uh=N1?n=>n:C1,z0=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",x1=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Ki(n){if(zr(n),z0)return n.toHex();let e="";for(let t=0;t<n.length;t++)e+=x1[n[t]];return e}const Rr={_0:48,_9:57,A:65,F:70,a:97,f:102};function lh(n){if(n>=Rr._0&&n<=Rr._9)return n-Rr._0;if(n>=Rr.A&&n<=Rr.F)return n-(Rr.A-10);if(n>=Rr.a&&n<=Rr.f)return n-(Rr.a-10)}function ac(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(z0)return Uint8Array.fromHex(n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,o=0;i<t;i++,o+=2){const s=lh(n.charCodeAt(o)),a=lh(n.charCodeAt(o+1));if(s===void 0||a===void 0){const c=n[o]+n[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[i]=s*16+a}return r}function B1(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Uc(n){return typeof n=="string"&&(n=B1(n)),zr(n),n}function ar(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];zr(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const o=n[r];t.set(o,i),i+=o.length}return t}class Fd{}function Wd(n){const e=r=>n().update(Uc(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function zd(n=32){if(so&&typeof so.getRandomValues=="function")return so.getRandomValues(new Uint8Array(n));if(so&&typeof so.randomBytes=="function")return Uint8Array.from(so.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function M1(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),a=Number(t&o),c=r?4:0,u=r?0:4;n.setUint32(e+c,s,r),n.setUint32(e+u,a,r)}function P1(n,e,t){return n&e^~n&t}function L1(n,e,t){return n&e^n&t^e&t}class H0 extends Fd{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Uu(this.buffer)}update(e){Lo(this),e=Uc(e),zr(e);const{view:t,buffer:r,blockLen:i}=this,o=e.length;for(let s=0;s<o;){const a=Math.min(i-this.pos,o-s);if(a===i){const c=Uu(e);for(;i<=o-s;s+=i)this.process(c,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Lo(this),W0(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:o}=this;let{pos:s}=this;t[s++]=128,pi(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(r,0),s=0);for(let p=s;p<i;p++)t[p]=0;M1(r,i-8,BigInt(this.length*8),o),this.process(r,0);const a=Uu(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<u;p++)a.setUint32(4*p,d[p],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:o,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=o,e.length=i,e.pos=a,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const jr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),_a=BigInt(2**32-1),dh=BigInt(32);function U1(n,e=!1){return e?{h:Number(n&_a),l:Number(n>>dh&_a)}:{h:Number(n>>dh&_a)|0,l:Number(n&_a)|0}}function K0(n,e=!1){const t=n.length;let r=new Uint32Array(t),i=new Uint32Array(t);for(let o=0;o<t;o++){const{h:s,l:a}=U1(n[o],e);[r[o],i[o]]=[s,a]}return[r,i]}const fh=(n,e,t)=>n>>>t,hh=(n,e,t)=>n<<32-t|e>>>t,ao=(n,e,t)=>n>>>t|e<<32-t,co=(n,e,t)=>n<<32-t|e>>>t,wa=(n,e,t)=>n<<64-t|e>>>t-32,ba=(n,e,t)=>n>>>t-32|e<<64-t,D1=(n,e,t)=>n<<t|e>>>32-t,F1=(n,e,t)=>e<<t|n>>>32-t,W1=(n,e,t)=>e<<t-32|n>>>64-t,z1=(n,e,t)=>n<<t-32|e>>>64-t;function Sr(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const H1=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),K1=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,$1=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),V1=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,q1=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),G1=(n,e,t,r,i,o)=>e+t+r+i+o+(n/2**32|0)|0,j1=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yr=new Uint32Array(64);class Y1 extends H0{constructor(e=32){super(64,e,8,!1),this.A=jr[0]|0,this.B=jr[1]|0,this.C=jr[2]|0,this.D=jr[3]|0,this.E=jr[4]|0,this.F=jr[5]|0,this.G=jr[6]|0,this.H=jr[7]|0}get(){const{A:e,B:t,C:r,D:i,E:o,F:s,G:a,H:c}=this;return[e,t,r,i,o,s,a,c]}set(e,t,r,i,o,s,a,c){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,t){for(let p=0;p<16;p++,t+=4)Yr[p]=e.getUint32(t,!1);for(let p=16;p<64;p++){const w=Yr[p-15],h=Yr[p-2],b=rr(w,7)^rr(w,18)^w>>>3,S=rr(h,17)^rr(h,19)^h>>>10;Yr[p]=S+Yr[p-7]+b+Yr[p-16]|0}let{A:r,B:i,C:o,D:s,E:a,F:c,G:u,H:d}=this;for(let p=0;p<64;p++){const w=rr(a,6)^rr(a,11)^rr(a,25),h=d+w+P1(a,c,u)+j1[p]+Yr[p]|0,S=(rr(r,2)^rr(r,13)^rr(r,22))+L1(r,i,o)|0;d=u,u=c,c=a,a=s+h|0,s=o,o=i,i=r,r=h+S|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,i,o,s,a,c,u,d)}roundClean(){pi(Yr)}destroy(){this.set(0,0,0,0,0,0,0,0),pi(this.buffer)}}const $0=K0(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Z1=$0[0],X1=$0[1],Zr=new Uint32Array(80),Xr=new Uint32Array(80);class J1 extends H0{constructor(e=64){super(128,e,16,!1),this.Ah=cn[0]|0,this.Al=cn[1]|0,this.Bh=cn[2]|0,this.Bl=cn[3]|0,this.Ch=cn[4]|0,this.Cl=cn[5]|0,this.Dh=cn[6]|0,this.Dl=cn[7]|0,this.Eh=cn[8]|0,this.El=cn[9]|0,this.Fh=cn[10]|0,this.Fl=cn[11]|0,this.Gh=cn[12]|0,this.Gl=cn[13]|0,this.Hh=cn[14]|0,this.Hl=cn[15]|0}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:o,Cl:s,Dh:a,Dl:c,Eh:u,El:d,Fh:p,Fl:w,Gh:h,Gl:b,Hh:S,Hl:A}=this;return[e,t,r,i,o,s,a,c,u,d,p,w,h,b,S,A]}set(e,t,r,i,o,s,a,c,u,d,p,w,h,b,S,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=p|0,this.Fl=w|0,this.Gh=h|0,this.Gl=b|0,this.Hh=S|0,this.Hl=A|0}process(e,t){for(let k=0;k<16;k++,t+=4)Zr[k]=e.getUint32(t),Xr[k]=e.getUint32(t+=4);for(let k=16;k<80;k++){const B=Zr[k-15]|0,L=Xr[k-15]|0,$=ao(B,L,1)^ao(B,L,8)^fh(B,L,7),W=co(B,L,1)^co(B,L,8)^hh(B,L,7),Y=Zr[k-2]|0,D=Xr[k-2]|0,j=ao(Y,D,19)^wa(Y,D,61)^fh(Y,D,6),G=co(Y,D,19)^ba(Y,D,61)^hh(Y,D,6),V=$1(W,G,Xr[k-7],Xr[k-16]),v=V1(V,$,j,Zr[k-7],Zr[k-16]);Zr[k]=v|0,Xr[k]=V|0}let{Ah:r,Al:i,Bh:o,Bl:s,Ch:a,Cl:c,Dh:u,Dl:d,Eh:p,El:w,Fh:h,Fl:b,Gh:S,Gl:A,Hh:I,Hl:x}=this;for(let k=0;k<80;k++){const B=ao(p,w,14)^ao(p,w,18)^wa(p,w,41),L=co(p,w,14)^co(p,w,18)^ba(p,w,41),$=p&h^~p&S,W=w&b^~w&A,Y=q1(x,L,W,X1[k],Xr[k]),D=G1(Y,I,B,$,Z1[k],Zr[k]),j=Y|0,G=ao(r,i,28)^wa(r,i,34)^wa(r,i,39),V=co(r,i,28)^ba(r,i,34)^ba(r,i,39),v=r&o^r&a^o&a,l=i&s^i&c^s&c;I=S|0,x=A|0,S=h|0,A=b|0,h=p|0,b=w|0,{h:p,l:w}=Sr(u|0,d|0,D|0,j|0),u=a|0,d=c|0,a=o|0,c=s|0,o=r|0,s=i|0;const f=H1(j,V,l);r=K1(f,D,G,v),i=f|0}({h:r,l:i}=Sr(this.Ah|0,this.Al|0,r|0,i|0)),{h:o,l:s}=Sr(this.Bh|0,this.Bl|0,o|0,s|0),{h:a,l:c}=Sr(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=Sr(this.Dh|0,this.Dl|0,u|0,d|0),{h:p,l:w}=Sr(this.Eh|0,this.El|0,p|0,w|0),{h,l:b}=Sr(this.Fh|0,this.Fl|0,h|0,b|0),{h:S,l:A}=Sr(this.Gh|0,this.Gl|0,S|0,A|0),{h:I,l:x}=Sr(this.Hh|0,this.Hl|0,I|0,x|0),this.set(r,i,o,s,a,c,u,d,p,w,h,b,S,A,I,x)}roundClean(){pi(Zr,Xr)}destroy(){pi(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const V0=Wd(()=>new Y1),Q1=Wd(()=>new J1);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hd=BigInt(0),Ll=BigInt(1);function Vi(n,e=""){if(typeof n!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof n)}return n}function Xn(n,e,t=""){const r=Zs(n),i=n==null?void 0:n.length,o=e!==void 0;if(!r||o&&i!==e){const s=t&&`"${t}" `,a=o?` of length ${e}`:"",c=r?`length=${i}`:`type=${typeof n}`;throw new Error(s+"expected Uint8Array"+a+", got "+c)}return n}function va(n){const e=n.toString(16);return e.length&1?"0"+e:e}function q0(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Hd:BigInt("0x"+n)}function Dc(n){return q0(Ki(n))}function Ms(n){return zr(n),q0(Ki(Uint8Array.from(n).reverse()))}function Kd(n,e){return ac(n.toString(16).padStart(e*2,"0"))}function G0(n,e){return Kd(n,e).reverse()}function yt(n,e,t){let r;if(typeof e=="string")try{r=ac(e)}catch(o){throw new Error(n+" must be hex string or Uint8Array, cause: "+o)}else if(Zs(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function ph(n){return Uint8Array.from(n)}const Du=n=>typeof n=="bigint"&&Hd<=n;function eb(n,e,t){return Du(n)&&Du(e)&&Du(t)&&e<=n&&n<t}function Ul(n,e,t,r){if(!eb(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function j0(n){let e;for(e=0;n>Hd;n>>=Ll,e+=1);return e}const Xs=n=>(Ll<<BigInt(n))-Ll;function tb(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),i=h=>Uint8Array.of(h);let o=r(n),s=r(n),a=0;const c=()=>{o.fill(1),s.fill(0),a=0},u=(...h)=>t(s,o,...h),d=(h=r(0))=>{s=u(i(0),h),o=u(),h.length!==0&&(s=u(i(1),h),o=u())},p=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const b=[];for(;h<e;){o=u();const S=o.slice();b.push(S),h+=o.length}return ar(...b)};return(h,b)=>{c(),d(h);let S;for(;!(S=b(p()));)d();return c(),S}}function Js(n,e,t={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(i,o,s){const a=n[i];if(s&&a===void 0)return;const c=typeof a;if(c!==o||a===null)throw new Error(`param "${i}" is invalid: expected ${o}, got ${c}`)}Object.entries(e).forEach(([i,o])=>r(i,o,!1)),Object.entries(t).forEach(([i,o])=>r(i,o,!0))}function cc(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const o=n(t,...r);return e.set(t,o),o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sn=BigInt(0),sn=BigInt(1),Oi=BigInt(2),Y0=BigInt(3),Z0=BigInt(4),X0=BigInt(5),nb=BigInt(7),J0=BigInt(8),rb=BigInt(9),Q0=BigInt(16);function Ht(n,e){const t=n%e;return t>=Sn?t:e+t}function mt(n,e,t){let r=n;for(;e-- >Sn;)r*=r,r%=t;return r}function gh(n,e){if(n===Sn)throw new Error("invert: expected non-zero number");if(e<=Sn)throw new Error("invert: expected positive modulus, got "+e);let t=Ht(n,e),r=e,i=Sn,o=sn;for(;t!==Sn;){const a=r/t,c=r%t,u=i-o*a;r=t,t=c,i=o,o=u}if(r!==sn)throw new Error("invert: does not exist");return Ht(i,e)}function $d(n,e,t){if(!n.eql(n.sqr(e),t))throw new Error("Cannot find square root")}function eg(n,e){const t=(n.ORDER+sn)/Z0,r=n.pow(e,t);return $d(n,r,e),r}function ib(n,e){const t=(n.ORDER-X0)/J0,r=n.mul(e,Oi),i=n.pow(r,t),o=n.mul(e,i),s=n.mul(n.mul(o,Oi),i),a=n.mul(o,n.sub(s,n.ONE));return $d(n,a,e),a}function ob(n){const e=Yi(n),t=tg(n),r=t(e,e.neg(e.ONE)),i=t(e,r),o=t(e,e.neg(r)),s=(n+nb)/Q0;return(a,c)=>{let u=a.pow(c,s),d=a.mul(u,r);const p=a.mul(u,i),w=a.mul(u,o),h=a.eql(a.sqr(d),c),b=a.eql(a.sqr(p),c);u=a.cmov(u,d,h),d=a.cmov(w,p,b);const S=a.eql(a.sqr(d),c),A=a.cmov(u,d,S);return $d(a,A,c),A}}function tg(n){if(n<Y0)throw new Error("sqrt is not defined for small field");let e=n-sn,t=0;for(;e%Oi===Sn;)e/=Oi,t++;let r=Oi;const i=Yi(n);for(;mh(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return eg;let o=i.pow(r,e);const s=(e+sn)/Oi;return function(c,u){if(c.is0(u))return u;if(mh(c,u)!==1)throw new Error("Cannot find square root");let d=t,p=c.mul(c.ONE,o),w=c.pow(u,e),h=c.pow(u,s);for(;!c.eql(w,c.ONE);){if(c.is0(w))return c.ZERO;let b=1,S=c.sqr(w);for(;!c.eql(S,c.ONE);)if(b++,S=c.sqr(S),b===d)throw new Error("Cannot find square root");const A=sn<<BigInt(d-b-1),I=c.pow(p,A);d=b,p=c.sqr(I),w=c.mul(w,p),h=c.mul(h,I)}return h}}function sb(n){return n%Z0===Y0?eg:n%J0===X0?ib:n%Q0===rb?ob(n):tg(n)}const ab=(n,e)=>(Ht(n,e)&sn)===sn,cb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ub(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=cb.reduce((r,i)=>(r[i]="function",r),e);return Js(n,t),n}function lb(n,e,t){if(t<Sn)throw new Error("invalid exponent, negatives unsupported");if(t===Sn)return n.ONE;if(t===sn)return e;let r=n.ONE,i=e;for(;t>Sn;)t&sn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=sn;return r}function ng(n,e,t=!1){const r=new Array(e.length).fill(t?n.ZERO:void 0),i=e.reduce((s,a,c)=>n.is0(a)?s:(r[c]=s,n.mul(s,a)),n.ONE),o=n.inv(i);return e.reduceRight((s,a,c)=>n.is0(a)?s:(r[c]=n.mul(s,r[c]),n.mul(s,a)),o),r}function mh(n,e){const t=(n.ORDER-sn)/Oi,r=n.pow(e,t),i=n.eql(r,n.ONE),o=n.eql(r,n.ZERO),s=n.eql(r,n.neg(n.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function rg(n,e){e!==void 0&&Bs(e);const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Yi(n,e,t=!1,r={}){if(n<=Sn)throw new Error("invalid field: expected ORDER > 0, got "+n);let i,o,s=!1,a;if(typeof e=="object"&&e!=null){if(r.sqrt||t)throw new Error("cannot specify opts in two arguments");const w=e;w.BITS&&(i=w.BITS),w.sqrt&&(o=w.sqrt),typeof w.isLE=="boolean"&&(t=w.isLE),typeof w.modFromBytes=="boolean"&&(s=w.modFromBytes),a=w.allowedLengths}else typeof e=="number"&&(i=e),r.sqrt&&(o=r.sqrt);const{nBitLength:c,nByteLength:u}=rg(n,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const p=Object.freeze({ORDER:n,isLE:t,BITS:c,BYTES:u,MASK:Xs(c),ZERO:Sn,ONE:sn,allowedLengths:a,create:w=>Ht(w,n),isValid:w=>{if(typeof w!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof w);return Sn<=w&&w<n},is0:w=>w===Sn,isValidNot0:w=>!p.is0(w)&&p.isValid(w),isOdd:w=>(w&sn)===sn,neg:w=>Ht(-w,n),eql:(w,h)=>w===h,sqr:w=>Ht(w*w,n),add:(w,h)=>Ht(w+h,n),sub:(w,h)=>Ht(w-h,n),mul:(w,h)=>Ht(w*h,n),pow:(w,h)=>lb(p,w,h),div:(w,h)=>Ht(w*gh(h,n),n),sqrN:w=>w*w,addN:(w,h)=>w+h,subN:(w,h)=>w-h,mulN:(w,h)=>w*h,inv:w=>gh(w,n),sqrt:o||(w=>(d||(d=sb(n)),d(p,w))),toBytes:w=>t?G0(w,u):Kd(w,u),fromBytes:(w,h=!0)=>{if(a){if(!a.includes(w.length)||w.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+w.length);const S=new Uint8Array(u);S.set(w,t?0:S.length-w.length),w=S}if(w.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+w.length);let b=t?Ms(w):Dc(w);if(s&&(b=Ht(b,n)),!h&&!p.isValid(b))throw new Error("invalid field element: outside of range 0..ORDER");return b},invertBatch:w=>ng(p,w),cmov:(w,h,b)=>b?h:w});return Object.freeze(p)}function ig(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function og(n){const e=ig(n);return e+Math.ceil(e/2)}function db(n,e,t=!1){const r=n.length,i=ig(e),o=og(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=t?Ms(n):Dc(n),a=Ht(s,e-sn)+sn;return t?G0(a,i):Kd(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Uo=BigInt(0),Ci=BigInt(1);function uc(n,e){const t=e.negate();return n?t:e}function xi(n,e){const t=ng(n.Fp,e.map(r=>r.Z));return e.map((r,i)=>n.fromAffine(r.toAffine(t[i])))}function sg(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function Fu(n,e){sg(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1),i=2**n,o=Xs(n),s=BigInt(n);return{windows:t,windowSize:r,mask:o,maxNumber:i,shiftBy:s}}function yh(n,e,t){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=t;let a=Number(n&i),c=n>>s;a>r&&(a-=o,c+=Ci);const u=e*r,d=u+Math.abs(a)-1,p=a===0,w=a<0,h=e%2!==0;return{nextN:c,offset:d,isZero:p,isNeg:w,isNegF:h,offsetF:u}}function fb(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function hb(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const Wu=new WeakMap,ag=new WeakMap;function zu(n){return ag.get(n)||1}function _h(n){if(n!==Uo)throw new Error("invalid wNAF")}class cg{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>Uo;)t&Ci&&(r=r.add(i)),i=i.double(),t>>=Ci;return r}precomputeWindow(e,t){const{windows:r,windowSize:i}=Fu(t,this.bits),o=[];let s=e,a=s;for(let c=0;c<r;c++){a=s,o.push(a);for(let u=1;u<i;u++)a=a.add(s),o.push(a);s=a.double()}return o}wNAF(e,t,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE;const s=Fu(e,this.bits);for(let a=0;a<s.windows;a++){const{nextN:c,offset:u,isZero:d,isNeg:p,isNegF:w,offsetF:h}=yh(r,a,s);r=c,d?o=o.add(uc(w,t[h])):i=i.add(uc(p,t[u]))}return _h(r),{p:i,f:o}}wNAFUnsafe(e,t,r,i=this.ZERO){const o=Fu(e,this.bits);for(let s=0;s<o.windows&&r!==Uo;s++){const{nextN:a,offset:c,isZero:u,isNeg:d}=yh(r,s,o);if(r=a,!u){const p=t[c];i=i.add(d?p.negate():p)}}return _h(r),i}getPrecomputes(e,t,r){let i=Wu.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof r=="function"&&(i=r(i)),Wu.set(t,i))),i}cached(e,t,r){const i=zu(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){const o=zu(e);return o===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,r),t,i)}createCache(e,t){sg(t,this.bits),ag.set(e,t),Wu.delete(e)}hasCache(e){return zu(e)!==1}}function pb(n,e,t,r){let i=e,o=n.ZERO,s=n.ZERO;for(;t>Uo||r>Uo;)t&Ci&&(o=o.add(i)),r&Ci&&(s=s.add(i)),i=i.double(),t>>=Ci,r>>=Ci;return{p1:o,p2:s}}function ug(n,e,t,r){fb(t,n),hb(r,e);const i=t.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=n.ZERO,a=j0(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=Xs(c),d=new Array(Number(u)+1).fill(s),p=Math.floor((e.BITS-1)/c)*c;let w=s;for(let h=p;h>=0;h-=c){d.fill(s);for(let S=0;S<o;S++){const A=r[S],I=Number(A>>BigInt(h)&u);d[I]=d[I].add(t[S])}let b=s;for(let S=d.length-1,A=s;S>0;S--)A=A.add(d[S]),b=b.add(A);if(w=w.add(b),h!==0)for(let S=0;S<c;S++)w=w.double()}return w}function wh(n,e,t){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return ub(e),e}else return Yi(n,{isLE:t})}function lg(n,e,t={},r){if(r===void 0&&(r=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>Uo))throw new Error(`CURVE.${c} must be positive bigint`)}const i=wh(e.p,t.Fp,r),o=wh(e.n,t.Fn,r),a=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const c of a)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jr=BigInt(0),Yt=BigInt(1),Hu=BigInt(2),gb=BigInt(8);function mb(n,e,t,r){const i=n.sqr(t),o=n.sqr(r),s=n.add(n.mul(e.a,i),o),a=n.add(n.ONE,n.mul(e.d,n.mul(i,o)));return n.eql(s,a)}function yb(n,e={}){const t=lg("edwards",n,e,e.FpFnLE),{Fp:r,Fn:i}=t;let o=t.CURVE;const{h:s}=o;Js(e,{},{uvRatio:"function"});const a=Hu<<BigInt(i.BYTES*8)-Yt,c=A=>r.create(A),u=e.uvRatio||((A,I)=>{try{return{isValid:!0,value:r.sqrt(r.div(A,I))}}catch{return{isValid:!1,value:Jr}}});if(!mb(r,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function d(A,I,x=!1){const k=x?Yt:Jr;return Ul("coordinate "+A,I,k,a),I}function p(A){if(!(A instanceof b))throw new Error("ExtendedPoint expected")}const w=cc((A,I)=>{const{X:x,Y:k,Z:B}=A,L=A.is0();I==null&&(I=L?gb:r.inv(B));const $=c(x*I),W=c(k*I),Y=r.mul(B,I);if(L)return{x:Jr,y:Yt};if(Y!==Yt)throw new Error("invZ was invalid");return{x:$,y:W}}),h=cc(A=>{const{a:I,d:x}=o;if(A.is0())throw new Error("bad point: ZERO");const{X:k,Y:B,Z:L,T:$}=A,W=c(k*k),Y=c(B*B),D=c(L*L),j=c(D*D),G=c(W*I),V=c(D*c(G+Y)),v=c(j+c(x*c(W*Y)));if(V!==v)throw new Error("bad point: equation left != right (1)");const l=c(k*B),f=c(L*$);if(l!==f)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(I,x,k,B){this.X=d("x",I),this.Y=d("y",x),this.Z=d("z",k,!0),this.T=d("t",B),Object.freeze(this)}static CURVE(){return o}static fromAffine(I){if(I instanceof b)throw new Error("extended point not allowed");const{x,y:k}=I||{};return d("x",x),d("y",k),new b(x,k,Yt,c(x*k))}static fromBytes(I,x=!1){const k=r.BYTES,{a:B,d:L}=o;I=ph(Xn(I,k,"point")),Vi(x,"zip215");const $=ph(I),W=I[k-1];$[k-1]=W&-129;const Y=Ms($),D=x?a:r.ORDER;Ul("point.y",Y,Jr,D);const j=c(Y*Y),G=c(j-Yt),V=c(L*j-B);let{isValid:v,value:l}=u(G,V);if(!v)throw new Error("bad point: invalid y coordinate");const f=(l&Yt)===Yt,_=(W&128)!==0;if(!x&&l===Jr&&_)throw new Error("bad point: x=0 and x_0=1");return _!==f&&(l=c(-l)),b.fromAffine({x:l,y:Y})}static fromHex(I,x=!1){return b.fromBytes(yt("point",I),x)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(I=8,x=!0){return S.createCache(this,I),x||this.multiply(Hu),this}assertValidity(){h(this)}equals(I){p(I);const{X:x,Y:k,Z:B}=this,{X:L,Y:$,Z:W}=I,Y=c(x*W),D=c(L*B),j=c(k*W),G=c($*B);return Y===D&&j===G}is0(){return this.equals(b.ZERO)}negate(){return new b(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:I}=o,{X:x,Y:k,Z:B}=this,L=c(x*x),$=c(k*k),W=c(Hu*c(B*B)),Y=c(I*L),D=x+k,j=c(c(D*D)-L-$),G=Y+$,V=G-W,v=Y-$,l=c(j*V),f=c(G*v),_=c(j*v),E=c(V*G);return new b(l,f,E,_)}add(I){p(I);const{a:x,d:k}=o,{X:B,Y:L,Z:$,T:W}=this,{X:Y,Y:D,Z:j,T:G}=I,V=c(B*Y),v=c(L*D),l=c(W*k*G),f=c($*j),_=c((B+L)*(Y+D)-V-v),E=f-l,N=f+l,C=c(v-x*V),P=c(_*E),T=c(N*C),m=c(_*C),M=c(E*N);return new b(P,T,M,m)}subtract(I){return this.add(I.negate())}multiply(I){if(!i.isValidNot0(I))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:x,f:k}=S.cached(this,I,B=>xi(b,B));return xi(b,[x,k])[0]}multiplyUnsafe(I,x=b.ZERO){if(!i.isValid(I))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return I===Jr?b.ZERO:this.is0()||I===Yt?this:S.unsafe(this,I,k=>xi(b,k),x)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return S.unsafe(this,o.n).is0()}toAffine(I){return w(this,I)}clearCofactor(){return s===Yt?this:this.multiplyUnsafe(s)}toBytes(){const{x:I,y:x}=this.toAffine(),k=r.toBytes(x);return k[k.length-1]|=I&Yt?128:0,k}toHex(){return Ki(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(I){return xi(b,I)}static msm(I,x){return ug(b,i,I,x)}_setWindowSize(I){this.precompute(I)}toRawBytes(){return this.toBytes()}}b.BASE=new b(o.Gx,o.Gy,Yt,c(o.Gx*o.Gy)),b.ZERO=new b(Jr,Yt,Yt,Jr),b.Fp=r,b.Fn=i;const S=new cg(b,i.BITS);return b.BASE.precompute(8),b}function _b(n,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');Js(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=t,{BASE:i,Fp:o,Fn:s}=n,a=t.randomBytes||zd,c=t.adjustScalarBytes||(D=>D),u=t.domain||((D,j,G)=>{if(Vi(G,"phflag"),j.length||G)throw new Error("Contexts/pre-hash are not supported");return D});function d(D){return s.create(Ms(D))}function p(D){const j=k.secretKey;D=yt("private key",D,j);const G=yt("hashed private key",e(D),2*j),V=c(G.slice(0,j)),v=G.slice(j,2*j),l=d(V);return{head:V,prefix:v,scalar:l}}function w(D){const{head:j,prefix:G,scalar:V}=p(D),v=i.multiply(V),l=v.toBytes();return{head:j,prefix:G,scalar:V,point:v,pointBytes:l}}function h(D){return w(D).pointBytes}function b(D=Uint8Array.of(),...j){const G=ar(...j);return d(e(u(G,yt("context",D),!!r)))}function S(D,j,G={}){D=yt("message",D),r&&(D=r(D));const{prefix:V,scalar:v,pointBytes:l}=w(j),f=b(G.context,V,D),_=i.multiply(f).toBytes(),E=b(G.context,_,l,D),N=s.create(f+E*v);if(!s.isValid(N))throw new Error("sign failed: invalid s");const C=ar(_,s.toBytes(N));return Xn(C,k.signature,"result")}const A={zip215:!0};function I(D,j,G,V=A){const{context:v,zip215:l}=V,f=k.signature;D=yt("signature",D,f),j=yt("message",j),G=yt("publicKey",G,k.publicKey),l!==void 0&&Vi(l,"zip215"),r&&(j=r(j));const _=f/2,E=D.subarray(0,_),N=Ms(D.subarray(_,f));let C,P,T;try{C=n.fromBytes(G,l),P=n.fromBytes(E,l),T=i.multiplyUnsafe(N)}catch{return!1}if(!l&&C.isSmallOrder())return!1;const m=b(v,P.toBytes(),C.toBytes(),j);return P.add(C.multiplyUnsafe(m)).subtract(T).clearCofactor().is0()}const x=o.BYTES,k={secretKey:x,publicKey:x,signature:2*x,seed:x};function B(D=a(k.seed)){return Xn(D,k.seed,"seed")}function L(D){const j=Y.randomSecretKey(D);return{secretKey:j,publicKey:h(j)}}function $(D){return Zs(D)&&D.length===s.BYTES}function W(D,j){try{return!!n.fromBytes(D,j)}catch{return!1}}const Y={getExtendedPublicKey:w,randomSecretKey:B,isValidSecretKey:$,isValidPublicKey:W,toMontgomery(D){const{y:j}=n.fromBytes(D),G=k.publicKey,V=G===32;if(!V&&G!==57)throw new Error("only defined for 25519 and 448");const v=V?o.div(Yt+j,Yt-j):o.div(j-Yt,j+Yt);return o.toBytes(v)},toMontgomerySecret(D){const j=k.secretKey;Xn(D,j);const G=e(D.subarray(0,j));return c(G).subarray(0,j)},randomPrivateKey:B,precompute(D=8,j=n.BASE){return j.precompute(D,!1)}};return Object.freeze({keygen:L,getPublicKey:h,sign:S,verify:I,utils:Y,Point:n,lengths:k})}function wb(n){const e={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp,r=Yi(e.n,n.nBitLength,!0),i={Fp:t,Fn:r,uvRatio:n.uvRatio},o={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:e,curveOpts:i,hash:n.hash,eddsaOpts:o}}function bb(n,e){const t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:n,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function vb(n){const{CURVE:e,curveOpts:t,hash:r,eddsaOpts:i}=wb(n),o=yb(e,t),s=_b(o,r,i);return bb(n,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Eb=BigInt(1),bh=BigInt(2);BigInt(3);const Ab=BigInt(5),Rb=BigInt(8),Vd=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),dg={p:Vd,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Rb,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Sb(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),o=Vd,a=n*n%o*n%o,c=mt(a,bh,o)*a%o,u=mt(c,Eb,o)*n%o,d=mt(u,Ab,o)*u%o,p=mt(d,e,o)*d%o,w=mt(p,t,o)*p%o,h=mt(w,r,o)*w%o,b=mt(h,i,o)*h%o,S=mt(b,i,o)*h%o,A=mt(S,e,o)*d%o;return{pow_p_5_8:mt(A,bh,o)*n%o,b2:a}}function kb(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const vh=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Ib(n,e){const t=Vd,r=Ht(e*e*e,t),i=Ht(r*r*e,t),o=Sb(n*i).pow_p_5_8;let s=Ht(n*r*o,t);const a=Ht(e*s*s,t),c=s,u=Ht(s*vh,t),d=a===n,p=a===Ht(-n,t),w=a===Ht(-n*vh,t);return d&&(s=c),(p||w)&&(s=u),ab(s,t)&&(s=Ht(-s,t)),{isValid:d||p,value:s}}const Tb=Yi(dg.p,{isLE:!0}),Nb={...dg,Fp:Tb,hash:Q1,adjustScalarBytes:kb,uvRatio:Ib},Xo=vb(Nb);var qd={exports:{}};const Ob={},Cb=Object.freeze(Object.defineProperty({__proto__:null,default:Ob},Symbol.toStringTag,{value:"Module"})),xb=Mc(Cb);qd.exports;(function(n){(function(e,t){function r(v,l){if(!v)throw new Error(l||"Assertion failed")}function i(v,l){v.super_=l;var f=function(){};f.prototype=l.prototype,v.prototype=new f,v.prototype.constructor=v}function o(v,l,f){if(o.isBN(v))return v;this.negative=0,this.words=null,this.length=0,this.red=null,v!==null&&((l==="le"||l==="be")&&(f=l,l=10),this._init(v||0,l||10,f||"be"))}typeof e=="object"?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=xb.Buffer}catch{}o.isBN=function(l){return l instanceof o?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===o.wordSize&&Array.isArray(l.words)},o.max=function(l,f){return l.cmp(f)>0?l:f},o.min=function(l,f){return l.cmp(f)<0?l:f},o.prototype._init=function(l,f,_){if(typeof l=="number")return this._initNumber(l,f,_);if(typeof l=="object")return this._initArray(l,f,_);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),l=l.toString().replace(/\s+/g,"");var E=0;l[0]==="-"&&(E++,this.negative=1),E<l.length&&(f===16?this._parseHex(l,E,_):(this._parseBase(l,f,E),_==="le"&&this._initArray(this.toArray(),f,_)))},o.prototype._initNumber=function(l,f,_){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(r(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),f,_)},o.prototype._initArray=function(l,f,_){if(r(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var N,C,P=0;if(_==="be")for(E=l.length-1,N=0;E>=0;E-=3)C=l[E]|l[E-1]<<8|l[E-2]<<16,this.words[N]|=C<<P&67108863,this.words[N+1]=C>>>26-P&67108863,P+=24,P>=26&&(P-=26,N++);else if(_==="le")for(E=0,N=0;E<l.length;E+=3)C=l[E]|l[E+1]<<8|l[E+2]<<16,this.words[N]|=C<<P&67108863,this.words[N+1]=C>>>26-P&67108863,P+=24,P>=26&&(P-=26,N++);return this._strip()};function a(v,l){var f=v.charCodeAt(l);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;r(!1,"Invalid character in "+v)}function c(v,l,f){var _=a(v,f);return f-1>=l&&(_|=a(v,f-1)<<4),_}o.prototype._parseHex=function(l,f,_){this.length=Math.ceil((l.length-f)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var N=0,C=0,P;if(_==="be")for(E=l.length-1;E>=f;E-=2)P=c(l,f,E)<<N,this.words[C]|=P&67108863,N>=18?(N-=18,C+=1,this.words[C]|=P>>>26):N+=8;else{var T=l.length-f;for(E=T%2===0?f+1:f;E<l.length;E+=2)P=c(l,f,E)<<N,this.words[C]|=P&67108863,N>=18?(N-=18,C+=1,this.words[C]|=P>>>26):N+=8}this._strip()};function u(v,l,f,_){for(var E=0,N=0,C=Math.min(v.length,f),P=l;P<C;P++){var T=v.charCodeAt(P)-48;E*=_,T>=49?N=T-49+10:T>=17?N=T-17+10:N=T,r(T>=0&&N<_,"Invalid character"),E+=N}return E}o.prototype._parseBase=function(l,f,_){this.words=[0],this.length=1;for(var E=0,N=1;N<=67108863;N*=f)E++;E--,N=N/f|0;for(var C=l.length-_,P=C%E,T=Math.min(C,C-P)+_,m=0,M=_;M<T;M+=E)m=u(l,M,M+E,f),this.imuln(N),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(P!==0){var oe=1;for(m=u(l,M,l.length,f),M=0;M<P;M++)oe*=f;this.imuln(oe),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}this._strip()},o.prototype.copy=function(l){l.words=new Array(this.length);for(var f=0;f<this.length;f++)l.words[f]=this.words[f];l.length=this.length,l.negative=this.negative,l.red=this.red};function d(v,l){v.words=l.words,v.length=l.length,v.negative=l.negative,v.red=l.red}if(o.prototype._move=function(l){d(l,this)},o.prototype.clone=function(){var l=new o(null);return this.copy(l),l},o.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{o.prototype.inspect=p}else o.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(l,f){l=l||10,f=f|0||1;var _;if(l===16||l==="hex"){_="";for(var E=0,N=0,C=0;C<this.length;C++){var P=this.words[C],T=((P<<E|N)&16777215).toString(16);N=P>>>24-E&16777215,E+=2,E>=26&&(E-=26,C--),N!==0||C!==this.length-1?_=w[6-T.length]+T+_:_=T+_}for(N!==0&&(_=N.toString(16)+_);_.length%f!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(l===(l|0)&&l>=2&&l<=36){var m=h[l],M=b[l];_="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var ne=oe.modrn(M).toString(l);oe=oe.idivn(M),oe.isZero()?_=ne+_:_=w[m-ne.length]+ne+_}for(this.isZero()&&(_="0"+_);_.length%f!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(l,f){return this.toArrayLike(s,l,f)}),o.prototype.toArray=function(l,f){return this.toArrayLike(Array,l,f)};var S=function(l,f){return l.allocUnsafe?l.allocUnsafe(f):new l(f)};o.prototype.toArrayLike=function(l,f,_){this._strip();var E=this.byteLength(),N=_||Math.max(1,E);r(E<=N,"byte array longer than desired length"),r(N>0,"Requested array length <= 0");var C=S(l,N),P=f==="le"?"LE":"BE";return this["_toArrayLike"+P](C,E),C},o.prototype._toArrayLikeLE=function(l,f){for(var _=0,E=0,N=0,C=0;N<this.length;N++){var P=this.words[N]<<C|E;l[_++]=P&255,_<l.length&&(l[_++]=P>>8&255),_<l.length&&(l[_++]=P>>16&255),C===6?(_<l.length&&(l[_++]=P>>24&255),E=0,C=0):(E=P>>>24,C+=2)}if(_<l.length)for(l[_++]=E;_<l.length;)l[_++]=0},o.prototype._toArrayLikeBE=function(l,f){for(var _=l.length-1,E=0,N=0,C=0;N<this.length;N++){var P=this.words[N]<<C|E;l[_--]=P&255,_>=0&&(l[_--]=P>>8&255),_>=0&&(l[_--]=P>>16&255),C===6?(_>=0&&(l[_--]=P>>24&255),E=0,C=0):(E=P>>>24,C+=2)}if(_>=0)for(l[_--]=E;_>=0;)l[_--]=0},Math.clz32?o.prototype._countBits=function(l){return 32-Math.clz32(l)}:o.prototype._countBits=function(l){var f=l,_=0;return f>=4096&&(_+=13,f>>>=13),f>=64&&(_+=7,f>>>=7),f>=8&&(_+=4,f>>>=4),f>=2&&(_+=2,f>>>=2),_+f},o.prototype._zeroBits=function(l){if(l===0)return 26;var f=l,_=0;return f&8191||(_+=13,f>>>=13),f&127||(_+=7,f>>>=7),f&15||(_+=4,f>>>=4),f&3||(_+=2,f>>>=2),f&1||_++,_},o.prototype.bitLength=function(){var l=this.words[this.length-1],f=this._countBits(l);return(this.length-1)*26+f};function A(v){for(var l=new Array(v.bitLength()),f=0;f<l.length;f++){var _=f/26|0,E=f%26;l[f]=v.words[_]>>>E&1}return l}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,f=0;f<this.length;f++){var _=this._zeroBits(this.words[f]);if(l+=_,_!==26)break}return l},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},o.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var f=0;f<l.length;f++)this.words[f]=this.words[f]|l.words[f];return this._strip()},o.prototype.ior=function(l){return r((this.negative|l.negative)===0),this.iuor(l)},o.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},o.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},o.prototype.iuand=function(l){var f;this.length>l.length?f=l:f=this;for(var _=0;_<f.length;_++)this.words[_]=this.words[_]&l.words[_];return this.length=f.length,this._strip()},o.prototype.iand=function(l){return r((this.negative|l.negative)===0),this.iuand(l)},o.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},o.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},o.prototype.iuxor=function(l){var f,_;this.length>l.length?(f=this,_=l):(f=l,_=this);for(var E=0;E<_.length;E++)this.words[E]=f.words[E]^_.words[E];if(this!==f)for(;E<f.length;E++)this.words[E]=f.words[E];return this.length=f.length,this._strip()},o.prototype.ixor=function(l){return r((this.negative|l.negative)===0),this.iuxor(l)},o.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},o.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},o.prototype.inotn=function(l){r(typeof l=="number"&&l>=0);var f=Math.ceil(l/26)|0,_=l%26;this._expand(f),_>0&&f--;for(var E=0;E<f;E++)this.words[E]=~this.words[E]&67108863;return _>0&&(this.words[E]=~this.words[E]&67108863>>26-_),this._strip()},o.prototype.notn=function(l){return this.clone().inotn(l)},o.prototype.setn=function(l,f){r(typeof l=="number"&&l>=0);var _=l/26|0,E=l%26;return this._expand(_+1),f?this.words[_]=this.words[_]|1<<E:this.words[_]=this.words[_]&~(1<<E),this._strip()},o.prototype.iadd=function(l){var f;if(this.negative!==0&&l.negative===0)return this.negative=0,f=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,f=this.isub(l),l.negative=1,f._normSign();var _,E;this.length>l.length?(_=this,E=l):(_=l,E=this);for(var N=0,C=0;C<E.length;C++)f=(_.words[C]|0)+(E.words[C]|0)+N,this.words[C]=f&67108863,N=f>>>26;for(;N!==0&&C<_.length;C++)f=(_.words[C]|0)+N,this.words[C]=f&67108863,N=f>>>26;if(this.length=_.length,N!==0)this.words[this.length]=N,this.length++;else if(_!==this)for(;C<_.length;C++)this.words[C]=_.words[C];return this},o.prototype.add=function(l){var f;return l.negative!==0&&this.negative===0?(l.negative=0,f=this.sub(l),l.negative^=1,f):l.negative===0&&this.negative!==0?(this.negative=0,f=l.sub(this),this.negative=1,f):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},o.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var f=this.iadd(l);return l.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var _=this.cmp(l);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,N;_>0?(E=this,N=l):(E=l,N=this);for(var C=0,P=0;P<N.length;P++)f=(E.words[P]|0)-(N.words[P]|0)+C,C=f>>26,this.words[P]=f&67108863;for(;C!==0&&P<E.length;P++)f=(E.words[P]|0)+C,C=f>>26,this.words[P]=f&67108863;if(C===0&&P<E.length&&E!==this)for(;P<E.length;P++)this.words[P]=E.words[P];return this.length=Math.max(this.length,P),E!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(l){return this.clone().isub(l)};function I(v,l,f){f.negative=l.negative^v.negative;var _=v.length+l.length|0;f.length=_,_=_-1|0;var E=v.words[0]|0,N=l.words[0]|0,C=E*N,P=C&67108863,T=C/67108864|0;f.words[0]=P;for(var m=1;m<_;m++){for(var M=T>>>26,oe=T&67108863,ne=Math.min(m,l.length-1),ue=Math.max(0,m-v.length+1);ue<=ne;ue++){var Ie=m-ue|0;E=v.words[Ie]|0,N=l.words[ue]|0,C=E*N+oe,M+=C/67108864|0,oe=C&67108863}f.words[m]=oe|0,T=M|0}return T!==0?f.words[m]=T|0:f.length--,f._strip()}var x=function(l,f,_){var E=l.words,N=f.words,C=_.words,P=0,T,m,M,oe=E[0]|0,ne=oe&8191,ue=oe>>>13,Ie=E[1]|0,we=Ie&8191,ye=Ie>>>13,dt=E[2]|0,ze=dt&8191,He=dt>>>13,zn=E[3]|0,Ke=zn&8191,ft=zn>>>13,ga=E[4]|0,Je=ga&8191,ht=ga>>>13,ma=E[5]|0,it=ma&8191,je=ma>>>13,Tn=E[6]|0,Qe=Tn&8191,pt=Tn>>>13,jn=E[7]|0,gt=jn&8191,R=jn>>>13,g=E[8]|0,y=g&8191,O=g>>>13,U=E[9]|0,z=U&8191,Z=U>>>13,Re=N[0]|0,ve=Re&8191,be=Re>>>13,Ye=N[1]|0,_e=Ye&8191,Et=Ye>>>13,$f=N[2]|0,At=$f&8191,Rt=$f>>>13,Vf=N[3]|0,St=Vf&8191,kt=Vf>>>13,qf=N[4]|0,It=qf&8191,Tt=qf>>>13,Gf=N[5]|0,Nt=Gf&8191,Ot=Gf>>>13,jf=N[6]|0,Ct=jf&8191,xt=jf>>>13,Yf=N[7]|0,Bt=Yf&8191,Mt=Yf>>>13,Zf=N[8]|0,Pt=Zf&8191,Lt=Zf>>>13,Xf=N[9]|0,Ut=Xf&8191,Dt=Xf>>>13;_.negative=l.negative^f.negative,_.length=19,T=Math.imul(ne,ve),m=Math.imul(ne,be),m=m+Math.imul(ue,ve)|0,M=Math.imul(ue,be);var mu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(mu>>>26)|0,mu&=67108863,T=Math.imul(we,ve),m=Math.imul(we,be),m=m+Math.imul(ye,ve)|0,M=Math.imul(ye,be),T=T+Math.imul(ne,_e)|0,m=m+Math.imul(ne,Et)|0,m=m+Math.imul(ue,_e)|0,M=M+Math.imul(ue,Et)|0;var yu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(yu>>>26)|0,yu&=67108863,T=Math.imul(ze,ve),m=Math.imul(ze,be),m=m+Math.imul(He,ve)|0,M=Math.imul(He,be),T=T+Math.imul(we,_e)|0,m=m+Math.imul(we,Et)|0,m=m+Math.imul(ye,_e)|0,M=M+Math.imul(ye,Et)|0,T=T+Math.imul(ne,At)|0,m=m+Math.imul(ne,Rt)|0,m=m+Math.imul(ue,At)|0,M=M+Math.imul(ue,Rt)|0;var _u=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(_u>>>26)|0,_u&=67108863,T=Math.imul(Ke,ve),m=Math.imul(Ke,be),m=m+Math.imul(ft,ve)|0,M=Math.imul(ft,be),T=T+Math.imul(ze,_e)|0,m=m+Math.imul(ze,Et)|0,m=m+Math.imul(He,_e)|0,M=M+Math.imul(He,Et)|0,T=T+Math.imul(we,At)|0,m=m+Math.imul(we,Rt)|0,m=m+Math.imul(ye,At)|0,M=M+Math.imul(ye,Rt)|0,T=T+Math.imul(ne,St)|0,m=m+Math.imul(ne,kt)|0,m=m+Math.imul(ue,St)|0,M=M+Math.imul(ue,kt)|0;var wu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(wu>>>26)|0,wu&=67108863,T=Math.imul(Je,ve),m=Math.imul(Je,be),m=m+Math.imul(ht,ve)|0,M=Math.imul(ht,be),T=T+Math.imul(Ke,_e)|0,m=m+Math.imul(Ke,Et)|0,m=m+Math.imul(ft,_e)|0,M=M+Math.imul(ft,Et)|0,T=T+Math.imul(ze,At)|0,m=m+Math.imul(ze,Rt)|0,m=m+Math.imul(He,At)|0,M=M+Math.imul(He,Rt)|0,T=T+Math.imul(we,St)|0,m=m+Math.imul(we,kt)|0,m=m+Math.imul(ye,St)|0,M=M+Math.imul(ye,kt)|0,T=T+Math.imul(ne,It)|0,m=m+Math.imul(ne,Tt)|0,m=m+Math.imul(ue,It)|0,M=M+Math.imul(ue,Tt)|0;var bu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(bu>>>26)|0,bu&=67108863,T=Math.imul(it,ve),m=Math.imul(it,be),m=m+Math.imul(je,ve)|0,M=Math.imul(je,be),T=T+Math.imul(Je,_e)|0,m=m+Math.imul(Je,Et)|0,m=m+Math.imul(ht,_e)|0,M=M+Math.imul(ht,Et)|0,T=T+Math.imul(Ke,At)|0,m=m+Math.imul(Ke,Rt)|0,m=m+Math.imul(ft,At)|0,M=M+Math.imul(ft,Rt)|0,T=T+Math.imul(ze,St)|0,m=m+Math.imul(ze,kt)|0,m=m+Math.imul(He,St)|0,M=M+Math.imul(He,kt)|0,T=T+Math.imul(we,It)|0,m=m+Math.imul(we,Tt)|0,m=m+Math.imul(ye,It)|0,M=M+Math.imul(ye,Tt)|0,T=T+Math.imul(ne,Nt)|0,m=m+Math.imul(ne,Ot)|0,m=m+Math.imul(ue,Nt)|0,M=M+Math.imul(ue,Ot)|0;var vu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(vu>>>26)|0,vu&=67108863,T=Math.imul(Qe,ve),m=Math.imul(Qe,be),m=m+Math.imul(pt,ve)|0,M=Math.imul(pt,be),T=T+Math.imul(it,_e)|0,m=m+Math.imul(it,Et)|0,m=m+Math.imul(je,_e)|0,M=M+Math.imul(je,Et)|0,T=T+Math.imul(Je,At)|0,m=m+Math.imul(Je,Rt)|0,m=m+Math.imul(ht,At)|0,M=M+Math.imul(ht,Rt)|0,T=T+Math.imul(Ke,St)|0,m=m+Math.imul(Ke,kt)|0,m=m+Math.imul(ft,St)|0,M=M+Math.imul(ft,kt)|0,T=T+Math.imul(ze,It)|0,m=m+Math.imul(ze,Tt)|0,m=m+Math.imul(He,It)|0,M=M+Math.imul(He,Tt)|0,T=T+Math.imul(we,Nt)|0,m=m+Math.imul(we,Ot)|0,m=m+Math.imul(ye,Nt)|0,M=M+Math.imul(ye,Ot)|0,T=T+Math.imul(ne,Ct)|0,m=m+Math.imul(ne,xt)|0,m=m+Math.imul(ue,Ct)|0,M=M+Math.imul(ue,xt)|0;var Eu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Eu>>>26)|0,Eu&=67108863,T=Math.imul(gt,ve),m=Math.imul(gt,be),m=m+Math.imul(R,ve)|0,M=Math.imul(R,be),T=T+Math.imul(Qe,_e)|0,m=m+Math.imul(Qe,Et)|0,m=m+Math.imul(pt,_e)|0,M=M+Math.imul(pt,Et)|0,T=T+Math.imul(it,At)|0,m=m+Math.imul(it,Rt)|0,m=m+Math.imul(je,At)|0,M=M+Math.imul(je,Rt)|0,T=T+Math.imul(Je,St)|0,m=m+Math.imul(Je,kt)|0,m=m+Math.imul(ht,St)|0,M=M+Math.imul(ht,kt)|0,T=T+Math.imul(Ke,It)|0,m=m+Math.imul(Ke,Tt)|0,m=m+Math.imul(ft,It)|0,M=M+Math.imul(ft,Tt)|0,T=T+Math.imul(ze,Nt)|0,m=m+Math.imul(ze,Ot)|0,m=m+Math.imul(He,Nt)|0,M=M+Math.imul(He,Ot)|0,T=T+Math.imul(we,Ct)|0,m=m+Math.imul(we,xt)|0,m=m+Math.imul(ye,Ct)|0,M=M+Math.imul(ye,xt)|0,T=T+Math.imul(ne,Bt)|0,m=m+Math.imul(ne,Mt)|0,m=m+Math.imul(ue,Bt)|0,M=M+Math.imul(ue,Mt)|0;var Au=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Au>>>26)|0,Au&=67108863,T=Math.imul(y,ve),m=Math.imul(y,be),m=m+Math.imul(O,ve)|0,M=Math.imul(O,be),T=T+Math.imul(gt,_e)|0,m=m+Math.imul(gt,Et)|0,m=m+Math.imul(R,_e)|0,M=M+Math.imul(R,Et)|0,T=T+Math.imul(Qe,At)|0,m=m+Math.imul(Qe,Rt)|0,m=m+Math.imul(pt,At)|0,M=M+Math.imul(pt,Rt)|0,T=T+Math.imul(it,St)|0,m=m+Math.imul(it,kt)|0,m=m+Math.imul(je,St)|0,M=M+Math.imul(je,kt)|0,T=T+Math.imul(Je,It)|0,m=m+Math.imul(Je,Tt)|0,m=m+Math.imul(ht,It)|0,M=M+Math.imul(ht,Tt)|0,T=T+Math.imul(Ke,Nt)|0,m=m+Math.imul(Ke,Ot)|0,m=m+Math.imul(ft,Nt)|0,M=M+Math.imul(ft,Ot)|0,T=T+Math.imul(ze,Ct)|0,m=m+Math.imul(ze,xt)|0,m=m+Math.imul(He,Ct)|0,M=M+Math.imul(He,xt)|0,T=T+Math.imul(we,Bt)|0,m=m+Math.imul(we,Mt)|0,m=m+Math.imul(ye,Bt)|0,M=M+Math.imul(ye,Mt)|0,T=T+Math.imul(ne,Pt)|0,m=m+Math.imul(ne,Lt)|0,m=m+Math.imul(ue,Pt)|0,M=M+Math.imul(ue,Lt)|0;var Ru=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Ru>>>26)|0,Ru&=67108863,T=Math.imul(z,ve),m=Math.imul(z,be),m=m+Math.imul(Z,ve)|0,M=Math.imul(Z,be),T=T+Math.imul(y,_e)|0,m=m+Math.imul(y,Et)|0,m=m+Math.imul(O,_e)|0,M=M+Math.imul(O,Et)|0,T=T+Math.imul(gt,At)|0,m=m+Math.imul(gt,Rt)|0,m=m+Math.imul(R,At)|0,M=M+Math.imul(R,Rt)|0,T=T+Math.imul(Qe,St)|0,m=m+Math.imul(Qe,kt)|0,m=m+Math.imul(pt,St)|0,M=M+Math.imul(pt,kt)|0,T=T+Math.imul(it,It)|0,m=m+Math.imul(it,Tt)|0,m=m+Math.imul(je,It)|0,M=M+Math.imul(je,Tt)|0,T=T+Math.imul(Je,Nt)|0,m=m+Math.imul(Je,Ot)|0,m=m+Math.imul(ht,Nt)|0,M=M+Math.imul(ht,Ot)|0,T=T+Math.imul(Ke,Ct)|0,m=m+Math.imul(Ke,xt)|0,m=m+Math.imul(ft,Ct)|0,M=M+Math.imul(ft,xt)|0,T=T+Math.imul(ze,Bt)|0,m=m+Math.imul(ze,Mt)|0,m=m+Math.imul(He,Bt)|0,M=M+Math.imul(He,Mt)|0,T=T+Math.imul(we,Pt)|0,m=m+Math.imul(we,Lt)|0,m=m+Math.imul(ye,Pt)|0,M=M+Math.imul(ye,Lt)|0,T=T+Math.imul(ne,Ut)|0,m=m+Math.imul(ne,Dt)|0,m=m+Math.imul(ue,Ut)|0,M=M+Math.imul(ue,Dt)|0;var Su=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Su>>>26)|0,Su&=67108863,T=Math.imul(z,_e),m=Math.imul(z,Et),m=m+Math.imul(Z,_e)|0,M=Math.imul(Z,Et),T=T+Math.imul(y,At)|0,m=m+Math.imul(y,Rt)|0,m=m+Math.imul(O,At)|0,M=M+Math.imul(O,Rt)|0,T=T+Math.imul(gt,St)|0,m=m+Math.imul(gt,kt)|0,m=m+Math.imul(R,St)|0,M=M+Math.imul(R,kt)|0,T=T+Math.imul(Qe,It)|0,m=m+Math.imul(Qe,Tt)|0,m=m+Math.imul(pt,It)|0,M=M+Math.imul(pt,Tt)|0,T=T+Math.imul(it,Nt)|0,m=m+Math.imul(it,Ot)|0,m=m+Math.imul(je,Nt)|0,M=M+Math.imul(je,Ot)|0,T=T+Math.imul(Je,Ct)|0,m=m+Math.imul(Je,xt)|0,m=m+Math.imul(ht,Ct)|0,M=M+Math.imul(ht,xt)|0,T=T+Math.imul(Ke,Bt)|0,m=m+Math.imul(Ke,Mt)|0,m=m+Math.imul(ft,Bt)|0,M=M+Math.imul(ft,Mt)|0,T=T+Math.imul(ze,Pt)|0,m=m+Math.imul(ze,Lt)|0,m=m+Math.imul(He,Pt)|0,M=M+Math.imul(He,Lt)|0,T=T+Math.imul(we,Ut)|0,m=m+Math.imul(we,Dt)|0,m=m+Math.imul(ye,Ut)|0,M=M+Math.imul(ye,Dt)|0;var ku=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(ku>>>26)|0,ku&=67108863,T=Math.imul(z,At),m=Math.imul(z,Rt),m=m+Math.imul(Z,At)|0,M=Math.imul(Z,Rt),T=T+Math.imul(y,St)|0,m=m+Math.imul(y,kt)|0,m=m+Math.imul(O,St)|0,M=M+Math.imul(O,kt)|0,T=T+Math.imul(gt,It)|0,m=m+Math.imul(gt,Tt)|0,m=m+Math.imul(R,It)|0,M=M+Math.imul(R,Tt)|0,T=T+Math.imul(Qe,Nt)|0,m=m+Math.imul(Qe,Ot)|0,m=m+Math.imul(pt,Nt)|0,M=M+Math.imul(pt,Ot)|0,T=T+Math.imul(it,Ct)|0,m=m+Math.imul(it,xt)|0,m=m+Math.imul(je,Ct)|0,M=M+Math.imul(je,xt)|0,T=T+Math.imul(Je,Bt)|0,m=m+Math.imul(Je,Mt)|0,m=m+Math.imul(ht,Bt)|0,M=M+Math.imul(ht,Mt)|0,T=T+Math.imul(Ke,Pt)|0,m=m+Math.imul(Ke,Lt)|0,m=m+Math.imul(ft,Pt)|0,M=M+Math.imul(ft,Lt)|0,T=T+Math.imul(ze,Ut)|0,m=m+Math.imul(ze,Dt)|0,m=m+Math.imul(He,Ut)|0,M=M+Math.imul(He,Dt)|0;var Iu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Iu>>>26)|0,Iu&=67108863,T=Math.imul(z,St),m=Math.imul(z,kt),m=m+Math.imul(Z,St)|0,M=Math.imul(Z,kt),T=T+Math.imul(y,It)|0,m=m+Math.imul(y,Tt)|0,m=m+Math.imul(O,It)|0,M=M+Math.imul(O,Tt)|0,T=T+Math.imul(gt,Nt)|0,m=m+Math.imul(gt,Ot)|0,m=m+Math.imul(R,Nt)|0,M=M+Math.imul(R,Ot)|0,T=T+Math.imul(Qe,Ct)|0,m=m+Math.imul(Qe,xt)|0,m=m+Math.imul(pt,Ct)|0,M=M+Math.imul(pt,xt)|0,T=T+Math.imul(it,Bt)|0,m=m+Math.imul(it,Mt)|0,m=m+Math.imul(je,Bt)|0,M=M+Math.imul(je,Mt)|0,T=T+Math.imul(Je,Pt)|0,m=m+Math.imul(Je,Lt)|0,m=m+Math.imul(ht,Pt)|0,M=M+Math.imul(ht,Lt)|0,T=T+Math.imul(Ke,Ut)|0,m=m+Math.imul(Ke,Dt)|0,m=m+Math.imul(ft,Ut)|0,M=M+Math.imul(ft,Dt)|0;var Tu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Tu>>>26)|0,Tu&=67108863,T=Math.imul(z,It),m=Math.imul(z,Tt),m=m+Math.imul(Z,It)|0,M=Math.imul(Z,Tt),T=T+Math.imul(y,Nt)|0,m=m+Math.imul(y,Ot)|0,m=m+Math.imul(O,Nt)|0,M=M+Math.imul(O,Ot)|0,T=T+Math.imul(gt,Ct)|0,m=m+Math.imul(gt,xt)|0,m=m+Math.imul(R,Ct)|0,M=M+Math.imul(R,xt)|0,T=T+Math.imul(Qe,Bt)|0,m=m+Math.imul(Qe,Mt)|0,m=m+Math.imul(pt,Bt)|0,M=M+Math.imul(pt,Mt)|0,T=T+Math.imul(it,Pt)|0,m=m+Math.imul(it,Lt)|0,m=m+Math.imul(je,Pt)|0,M=M+Math.imul(je,Lt)|0,T=T+Math.imul(Je,Ut)|0,m=m+Math.imul(Je,Dt)|0,m=m+Math.imul(ht,Ut)|0,M=M+Math.imul(ht,Dt)|0;var Nu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Nu>>>26)|0,Nu&=67108863,T=Math.imul(z,Nt),m=Math.imul(z,Ot),m=m+Math.imul(Z,Nt)|0,M=Math.imul(Z,Ot),T=T+Math.imul(y,Ct)|0,m=m+Math.imul(y,xt)|0,m=m+Math.imul(O,Ct)|0,M=M+Math.imul(O,xt)|0,T=T+Math.imul(gt,Bt)|0,m=m+Math.imul(gt,Mt)|0,m=m+Math.imul(R,Bt)|0,M=M+Math.imul(R,Mt)|0,T=T+Math.imul(Qe,Pt)|0,m=m+Math.imul(Qe,Lt)|0,m=m+Math.imul(pt,Pt)|0,M=M+Math.imul(pt,Lt)|0,T=T+Math.imul(it,Ut)|0,m=m+Math.imul(it,Dt)|0,m=m+Math.imul(je,Ut)|0,M=M+Math.imul(je,Dt)|0;var Ou=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Ou>>>26)|0,Ou&=67108863,T=Math.imul(z,Ct),m=Math.imul(z,xt),m=m+Math.imul(Z,Ct)|0,M=Math.imul(Z,xt),T=T+Math.imul(y,Bt)|0,m=m+Math.imul(y,Mt)|0,m=m+Math.imul(O,Bt)|0,M=M+Math.imul(O,Mt)|0,T=T+Math.imul(gt,Pt)|0,m=m+Math.imul(gt,Lt)|0,m=m+Math.imul(R,Pt)|0,M=M+Math.imul(R,Lt)|0,T=T+Math.imul(Qe,Ut)|0,m=m+Math.imul(Qe,Dt)|0,m=m+Math.imul(pt,Ut)|0,M=M+Math.imul(pt,Dt)|0;var Cu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Cu>>>26)|0,Cu&=67108863,T=Math.imul(z,Bt),m=Math.imul(z,Mt),m=m+Math.imul(Z,Bt)|0,M=Math.imul(Z,Mt),T=T+Math.imul(y,Pt)|0,m=m+Math.imul(y,Lt)|0,m=m+Math.imul(O,Pt)|0,M=M+Math.imul(O,Lt)|0,T=T+Math.imul(gt,Ut)|0,m=m+Math.imul(gt,Dt)|0,m=m+Math.imul(R,Ut)|0,M=M+Math.imul(R,Dt)|0;var xu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(xu>>>26)|0,xu&=67108863,T=Math.imul(z,Pt),m=Math.imul(z,Lt),m=m+Math.imul(Z,Pt)|0,M=Math.imul(Z,Lt),T=T+Math.imul(y,Ut)|0,m=m+Math.imul(y,Dt)|0,m=m+Math.imul(O,Ut)|0,M=M+Math.imul(O,Dt)|0;var Bu=(P+T|0)+((m&8191)<<13)|0;P=(M+(m>>>13)|0)+(Bu>>>26)|0,Bu&=67108863,T=Math.imul(z,Ut),m=Math.imul(z,Dt),m=m+Math.imul(Z,Ut)|0,M=Math.imul(Z,Dt);var Mu=(P+T|0)+((m&8191)<<13)|0;return P=(M+(m>>>13)|0)+(Mu>>>26)|0,Mu&=67108863,C[0]=mu,C[1]=yu,C[2]=_u,C[3]=wu,C[4]=bu,C[5]=vu,C[6]=Eu,C[7]=Au,C[8]=Ru,C[9]=Su,C[10]=ku,C[11]=Iu,C[12]=Tu,C[13]=Nu,C[14]=Ou,C[15]=Cu,C[16]=xu,C[17]=Bu,C[18]=Mu,P!==0&&(C[19]=P,_.length++),_};Math.imul||(x=I);function k(v,l,f){f.negative=l.negative^v.negative,f.length=v.length+l.length;for(var _=0,E=0,N=0;N<f.length-1;N++){var C=E;E=0;for(var P=_&67108863,T=Math.min(N,l.length-1),m=Math.max(0,N-v.length+1);m<=T;m++){var M=N-m,oe=v.words[M]|0,ne=l.words[m]|0,ue=oe*ne,Ie=ue&67108863;C=C+(ue/67108864|0)|0,Ie=Ie+P|0,P=Ie&67108863,C=C+(Ie>>>26)|0,E+=C>>>26,C&=67108863}f.words[N]=P,_=C,C=E}return _!==0?f.words[N]=_:f.length--,f._strip()}function B(v,l,f){return k(v,l,f)}o.prototype.mulTo=function(l,f){var _,E=this.length+l.length;return this.length===10&&l.length===10?_=x(this,l,f):E<63?_=I(this,l,f):E<1024?_=k(this,l,f):_=B(this,l,f),_},o.prototype.mul=function(l){var f=new o(null);return f.words=new Array(this.length+l.length),this.mulTo(l,f)},o.prototype.mulf=function(l){var f=new o(null);return f.words=new Array(this.length+l.length),B(this,l,f)},o.prototype.imul=function(l){return this.clone().mulTo(l,this)},o.prototype.imuln=function(l){var f=l<0;f&&(l=-l),r(typeof l=="number"),r(l<67108864);for(var _=0,E=0;E<this.length;E++){var N=(this.words[E]|0)*l,C=(N&67108863)+(_&67108863);_>>=26,_+=N/67108864|0,_+=C>>>26,this.words[E]=C&67108863}return _!==0&&(this.words[E]=_,this.length++),this.length=l===0?1:this.length,f?this.ineg():this},o.prototype.muln=function(l){return this.clone().imuln(l)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(l){var f=A(l);if(f.length===0)return new o(1);for(var _=this,E=0;E<f.length&&f[E]===0;E++,_=_.sqr());if(++E<f.length)for(var N=_.sqr();E<f.length;E++,N=N.sqr())f[E]!==0&&(_=_.mul(N));return _},o.prototype.iushln=function(l){r(typeof l=="number"&&l>=0);var f=l%26,_=(l-f)/26,E=67108863>>>26-f<<26-f,N;if(f!==0){var C=0;for(N=0;N<this.length;N++){var P=this.words[N]&E,T=(this.words[N]|0)-P<<f;this.words[N]=T|C,C=P>>>26-f}C&&(this.words[N]=C,this.length++)}if(_!==0){for(N=this.length-1;N>=0;N--)this.words[N+_]=this.words[N];for(N=0;N<_;N++)this.words[N]=0;this.length+=_}return this._strip()},o.prototype.ishln=function(l){return r(this.negative===0),this.iushln(l)},o.prototype.iushrn=function(l,f,_){r(typeof l=="number"&&l>=0);var E;f?E=(f-f%26)/26:E=0;var N=l%26,C=Math.min((l-N)/26,this.length),P=67108863^67108863>>>N<<N,T=_;if(E-=C,E=Math.max(0,E),T){for(var m=0;m<C;m++)T.words[m]=this.words[m];T.length=C}if(C!==0)if(this.length>C)for(this.length-=C,m=0;m<this.length;m++)this.words[m]=this.words[m+C];else this.words[0]=0,this.length=1;var M=0;for(m=this.length-1;m>=0&&(M!==0||m>=E);m--){var oe=this.words[m]|0;this.words[m]=M<<26-N|oe>>>N,M=oe&P}return T&&M!==0&&(T.words[T.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(l,f,_){return r(this.negative===0),this.iushrn(l,f,_)},o.prototype.shln=function(l){return this.clone().ishln(l)},o.prototype.ushln=function(l){return this.clone().iushln(l)},o.prototype.shrn=function(l){return this.clone().ishrn(l)},o.prototype.ushrn=function(l){return this.clone().iushrn(l)},o.prototype.testn=function(l){r(typeof l=="number"&&l>=0);var f=l%26,_=(l-f)/26,E=1<<f;if(this.length<=_)return!1;var N=this.words[_];return!!(N&E)},o.prototype.imaskn=function(l){r(typeof l=="number"&&l>=0);var f=l%26,_=(l-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(f!==0&&_++,this.length=Math.min(_,this.length),f!==0){var E=67108863^67108863>>>f<<f;this.words[this.length-1]&=E}return this._strip()},o.prototype.maskn=function(l){return this.clone().imaskn(l)},o.prototype.iaddn=function(l){return r(typeof l=="number"),r(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<=l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},o.prototype._iaddn=function(l){this.words[0]+=l;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},o.prototype.isubn=function(l){if(r(typeof l=="number"),r(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},o.prototype.addn=function(l){return this.clone().iaddn(l)},o.prototype.subn=function(l){return this.clone().isubn(l)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(l,f,_){var E=l.length+_,N;this._expand(E);var C,P=0;for(N=0;N<l.length;N++){C=(this.words[N+_]|0)+P;var T=(l.words[N]|0)*f;C-=T&67108863,P=(C>>26)-(T/67108864|0),this.words[N+_]=C&67108863}for(;N<this.length-_;N++)C=(this.words[N+_]|0)+P,P=C>>26,this.words[N+_]=C&67108863;if(P===0)return this._strip();for(r(P===-1),P=0,N=0;N<this.length;N++)C=-(this.words[N]|0)+P,P=C>>26,this.words[N]=C&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(l,f){var _=this.length-l.length,E=this.clone(),N=l,C=N.words[N.length-1]|0,P=this._countBits(C);_=26-P,_!==0&&(N=N.ushln(_),E.iushln(_),C=N.words[N.length-1]|0);var T=E.length-N.length,m;if(f!=="mod"){m=new o(null),m.length=T+1,m.words=new Array(m.length);for(var M=0;M<m.length;M++)m.words[M]=0}var oe=E.clone()._ishlnsubmul(N,1,T);oe.negative===0&&(E=oe,m&&(m.words[T]=1));for(var ne=T-1;ne>=0;ne--){var ue=(E.words[N.length+ne]|0)*67108864+(E.words[N.length+ne-1]|0);for(ue=Math.min(ue/C|0,67108863),E._ishlnsubmul(N,ue,ne);E.negative!==0;)ue--,E.negative=0,E._ishlnsubmul(N,1,ne),E.isZero()||(E.negative^=1);m&&(m.words[ne]=ue)}return m&&m._strip(),E._strip(),f!=="div"&&_!==0&&E.iushrn(_),{div:m||null,mod:E}},o.prototype.divmod=function(l,f,_){if(r(!l.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var E,N,C;return this.negative!==0&&l.negative===0?(C=this.neg().divmod(l,f),f!=="mod"&&(E=C.div.neg()),f!=="div"&&(N=C.mod.neg(),_&&N.negative!==0&&N.iadd(l)),{div:E,mod:N}):this.negative===0&&l.negative!==0?(C=this.divmod(l.neg(),f),f!=="mod"&&(E=C.div.neg()),{div:E,mod:C.mod}):this.negative&l.negative?(C=this.neg().divmod(l.neg(),f),f!=="div"&&(N=C.mod.neg(),_&&N.negative!==0&&N.isub(l)),{div:C.div,mod:N}):l.length>this.length||this.cmp(l)<0?{div:new o(0),mod:this}:l.length===1?f==="div"?{div:this.divn(l.words[0]),mod:null}:f==="mod"?{div:null,mod:new o(this.modrn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new o(this.modrn(l.words[0]))}:this._wordDiv(l,f)},o.prototype.div=function(l){return this.divmod(l,"div",!1).div},o.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},o.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},o.prototype.divRound=function(l){var f=this.divmod(l);if(f.mod.isZero())return f.div;var _=f.div.negative!==0?f.mod.isub(l):f.mod,E=l.ushrn(1),N=l.andln(1),C=_.cmp(E);return C<0||N===1&&C===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},o.prototype.modrn=function(l){var f=l<0;f&&(l=-l),r(l<=67108863);for(var _=(1<<26)%l,E=0,N=this.length-1;N>=0;N--)E=(_*E+(this.words[N]|0))%l;return f?-E:E},o.prototype.modn=function(l){return this.modrn(l)},o.prototype.idivn=function(l){var f=l<0;f&&(l=-l),r(l<=67108863);for(var _=0,E=this.length-1;E>=0;E--){var N=(this.words[E]|0)+_*67108864;this.words[E]=N/l|0,_=N%l}return this._strip(),f?this.ineg():this},o.prototype.divn=function(l){return this.clone().idivn(l)},o.prototype.egcd=function(l){r(l.negative===0),r(!l.isZero());var f=this,_=l.clone();f.negative!==0?f=f.umod(l):f=f.clone();for(var E=new o(1),N=new o(0),C=new o(0),P=new o(1),T=0;f.isEven()&&_.isEven();)f.iushrn(1),_.iushrn(1),++T;for(var m=_.clone(),M=f.clone();!f.isZero();){for(var oe=0,ne=1;!(f.words[0]&ne)&&oe<26;++oe,ne<<=1);if(oe>0)for(f.iushrn(oe);oe-- >0;)(E.isOdd()||N.isOdd())&&(E.iadd(m),N.isub(M)),E.iushrn(1),N.iushrn(1);for(var ue=0,Ie=1;!(_.words[0]&Ie)&&ue<26;++ue,Ie<<=1);if(ue>0)for(_.iushrn(ue);ue-- >0;)(C.isOdd()||P.isOdd())&&(C.iadd(m),P.isub(M)),C.iushrn(1),P.iushrn(1);f.cmp(_)>=0?(f.isub(_),E.isub(C),N.isub(P)):(_.isub(f),C.isub(E),P.isub(N))}return{a:C,b:P,gcd:_.iushln(T)}},o.prototype._invmp=function(l){r(l.negative===0),r(!l.isZero());var f=this,_=l.clone();f.negative!==0?f=f.umod(l):f=f.clone();for(var E=new o(1),N=new o(0),C=_.clone();f.cmpn(1)>0&&_.cmpn(1)>0;){for(var P=0,T=1;!(f.words[0]&T)&&P<26;++P,T<<=1);if(P>0)for(f.iushrn(P);P-- >0;)E.isOdd()&&E.iadd(C),E.iushrn(1);for(var m=0,M=1;!(_.words[0]&M)&&m<26;++m,M<<=1);if(m>0)for(_.iushrn(m);m-- >0;)N.isOdd()&&N.iadd(C),N.iushrn(1);f.cmp(_)>=0?(f.isub(_),E.isub(N)):(_.isub(f),N.isub(E))}var oe;return f.cmpn(1)===0?oe=E:oe=N,oe.cmpn(0)<0&&oe.iadd(l),oe},o.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var f=this.clone(),_=l.clone();f.negative=0,_.negative=0;for(var E=0;f.isEven()&&_.isEven();E++)f.iushrn(1),_.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;_.isEven();)_.iushrn(1);var N=f.cmp(_);if(N<0){var C=f;f=_,_=C}else if(N===0||_.cmpn(1)===0)break;f.isub(_)}while(!0);return _.iushln(E)},o.prototype.invm=function(l){return this.egcd(l).a.umod(l)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(l){return this.words[0]&l},o.prototype.bincn=function(l){r(typeof l=="number");var f=l%26,_=(l-f)/26,E=1<<f;if(this.length<=_)return this._expand(_+1),this.words[_]|=E,this;for(var N=E,C=_;N!==0&&C<this.length;C++){var P=this.words[C]|0;P+=N,N=P>>>26,P&=67108863,this.words[C]=P}return N!==0&&(this.words[C]=N,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(l){var f=l<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var _;if(this.length>1)_=1;else{f&&(l=-l),r(l<=67108863,"Number is too big");var E=this.words[0]|0;_=E===l?0:E<l?-1:1}return this.negative!==0?-_|0:_},o.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var f=this.ucmp(l);return this.negative!==0?-f|0:f},o.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var f=0,_=this.length-1;_>=0;_--){var E=this.words[_]|0,N=l.words[_]|0;if(E!==N){E<N?f=-1:E>N&&(f=1);break}}return f},o.prototype.gtn=function(l){return this.cmpn(l)===1},o.prototype.gt=function(l){return this.cmp(l)===1},o.prototype.gten=function(l){return this.cmpn(l)>=0},o.prototype.gte=function(l){return this.cmp(l)>=0},o.prototype.ltn=function(l){return this.cmpn(l)===-1},o.prototype.lt=function(l){return this.cmp(l)===-1},o.prototype.lten=function(l){return this.cmpn(l)<=0},o.prototype.lte=function(l){return this.cmp(l)<=0},o.prototype.eqn=function(l){return this.cmpn(l)===0},o.prototype.eq=function(l){return this.cmp(l)===0},o.red=function(l){return new G(l)},o.prototype.toRed=function(l){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(l){return this.red=l,this},o.prototype.forceRed=function(l){return r(!this.red,"Already a number in reduction context"),this._forceRed(l)},o.prototype.redAdd=function(l){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},o.prototype.redIAdd=function(l){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},o.prototype.redSub=function(l){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},o.prototype.redISub=function(l){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},o.prototype.redShl=function(l){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},o.prototype.redMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},o.prototype.redIMul=function(l){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(l){return r(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var L={k256:null,p224:null,p192:null,p25519:null};function $(v,l){this.name=v,this.p=new o(l,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var l=new o(null);return l.words=new Array(Math.ceil(this.n/13)),l},$.prototype.ireduce=function(l){var f=l,_;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),_=f.bitLength();while(_>this.n);var E=_<this.n?-1:f.ucmp(this.p);return E===0?(f.words[0]=0,f.length=1):E>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},$.prototype.split=function(l,f){l.iushrn(this.n,0,f)},$.prototype.imulK=function(l){return l.imul(this.k)};function W(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(W,$),W.prototype.split=function(l,f){for(var _=4194303,E=Math.min(l.length,9),N=0;N<E;N++)f.words[N]=l.words[N];if(f.length=E,l.length<=9){l.words[0]=0,l.length=1;return}var C=l.words[9];for(f.words[f.length++]=C&_,N=10;N<l.length;N++){var P=l.words[N]|0;l.words[N-10]=(P&_)<<4|C>>>22,C=P}C>>>=22,l.words[N-10]=C,C===0&&l.length>10?l.length-=10:l.length-=9},W.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var f=0,_=0;_<l.length;_++){var E=l.words[_]|0;f+=E*977,l.words[_]=f&67108863,f=E*64+(f/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function Y(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(Y,$);function D(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(D,$);function j(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(j,$),j.prototype.imulK=function(l){for(var f=0,_=0;_<l.length;_++){var E=(l.words[_]|0)*19+f,N=E&67108863;E>>>=26,l.words[_]=N,f=E}return f!==0&&(l.words[l.length++]=f),l},o._prime=function(l){if(L[l])return L[l];var f;if(l==="k256")f=new W;else if(l==="p224")f=new Y;else if(l==="p192")f=new D;else if(l==="p25519")f=new j;else throw new Error("Unknown prime "+l);return L[l]=f,f};function G(v){if(typeof v=="string"){var l=o._prime(v);this.m=l.p,this.prime=l}else r(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null}G.prototype._verify1=function(l){r(l.negative===0,"red works only with positives"),r(l.red,"red works only with red numbers")},G.prototype._verify2=function(l,f){r((l.negative|f.negative)===0,"red works only with positives"),r(l.red&&l.red===f.red,"red works only with red numbers")},G.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):(d(l,l.umod(this.m)._forceRed(this)),l)},G.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},G.prototype.add=function(l,f){this._verify2(l,f);var _=l.add(f);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},G.prototype.iadd=function(l,f){this._verify2(l,f);var _=l.iadd(f);return _.cmp(this.m)>=0&&_.isub(this.m),_},G.prototype.sub=function(l,f){this._verify2(l,f);var _=l.sub(f);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},G.prototype.isub=function(l,f){this._verify2(l,f);var _=l.isub(f);return _.cmpn(0)<0&&_.iadd(this.m),_},G.prototype.shl=function(l,f){return this._verify1(l),this.imod(l.ushln(f))},G.prototype.imul=function(l,f){return this._verify2(l,f),this.imod(l.imul(f))},G.prototype.mul=function(l,f){return this._verify2(l,f),this.imod(l.mul(f))},G.prototype.isqr=function(l){return this.imul(l,l.clone())},G.prototype.sqr=function(l){return this.mul(l,l)},G.prototype.sqrt=function(l){if(l.isZero())return l.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var _=this.m.add(new o(1)).iushrn(2);return this.pow(l,_)}for(var E=this.m.subn(1),N=0;!E.isZero()&&E.andln(1)===0;)N++,E.iushrn(1);r(!E.isZero());var C=new o(1).toRed(this),P=C.redNeg(),T=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new o(2*m*m).toRed(this);this.pow(m,T).cmp(P)!==0;)m.redIAdd(P);for(var M=this.pow(m,E),oe=this.pow(l,E.addn(1).iushrn(1)),ne=this.pow(l,E),ue=N;ne.cmp(C)!==0;){for(var Ie=ne,we=0;Ie.cmp(C)!==0;we++)Ie=Ie.redSqr();r(we<ue);var ye=this.pow(M,new o(1).iushln(ue-we-1));oe=oe.redMul(ye),M=ye.redSqr(),ne=ne.redMul(M),ue=we}return oe},G.prototype.invm=function(l){var f=l._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},G.prototype.pow=function(l,f){if(f.isZero())return new o(1).toRed(this);if(f.cmpn(1)===0)return l.clone();var _=4,E=new Array(1<<_);E[0]=new o(1).toRed(this),E[1]=l;for(var N=2;N<E.length;N++)E[N]=this.mul(E[N-1],l);var C=E[0],P=0,T=0,m=f.bitLength()%26;for(m===0&&(m=26),N=f.length-1;N>=0;N--){for(var M=f.words[N],oe=m-1;oe>=0;oe--){var ne=M>>oe&1;if(C!==E[0]&&(C=this.sqr(C)),ne===0&&P===0){T=0;continue}P<<=1,P|=ne,T++,!(T!==_&&(N!==0||oe!==0))&&(C=this.mul(C,E[P]),T=0,P=0)}m=26}return C},G.prototype.convertTo=function(l){var f=l.umod(this.m);return f===l?f.clone():f},G.prototype.convertFrom=function(l){var f=l.clone();return f.red=null,f},o.mont=function(l){return new V(l)};function V(v){G.call(this,v),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(V,G),V.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},V.prototype.convertFrom=function(l){var f=this.imod(l.mul(this.rinv));return f.red=null,f},V.prototype.imul=function(l,f){if(l.isZero()||f.isZero())return l.words[0]=0,l.length=1,l;var _=l.imul(f),E=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=_.isub(E).iushrn(this.shift),C=N;return N.cmp(this.m)>=0?C=N.isub(this.m):N.cmpn(0)<0&&(C=N.iadd(this.m)),C._forceRed(this)},V.prototype.mul=function(l,f){if(l.isZero()||f.isZero())return new o(0)._forceRed(this);var _=l.mul(f),E=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),N=_.isub(E).iushrn(this.shift),C=N;return N.cmp(this.m)>=0?C=N.isub(this.m):N.cmpn(0)<0&&(C=N.iadd(this.m)),C._forceRed(this)},V.prototype.invm=function(l){var f=this.imod(l._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(n,Pn)})(qd);var Gd=qd.exports;const Mn=_i(Gd);var Dl={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,e){var t=ce,r=t.Buffer;function i(s,a){for(var c in s)a[c]=s[c]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=o);function o(s,a,c){return r(s,a,c)}o.prototype=Object.create(r.prototype),i(r,o),o.from=function(s,a,c){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,a,c)},o.alloc=function(s,a,c){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return a!==void 0?typeof c=="string"?u.fill(a,c):u.fill(a):u.fill(0),u},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(s)}})(Dl,Dl.exports);var Bb=Dl.exports,Ea=Bb.Buffer;function Mb(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=r}var s=n.length,a=n.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function d(h){if((Array.isArray(h)||h instanceof Uint8Array)&&(h=Ea.from(h)),!Ea.isBuffer(h))throw new TypeError("Expected Buffer");if(h.length===0)return"";for(var b=0,S=0,A=0,I=h.length;A!==I&&h[A]===0;)A++,b++;for(var x=(I-A)*u+1>>>0,k=new Uint8Array(x);A!==I;){for(var B=h[A],L=0,$=x-1;(B!==0||L<S)&&$!==-1;$--,L++)B+=256*k[$]>>>0,k[$]=B%s>>>0,B=B/s>>>0;if(B!==0)throw new Error("Non-zero carry");S=L,A++}for(var W=x-S;W!==x&&k[W]===0;)W++;for(var Y=a.repeat(b);W<x;++W)Y+=n.charAt(k[W]);return Y}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return Ea.alloc(0);for(var b=0,S=0,A=0;h[b]===a;)S++,b++;for(var I=(h.length-b)*c+1>>>0,x=new Uint8Array(I);b<h.length;){var k=h.charCodeAt(b);if(k>255)return;var B=e[k];if(B===255)return;for(var L=0,$=I-1;(B!==0||L<A)&&$!==-1;$--,L++)B+=s*x[$]>>>0,x[$]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");A=L,b++}for(var W=I-A;W!==I&&x[W]===0;)W++;var Y=Ea.allocUnsafe(S+(I-W));Y.fill(0,0,S);for(var D=S;W!==I;)Y[D++]=x[W++];return Y}function w(h){var b=p(h);if(b)return b;throw new Error("Non-base"+s+" character")}return{encode:d,decodeUnsafe:p,decode:w}}var Pb=Mb,Lb=Pb,Ub="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",fg=Lb(Ub);const _t=_i(fg),Eh=V0;var tn={};function xr(n,e,t){return e<=n&&n<=t}function Fc(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Db(n){for(var e=String(n),t=e.length,r=0,i=[];r<t;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===t-1)i.push(65533);else{var s=n.charCodeAt(r+1);if(56320<=s&&s<=57343){var a=o&1023,c=s&1023;i.push(65536+(a<<10)+c),r+=1}else i.push(65533)}r+=1}return i}function Fb(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var lc=-1;function jd(n){this.tokens=[].slice.call(n)}jd.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():lc},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var Do=-1;function Ku(n,e){if(n)throw TypeError("Decoder error");return e||65533}var dc="utf-8";function fc(n,e){if(!(this instanceof fc))return new fc(n,e);if(n=n!==void 0?String(n).toLowerCase():dc,n!==dc)throw new Error("Encoding not supported. Only utf-8 is supported");e=Fc(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}fc.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=Fc(t),this._streaming||(this._decoder=new Wb({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new jd(r),o=[],s;!i.endOfStream()&&(s=this._decoder.handler(i,i.read()),s!==Do);)s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));if(!this._streaming){do{if(s=this._decoder.handler(i,i.read()),s===Do)break;s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s))}while(!i.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),Fb(o)}};function hc(n,e){if(!(this instanceof hc))return new hc(n,e);if(n=n!==void 0?String(n).toLowerCase():dc,n!==dc)throw new Error("Encoding not supported. Only utf-8 is supported");e=Fc(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}hc.prototype={encode:function(e,t){e=e?String(e):"",t=Fc(t),this._streaming||(this._encoder=new zb(this._options)),this._streaming=!!t.stream;for(var r=[],i=new jd(Db(e)),o;!i.endOfStream()&&(o=this._encoder.handler(i,i.read()),o!==Do);)Array.isArray(o)?r.push.apply(r,o):r.push(o);if(!this._streaming){for(;o=this._encoder.handler(i,i.read()),o!==Do;)Array.isArray(o)?r.push.apply(r,o):r.push(o);this._encoder=null}return new Uint8Array(r)}};function Wb(n){var e=n.fatal,t=0,r=0,i=0,o=128,s=191;this.handler=function(a,c){if(c===lc&&i!==0)return i=0,Ku(e);if(c===lc)return Do;if(i===0){if(xr(c,0,127))return c;if(xr(c,194,223))i=1,t=c-192;else if(xr(c,224,239))c===224&&(o=160),c===237&&(s=159),i=2,t=c-224;else if(xr(c,240,244))c===240&&(o=144),c===244&&(s=143),i=3,t=c-240;else return Ku(e);return t=t<<6*i,null}if(!xr(c,o,s))return t=i=r=0,o=128,s=191,a.prepend(c),Ku(e);if(o=128,s=191,r+=1,t+=c-128<<6*(i-r),r!==i)return null;var u=t;return t=i=r=0,u}}function zb(n){n.fatal,this.handler=function(e,t){if(t===lc)return Do;if(xr(t,0,127))return t;var r,i;xr(t,128,2047)?(r=1,i=192):xr(t,2048,65535)?(r=2,i=224):xr(t,65536,1114111)&&(r=3,i=240);for(var o=[(t>>6*r)+i];r>0;){var s=t>>6*(r-1);o.push(128|s&63),r-=1}return o}}const Hb=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:fc,TextEncoder:hc},Symbol.toStringTag,{value:"Module"})),Kb=Mc(Hb);var $b=Pn&&Pn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Vb=Pn&&Pn.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),mr=Pn&&Pn.__decorate||function(n,e,t,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qb=Pn&&Pn.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&$b(e,n,t);return Vb(e,n),e},hg=Pn&&Pn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(tn,"__esModule",{value:!0});var pg=tn.deserializeUnchecked=bg=tn.deserialize=wg=tn.serialize=tn.BinaryReader=tn.BinaryWriter=tn.BorshError=tn.baseDecode=tn.baseEncode=void 0;const oi=hg(Gd),gg=hg(fg),Gb=qb(Kb),jb=typeof TextDecoder!="function"?Gb.TextDecoder:TextDecoder,Yb=new jb("utf-8",{fatal:!0});function Zb(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),gg.default.encode(Buffer.from(n))}tn.baseEncode=Zb;function Xb(n){return Buffer.from(gg.default.decode(n))}tn.baseDecode=Xb;const $u=1024;class gn extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}tn.BorshError=gn;class mg{constructor(){this.buf=Buffer.alloc($u),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc($u)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new oi.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new oi.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new oi.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new oi.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc($u)]),this.length+=e.length}writeString(e){this.maybeResize();const t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}tn.BinaryWriter=mg;function yr(n,e,t){const r=t.value;t.value=function(...i){try{return r.apply(this,i)}catch(o){if(o instanceof RangeError){const s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new gn("Reached the end of buffer when deserializing")}throw o}}}class Dn{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new oi.default(e,"le")}readU128(){const e=this.readBuffer(16);return new oi.default(e,"le")}readU256(){const e=this.readBuffer(32);return new oi.default(e,"le")}readU512(){const e=this.readBuffer(64);return new oi.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new gn(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return Yb.decode(t)}catch(r){throw new gn(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let i=0;i<t;++i)r.push(e());return r}}mr([yr],Dn.prototype,"readU8",null);mr([yr],Dn.prototype,"readU16",null);mr([yr],Dn.prototype,"readU32",null);mr([yr],Dn.prototype,"readU64",null);mr([yr],Dn.prototype,"readU128",null);mr([yr],Dn.prototype,"readU256",null);mr([yr],Dn.prototype,"readU512",null);mr([yr],Dn.prototype,"readString",null);mr([yr],Dn.prototype,"readFixedArray",null);mr([yr],Dn.prototype,"readArray",null);tn.BinaryReader=Dn;function yg(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Ii(n,e,t,r,i){try{if(typeof r=="string")i[`write${yg(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new gn(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new gn(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let o=0;o<r[1];o++)Ii(n,null,t[o],r[0],i)}else i.writeArray(t,o=>{Ii(n,e,o,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),Ii(n,e,t,r.type,i));break}case"map":{i.writeU32(t.size),t.forEach((o,s)=>{Ii(n,e,s,r.key,i),Ii(n,e,o,r.value,i)});break}default:throw new gn(`FieldType ${r} unrecognized`)}else _g(n,t,i)}catch(o){throw o instanceof gn&&o.addToFieldPath(e),o}}function _g(n,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const r=n.get(e.constructor);if(!r)throw new gn(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,o])=>{Ii(n,i,e[i],o,t)});else if(r.kind==="enum"){const i=e[r.field];for(let o=0;o<r.values.length;++o){const[s,a]=r.values[o];if(s===i){t.writeU8(o),Ii(n,s,e[s],a,t);break}}}else throw new gn(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function Jb(n,e,t=mg){const r=new t;return _g(n,e,r),r.toArray()}var wg=tn.serialize=Jb;function Ti(n,e,t,r){try{if(typeof t=="string")return r[`read${yg(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){const i=[];for(let o=0;o<t[1];o++)i.push(Ti(n,null,t[0],r));return i}else return r.readArray(()=>Ti(n,e,t[0],r))}if(t.kind==="option")return r.readU8()?Ti(n,e,t.type,r):void 0;if(t.kind==="map"){let i=new Map;const o=r.readU32();for(let s=0;s<o;s++){const a=Ti(n,e,t.key,r),c=Ti(n,e,t.value,r);i.set(a,c)}return i}return Yd(n,t,r)}catch(i){throw i instanceof gn&&i.addToFieldPath(e),i}}function Yd(n,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const r=n.get(e);if(!r)throw new gn(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[o,s]of n.get(e).fields)i[o]=Ti(n,o,s,t);return new e(i)}if(r.kind==="enum"){const i=t.readU8();if(i>=r.values.length)throw new gn(`Enum index: ${i} is out of range`);const[o,s]=r.values[i],a=Ti(n,o,s,t);return new e({[o]:a})}throw new gn(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function Qb(n,e,t,r=Dn){const i=new r(t),o=Yd(n,e,i);if(i.offset<t.length)throw new gn(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return o}var bg=tn.deserialize=Qb;function ev(n,e,t,r=Dn){const i=new r(t);return Yd(n,e,i)}pg=tn.deserializeUnchecked=ev;var q={};Object.defineProperty(q,"__esModule",{value:!0});q.s16=q.s8=q.nu64be=q.u48be=q.u40be=q.u32be=q.u24be=q.u16be=Qt=q.nu64=q.u48=q.u40=fe=q.u32=q.u24=Kn=q.u16=xe=q.u8=ci=q.offset=q.greedy=q.Constant=q.UTF8=q.CString=q.Blob=q.Boolean=q.BitField=q.BitStructure=q.VariantLayout=q.Union=q.UnionLayoutDiscriminator=q.UnionDiscriminator=q.Structure=q.Sequence=q.DoubleBE=q.Double=q.FloatBE=q.Float=q.NearInt64BE=q.NearInt64=q.NearUInt64BE=q.NearUInt64=q.IntBE=q.Int=q.UIntBE=q.UInt=q.OffsetLayout=q.GreedyCount=q.ExternalLayout=q.bindConstructorLayout=q.nameWithProperty=q.Layout=q.uint8ArrayToBuffer=q.checkUint8Array=void 0;q.constant=q.utf8=q.cstr=Ze=q.blob=q.unionLayoutDiscriminator=q.union=on=q.seq=q.bits=de=q.struct=q.f64be=q.f64=q.f32be=q.f32=q.ns64be=q.s48be=q.s40be=q.s32be=q.s24be=q.s16be=xn=q.ns64=q.s48=q.s40=q.s32=q.s24=void 0;const Zd=ce;function Jo(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}q.checkUint8Array=Jo;function Pe(n){return Jo(n),Zd.Buffer.from(n.buffer,n.byteOffset,n.length)}q.uint8ArrayToBuffer=Pe;let Fe=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};q.Layout=Fe;function Xd(n,e){return e.property?n+"["+e.property+"]":n}q.nameWithProperty=Xd;function tv(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Fe))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}q.bindConstructorLayout=tv;let En=class extends Fe{isCount(){throw new Error("ExternalLayout is abstract")}};q.ExternalLayout=En;let vg=class extends En{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Jo(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}};q.GreedyCount=vg;let Jd=class extends En{constructor(e,t=0,r){if(!(e instanceof Fe))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof $n||this.layout instanceof er}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}};q.OffsetLayout=Jd;let $n=class extends Fe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Pe(e).readUIntLE(t,this.span)}encode(e,t,r=0){return Pe(t).writeUIntLE(e,r,this.span),this.span}};q.UInt=$n;let er=class extends Fe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Pe(e).readUIntBE(t,this.span)}encode(e,t,r=0){return Pe(t).writeUIntBE(e,r,this.span),this.span}};q.UIntBE=er;let Zi=class extends Fe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Pe(e).readIntLE(t,this.span)}encode(e,t,r=0){return Pe(t).writeIntLE(e,r,this.span),this.span}};q.Int=Zi;let Qo=class extends Fe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Pe(e).readIntBE(t,this.span)}encode(e,t,r=0){return Pe(t).writeIntBE(e,r,this.span),this.span}};q.IntBE=Qo;const Fl=Math.pow(2,32);function Wc(n){const e=Math.floor(n/Fl),t=n-e*Fl;return{hi32:e,lo32:t}}function zc(n,e){return n*Fl+e}let Eg=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){const r=Pe(e),i=r.readUInt32LE(t),o=r.readUInt32LE(t+4);return zc(o,i)}encode(e,t,r=0){const i=Wc(e),o=Pe(t);return o.writeUInt32LE(i.lo32,r),o.writeUInt32LE(i.hi32,r+4),8}};q.NearUInt64=Eg;let Ag=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){const r=Pe(e),i=r.readUInt32BE(t),o=r.readUInt32BE(t+4);return zc(i,o)}encode(e,t,r=0){const i=Wc(e),o=Pe(t);return o.writeUInt32BE(i.hi32,r),o.writeUInt32BE(i.lo32,r+4),8}};q.NearUInt64BE=Ag;let Rg=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){const r=Pe(e),i=r.readUInt32LE(t),o=r.readInt32LE(t+4);return zc(o,i)}encode(e,t,r=0){const i=Wc(e),o=Pe(t);return o.writeUInt32LE(i.lo32,r),o.writeInt32LE(i.hi32,r+4),8}};q.NearInt64=Rg;let Sg=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){const r=Pe(e),i=r.readInt32BE(t),o=r.readUInt32BE(t+4);return zc(i,o)}encode(e,t,r=0){const i=Wc(e),o=Pe(t);return o.writeInt32BE(i.hi32,r),o.writeUInt32BE(i.lo32,r+4),8}};q.NearInt64BE=Sg;let kg=class extends Fe{constructor(e){super(4,e)}decode(e,t=0){return Pe(e).readFloatLE(t)}encode(e,t,r=0){return Pe(t).writeFloatLE(e,r),4}};q.Float=kg;let Ig=class extends Fe{constructor(e){super(4,e)}decode(e,t=0){return Pe(e).readFloatBE(t)}encode(e,t,r=0){return Pe(t).writeFloatBE(e,r),4}};q.FloatBE=Ig;let Tg=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){return Pe(e).readDoubleLE(t)}encode(e,t,r=0){return Pe(t).writeDoubleLE(e,r),8}};q.Double=Tg;let Ng=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){return Pe(e).readDoubleBE(t)}encode(e,t,r=0){return Pe(t).writeDoubleBE(e,r),8}};q.DoubleBE=Ng;let Og=class extends Fe{constructor(e,t,r){if(!(e instanceof Fe))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof En&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof En)&&0<e.span&&(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof En&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let o=0;for(;o<i;)r+=this.elementLayout.getSpan(e,t+r),++o}return r}decode(e,t=0){const r=[];let i=0,o=this.count;for(o instanceof En&&(o=o.decode(e,t));i<o;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r=0){const i=this.elementLayout,o=e.reduce((s,a)=>s+i.encode(a,t,r+s),0);return this.count instanceof En&&this.count.encode(e.length,t,r),o}};q.Sequence=Og;let Cg=class extends Fe{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((o,s)=>o&&s instanceof Fe,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,o)=>{const s=o.getSpan(e,t);return t+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){Jo(e);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const i=r;let o=0,s=0;for(const a of this.fields){let c=a.span;if(s=0<c?c:0,a.property!==void 0){const u=e[a.property];u!==void 0&&(s=a.encode(u,t,r),0>c&&(c=a.getSpan(t,r)))}o=r,r+=c}return o+s-i}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}};q.Structure=Cg;let Qd=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}};q.UnionDiscriminator=Qd;let pc=class extends Qd{constructor(e,t){if(!(e instanceof En&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}};q.UnionLayoutDiscriminator=pc;let ef=class extends Fe{constructor(e,t,r){let i;if(e instanceof $n||e instanceof er)i=new pc(new Jd(e));else if(e instanceof En&&e.isCount())i=new pc(e);else if(e instanceof Qd)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Fe))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&(e instanceof $n||e instanceof er)&&(o+=i.layout.span)),super(o,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof $n||e instanceof er,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return s(a)},this.configGetSourceVariant=function(a){s=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const i=this.discriminator,o=i.decode(e,t),s=this.registry[o];if(s===void 0){const a=this.defaultLayout;let c=0;this.usesPrefixDiscriminator&&(c=i.layout.span),r=this.makeDestinationObject(),r[i.property]=o,r[a.property]=a.decode(e,t+c)}else r=s.decode(e,t);return r}encode(e,t,r=0){const i=this.getSourceVariant(e);if(i===void 0){const o=this.discriminator,s=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=o.layout.span),o.encode(e[o.property],t,r),a+s.encode(e[s.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){const i=new xg(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}};q.Union=ef;let xg=class extends Fe{constructor(e,t,r,i){if(!(e instanceof ef))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof Fe))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=r?r.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+r)),r+i}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let o=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),o+=this.layout.getSpan(t,r+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};q.VariantLayout=xg;function fo(n){return 0>n&&(n+=4294967296),n}let tf=class extends Fe{constructor(e,t,r){if(!(e instanceof $n||e instanceof er))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(o){return i=fo(o),this},this._packedGetValue=function(){return i}}decode(e,t=0){const r=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(const o of this.fields)o.property!==void 0&&(r[o.property]=o.decode(e));return r}encode(e,t,r=0){const i=this.word.decode(t,r);this._packedSetValue(i);for(const o of this.fields)if(o.property!==void 0){const s=e[o.property];s!==void 0&&o.encode(s)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new nf(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new Bg(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}};q.BitStructure=tf;let nf=class{constructor(e,t,r){if(!(e instanceof tf))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const i=8*e.span,o=e.fields.reduce((s,a)=>s+a.bits,0);if(t+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-t),this.wordMask=fo(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue();return fo(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==fo(e&this.valueMask))throw new TypeError(Xd("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=fo(e<<this.start);this.container._packedSetValue(fo(t&~this.wordMask)|r)}};q.BitField=nf;let Bg=class extends nf{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};q.Boolean=Bg;let Mg=class extends Fe{constructor(e,t){if(!(e instanceof En&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof En||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),Pe(e).slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof En&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(Xd("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>t.length)throw new RangeError("encoding overruns Uint8Array");const o=Pe(e);return Pe(t).write(o.toString("hex"),r,i,"hex"),this.length instanceof En&&this.length.encode(i,t,r),i}};q.Blob=Mg;let Pg=class extends Fe{constructor(e){super(-1,e)}getSpan(e,t=0){Jo(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return Pe(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=Zd.Buffer.from(e,"utf8"),o=i.length;if(r+o>t.length)throw new RangeError("encoding overruns Buffer");const s=Pe(t);return i.copy(s,r),s[r+o]=0,o+1}};q.CString=Pg;let Lg=class extends Fe{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Jo(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Pe(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=Zd.Buffer.from(e,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(Pe(t),r),o}};q.UTF8=Lg;let Ug=class extends Fe{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}};q.Constant=Ug;q.greedy=(n,e)=>new vg(n,e);var ci=q.offset=(n,e,t)=>new Jd(n,e,t),xe=q.u8=n=>new $n(1,n),Kn=q.u16=n=>new $n(2,n);q.u24=n=>new $n(3,n);var fe=q.u32=n=>new $n(4,n);q.u40=n=>new $n(5,n);q.u48=n=>new $n(6,n);var Qt=q.nu64=n=>new Eg(n);q.u16be=n=>new er(2,n);q.u24be=n=>new er(3,n);q.u32be=n=>new er(4,n);q.u40be=n=>new er(5,n);q.u48be=n=>new er(6,n);q.nu64be=n=>new Ag(n);q.s8=n=>new Zi(1,n);q.s16=n=>new Zi(2,n);q.s24=n=>new Zi(3,n);q.s32=n=>new Zi(4,n);q.s40=n=>new Zi(5,n);q.s48=n=>new Zi(6,n);var xn=q.ns64=n=>new Rg(n);q.s16be=n=>new Qo(2,n);q.s24be=n=>new Qo(3,n);q.s32be=n=>new Qo(4,n);q.s40be=n=>new Qo(5,n);q.s48be=n=>new Qo(6,n);q.ns64be=n=>new Sg(n);q.f32=n=>new kg(n);q.f32be=n=>new Ig(n);q.f64=n=>new Tg(n);q.f64be=n=>new Ng(n);var de=q.struct=(n,e,t)=>new Cg(n,e,t);q.bits=(n,e,t)=>new tf(n,e,t);var on=q.seq=(n,e,t)=>new Og(n,e,t);q.union=(n,e,t)=>new ef(n,e,t);q.unionLayoutDiscriminator=(n,e)=>new pc(n,e);var Ze=q.blob=(n,e)=>new Mg(n,e);q.cstr=n=>new Pg(n);q.utf8=(n,e)=>new Lg(n,e);q.constant=(n,e)=>new Ug(n,e);var nv=8078e3,rv=8078001,iv=8078004,ov=8078005,sv=8078006,av=8078011;function Dg(n){return Array.isArray(n)?"%5B"+n.map(Dg).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function cv([n,e]){return`${n}=${Dg(e)}`}function uv(n){const e=Object.entries(n).map(cv).join("&");return btoa(e)}function lv(n,e={}){{let t=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(e).length&&(t+=` '${uv(e)}'`),`${t}\``}}var ko=class extends Error{constructor(...[e,t]){let r,i;if(t){const{cause:s,...a}=t;s&&(i={cause:s}),Object.keys(a).length>0&&(r=a)}const o=lv(e,r);super(o,i);Ft(this,"cause",this.cause);Ft(this,"context");this.context={__code:e,...r},this.name="SolanaError"}};function dv(n,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(n)}function fv(n){return Object.freeze({...n,encode:e=>{const t=new Uint8Array(dv(e,n));return n.write(e,t,0),t}})}function hv(n){return Object.freeze({...n,decode:(e,t=0)=>n.read(e,t)[0]})}function uo(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function pv(n,e){if(uo(n)!==uo(e))throw new ko(iv);if(uo(n)&&uo(e)&&n.fixedSize!==e.fixedSize)throw new ko(ov,{decoderFixedSize:e.fixedSize,encoderFixedSize:n.fixedSize});if(!uo(n)&&!uo(e)&&n.maxSize!==e.maxSize)throw new ko(sv,{decoderMaxSize:e.maxSize,encoderMaxSize:n.maxSize});return{...e,...n,decode:e.decode,encode:n.encode,read:e.read,write:n.write}}function gv(n,e,t=0){if(e.length-t<=0)throw new ko(nv,{codecDescription:n})}function mv(n,e,t,r=0){const i=t.length-r;if(i<e)throw new ko(rv,{bytesLength:i,codecDescription:n,expected:e})}function yv(n,e,t,r){if(r<e||r>t)throw new ko(av,{codecDescription:n,max:t,min:e,value:r})}function Fg(n){return(n==null?void 0:n.endian)!==1}function _v(n){return fv({fixedSize:n.size,write(e,t,r){n.range&&yv(n.name,n.range[0],n.range[1],e);const i=new ArrayBuffer(n.size);return n.set(new DataView(i),e,Fg(n.config)),t.set(new Uint8Array(i),r),r+n.size}})}function wv(n){return hv({fixedSize:n.size,read(e,t=0){gv(n.name,e,t),mv(n.name,n.size,e,t);const r=new DataView(bv(e,t,n.size));return[n.get(r,Fg(n.config)),t+n.size]}})}function bv(n,e,t){const r=n.byteOffset+(e??0),i=t??n.byteLength;return n.buffer.slice(r,r+i)}var Wg=(n={})=>_v({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}),vv=(n={})=>wv({config:n,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),Ev=(n={})=>pv(Wg(n),vv(n));let Av=class extends TypeError{constructor(e,t){let r;const{message:i,explanation:o,...s}=e,{path:a}=e,c=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(o??c),o!=null&&(this.cause=c),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}};function Rv(n){return Qs(n)&&typeof n[Symbol.iterator]=="function"}function Qs(n){return typeof n=="object"&&n!=null}function gc(n){return Qs(n)&&!Array.isArray(n)}function tr(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Sv(n){const{done:e,value:t}=n.next();return e?void 0:t}function kv(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:o}=e,{type:s}=t,{refinement:a,message:c=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${tr(r)}\``}=n;return{value:r,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...n,message:c}}function*Ah(n,e,t,r){Rv(n)||(n=[n]);for(const i of n){const o=kv(i,e,t,r);o&&(yield o)}}function*rf(n,e,t={}){const{path:r=[],branch:i=[n],coerce:o=!1,mask:s=!1}=t,a={path:r,branch:i,mask:s};o&&(n=e.coercer(n,a));let c="valid";for(const u of e.validator(n,a))u.explanation=t.message,c="not_valid",yield[u,void 0];for(let[u,d,p]of e.entries(n,a)){const w=rf(d,p,{path:u===void 0?r:[...r,u],branch:u===void 0?i:[...i,d],coerce:o,mask:s,message:t.message});for(const h of w)h[0]?(c=h[0].refinement!=null?"not_refined":"not_valid",yield[h[0],void 0]):o&&(d=h[1],u===void 0?n=d:n instanceof Map?n.set(u,d):n instanceof Set?n.add(d):Qs(n)&&(d!==void 0||u in n)&&(n[u]=d))}if(c!=="not_valid")for(const u of e.refiner(n,a))u.explanation=t.message,c="not_refined",yield[u,void 0];c==="valid"&&(yield[void 0,n])}let _r=class{constructor(e){const{type:t,schema:r,validator:i,refiner:o,coercer:s=c=>c,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=s,i?this.validator=(c,u)=>{const d=i(c,u);return Ah(d,u,this,c)}:this.validator=()=>[],o?this.refiner=(c,u)=>{const d=o(c,u);return Ah(d,u,this,c)}:this.refiner=()=>[]}assert(e,t){return zg(e,this,t)}create(e,t){return re(e,this,t)}is(e){return Hg(e,this)}mask(e,t){return Iv(e,this,t)}validate(e,t={}){return ea(e,this,t)}};function zg(n,e,t){const r=ea(n,e,{message:t});if(r[0])throw r[0]}function re(n,e,t){const r=ea(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function Iv(n,e,t){const r=ea(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function Hg(n,e){return!ea(n,e)[0]}function ea(n,e,t={}){const r=rf(n,e,t),i=Sv(r);return i[0]?[new Av(i[0],function*(){for(const s of r)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function Xi(n,e){return new _r({type:n,schema:null,validator:e})}function Tv(){return Xi("any",()=>!0)}function se(n){return new _r({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${tr(e)}`}})}function pr(){return Xi("boolean",n=>typeof n=="boolean")}function of(n){return Xi("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${tr(e)}`)}function ct(n){const e=tr(n),t=typeof n;return new _r({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${tr(r)}`}})}function Nv(){return Xi("never",()=>!1)}function ae(n){return new _r({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function H(){return Xi("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${tr(n)}`)}function ge(n){return new _r({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function Kg(n,e){return new _r({type:"record",schema:null,*entries(t){if(Qs(t))for(const r in t){const i=t[r];yield[r,r,n],yield[r,i,e]}},validator(t){return gc(t)||`Expected an object, but received: ${tr(t)}`},coercer(t){return gc(t)?{...t}:t}})}function te(){return Xi("string",n=>typeof n=="string"||`Expected a string, but received: ${tr(n)}`)}function sf(n){const e=Nv();return new _r({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let i=0;i<r;i++)yield[i,t[i],n[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${tr(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function Q(n){const e=Object.keys(n);return new _r({type:"type",schema:n,*entries(t){if(Qs(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return gc(t)||`Expected an object, but received: ${tr(t)}`},coercer(t){return gc(t)?{...t}:t}})}function mn(n){const e=n.map(t=>t.type).join(" | ");return new _r({type:"union",schema:null,coercer(t,r){for(const i of n){const[o,s]=i.validate(t,{coerce:!0,mask:r.mask});if(!o)return s}return t},validator(t,r){const i=[];for(const o of n){const[...s]=rf(t,o,r),[a]=s;if(a[0])for(const[c]of s)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${tr(t)}`,...i]}})}function es(){return Xi("unknown",()=>!0)}function ta(n,e,t){return new _r({...n,coercer:(r,i)=>Hg(r,e)?n.coercer(t(r,i),i):n.coercer(r,i)})}var Aa,Ov=new Uint8Array(16);function $g(){if(!Aa&&(Aa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Aa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Aa(Ov)}const Cv=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Hc(n){return typeof n=="string"&&Cv.test(n)}var Jt=[];for(var Vu=0;Vu<256;++Vu)Jt.push((Vu+256).toString(16).substr(1));function Kc(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Jt[n[e+0]]+Jt[n[e+1]]+Jt[n[e+2]]+Jt[n[e+3]]+"-"+Jt[n[e+4]]+Jt[n[e+5]]+"-"+Jt[n[e+6]]+Jt[n[e+7]]+"-"+Jt[n[e+8]]+Jt[n[e+9]]+"-"+Jt[n[e+10]]+Jt[n[e+11]]+Jt[n[e+12]]+Jt[n[e+13]]+Jt[n[e+14]]+Jt[n[e+15]]).toLowerCase();if(!Hc(t))throw TypeError("Stringified UUID is invalid");return t}var Rh,qu,Gu=0,ju=0;function xv(n,e,t){var r=e&&t||0,i=e||new Array(16);n=n||{};var o=n.node||Rh,s=n.clockseq!==void 0?n.clockseq:qu;if(o==null||s==null){var a=n.random||(n.rng||$g)();o==null&&(o=Rh=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),s==null&&(s=qu=(a[6]<<8|a[7])&16383)}var c=n.msecs!==void 0?n.msecs:Date.now(),u=n.nsecs!==void 0?n.nsecs:ju+1,d=c-Gu+(u-ju)/1e4;if(d<0&&n.clockseq===void 0&&(s=s+1&16383),(d<0||c>Gu)&&n.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Gu=c,ju=u,qu=s,c+=122192928e5;var p=((c&268435455)*1e4+u)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=p&255;var w=c/4294967296*1e4&268435455;i[r++]=w>>>8&255,i[r++]=w&255,i[r++]=w>>>24&15|16,i[r++]=w>>>16&255,i[r++]=s>>>8|128,i[r++]=s&255;for(var h=0;h<6;++h)i[r+h]=o[h];return e||Kc(i)}function Vg(n){if(!Hc(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Bv(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var Mv="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Pv="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function qg(n,e,t){function r(i,o,s,a){if(typeof i=="string"&&(i=Bv(i)),typeof o=="string"&&(o=Vg(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(o),c.set(i,o.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,s){a=a||0;for(var u=0;u<16;++u)s[a+u]=c[u];return s}return Kc(c)}try{r.name=n}catch{}return r.DNS=Mv,r.URL=Pv,r}function Lv(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return Uv(Dv(Fv(n),n.length*8))}function Uv(n){for(var e=[],t=n.length*32,r="0123456789abcdef",i=0;i<t;i+=8){var o=n[i>>5]>>>i%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);e.push(s)}return e}function Gg(n){return(n+64>>>9<<4)+14+1}function Dv(n,e){n[e>>5]|=128<<e%32,n[Gg(e)-1]=e;for(var t=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<n.length;s+=16){var a=t,c=r,u=i,d=o;t=un(t,r,i,o,n[s],7,-680876936),o=un(o,t,r,i,n[s+1],12,-389564586),i=un(i,o,t,r,n[s+2],17,606105819),r=un(r,i,o,t,n[s+3],22,-1044525330),t=un(t,r,i,o,n[s+4],7,-176418897),o=un(o,t,r,i,n[s+5],12,1200080426),i=un(i,o,t,r,n[s+6],17,-1473231341),r=un(r,i,o,t,n[s+7],22,-45705983),t=un(t,r,i,o,n[s+8],7,1770035416),o=un(o,t,r,i,n[s+9],12,-1958414417),i=un(i,o,t,r,n[s+10],17,-42063),r=un(r,i,o,t,n[s+11],22,-1990404162),t=un(t,r,i,o,n[s+12],7,1804603682),o=un(o,t,r,i,n[s+13],12,-40341101),i=un(i,o,t,r,n[s+14],17,-1502002290),r=un(r,i,o,t,n[s+15],22,1236535329),t=ln(t,r,i,o,n[s+1],5,-165796510),o=ln(o,t,r,i,n[s+6],9,-1069501632),i=ln(i,o,t,r,n[s+11],14,643717713),r=ln(r,i,o,t,n[s],20,-373897302),t=ln(t,r,i,o,n[s+5],5,-701558691),o=ln(o,t,r,i,n[s+10],9,38016083),i=ln(i,o,t,r,n[s+15],14,-660478335),r=ln(r,i,o,t,n[s+4],20,-405537848),t=ln(t,r,i,o,n[s+9],5,568446438),o=ln(o,t,r,i,n[s+14],9,-1019803690),i=ln(i,o,t,r,n[s+3],14,-187363961),r=ln(r,i,o,t,n[s+8],20,1163531501),t=ln(t,r,i,o,n[s+13],5,-1444681467),o=ln(o,t,r,i,n[s+2],9,-51403784),i=ln(i,o,t,r,n[s+7],14,1735328473),r=ln(r,i,o,t,n[s+12],20,-1926607734),t=dn(t,r,i,o,n[s+5],4,-378558),o=dn(o,t,r,i,n[s+8],11,-2022574463),i=dn(i,o,t,r,n[s+11],16,1839030562),r=dn(r,i,o,t,n[s+14],23,-35309556),t=dn(t,r,i,o,n[s+1],4,-1530992060),o=dn(o,t,r,i,n[s+4],11,1272893353),i=dn(i,o,t,r,n[s+7],16,-155497632),r=dn(r,i,o,t,n[s+10],23,-1094730640),t=dn(t,r,i,o,n[s+13],4,681279174),o=dn(o,t,r,i,n[s],11,-358537222),i=dn(i,o,t,r,n[s+3],16,-722521979),r=dn(r,i,o,t,n[s+6],23,76029189),t=dn(t,r,i,o,n[s+9],4,-640364487),o=dn(o,t,r,i,n[s+12],11,-421815835),i=dn(i,o,t,r,n[s+15],16,530742520),r=dn(r,i,o,t,n[s+2],23,-995338651),t=fn(t,r,i,o,n[s],6,-198630844),o=fn(o,t,r,i,n[s+7],10,1126891415),i=fn(i,o,t,r,n[s+14],15,-1416354905),r=fn(r,i,o,t,n[s+5],21,-57434055),t=fn(t,r,i,o,n[s+12],6,1700485571),o=fn(o,t,r,i,n[s+3],10,-1894986606),i=fn(i,o,t,r,n[s+10],15,-1051523),r=fn(r,i,o,t,n[s+1],21,-2054922799),t=fn(t,r,i,o,n[s+8],6,1873313359),o=fn(o,t,r,i,n[s+15],10,-30611744),i=fn(i,o,t,r,n[s+6],15,-1560198380),r=fn(r,i,o,t,n[s+13],21,1309151649),t=fn(t,r,i,o,n[s+4],6,-145523070),o=fn(o,t,r,i,n[s+11],10,-1120210379),i=fn(i,o,t,r,n[s+2],15,718787259),r=fn(r,i,o,t,n[s+9],21,-343485551),t=si(t,a),r=si(r,c),i=si(i,u),o=si(o,d)}return[t,r,i,o]}function Fv(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(Gg(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function si(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function Wv(n,e){return n<<e|n>>>32-e}function $c(n,e,t,r,i,o){return si(Wv(si(si(e,n),si(r,o)),i),t)}function un(n,e,t,r,i,o,s){return $c(e&t|~e&r,n,e,i,o,s)}function ln(n,e,t,r,i,o,s){return $c(e&r|t&~r,n,e,i,o,s)}function dn(n,e,t,r,i,o,s){return $c(e^t^r,n,e,i,o,s)}function fn(n,e,t,r,i,o,s){return $c(t^(e|~r),n,e,i,o,s)}var zv=qg("v3",48,Lv);function Hv(n,e,t){n=n||{};var r=n.random||(n.rng||$g)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return Kc(r)}function Kv(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function Yu(n,e){return n<<e|n>>>32-e}function $v(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var o=n.length/4+2,s=Math.ceil(o/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),d=0;d<16;++d)u[d]=n[c*64+d*4]<<24|n[c*64+d*4+1]<<16|n[c*64+d*4+2]<<8|n[c*64+d*4+3];a[c]=u}a[s-1][14]=(n.length-1)*8/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=(n.length-1)*8&4294967295;for(var p=0;p<s;++p){for(var w=new Uint32Array(80),h=0;h<16;++h)w[h]=a[p][h];for(var b=16;b<80;++b)w[b]=Yu(w[b-3]^w[b-8]^w[b-14]^w[b-16],1);for(var S=t[0],A=t[1],I=t[2],x=t[3],k=t[4],B=0;B<80;++B){var L=Math.floor(B/20),$=Yu(S,5)+Kv(L,A,I,x)+k+e[L]+w[B]>>>0;k=x,x=I,I=Yu(A,30)>>>0,A=S,S=$}t[0]=t[0]+S>>>0,t[1]=t[1]+A>>>0,t[2]=t[2]+I>>>0,t[3]=t[3]+x>>>0,t[4]=t[4]+k>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Vv=qg("v5",80,$v);const qv="00000000-0000-0000-0000-000000000000";function Gv(n){if(!Hc(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const jv=Object.freeze(Object.defineProperty({__proto__:null,NIL:qv,parse:Vg,stringify:Kc,v1:xv,v3:zv,v4:Hv,v5:Vv,validate:Hc,version:Gv},Symbol.toStringTag,{value:"Module"})),jg=Mc(jv),Yv=jg.v4,Zv=function(n,e,t,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const o={method:n};if(i===2&&(o.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(typeof t>"u"){const s=typeof r.generator=="function"?r.generator:function(){return Yv()};o.id=s(o,r)}else i===2&&t===null?r.notificationIdNull&&(o.id=null):o.id=t;return o};var Xv=Zv;const Jv=jg.v4,Qv=Xv,Ps=function(n,e){if(!(this instanceof Ps))return new Ps(n,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return Jv()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=n};var eE=Ps;Ps.prototype.request=function(n,e,t,r){const i=this;let o=null;const s=Array.isArray(n)&&typeof e=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&n&&typeof n=="object"&&typeof e=="function")r=e,o=n;else{typeof t=="function"&&(r=t,t=void 0);const u=typeof r=="function";try{o=Qv(n,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(d){if(u){r(d);return}throw d}if(!u)return o}let c;try{c=JSON.stringify(o,this.options.replacer)}catch(u){r(u);return}return this.callServer(c,function(u,d){i._parseResponse(u,d,r)}),o};Ps.prototype._parseResponse=function(n,e,t){if(n){t(n);return}if(!e){t();return}let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){t(i);return}if(t.length===3)if(Array.isArray(r)){const i=function(s){return typeof s.error<"u"},o=function(s){return!i(s)};t(null,r.filter(i),r.filter(o));return}else{t(null,r.error,r.result);return}t(null,r)};const tE=_i(eE);var Yg={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function o(c,u,d,p,w){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,p||c,w),b=t?t+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],h]:c._events[b].push(h):(c._events[b]=h,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,p;if(this._eventsCount===0)return u;for(p in d=this._events)e.call(d,p)&&u.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=t?t+u:u,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var w=0,h=p.length,b=new Array(h);w<h;w++)b[w]=p[w].fn;return b},a.prototype.listenerCount=function(u){var d=t?t+u:u,p=this._events[d];return p?p.fn?1:p.length:0},a.prototype.emit=function(u,d,p,w,h,b){var S=t?t+u:u;if(!this._events[S])return!1;var A=this._events[S],I=arguments.length,x,k;if(A.fn){switch(A.once&&this.removeListener(u,A.fn,void 0,!0),I){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,d),!0;case 3:return A.fn.call(A.context,d,p),!0;case 4:return A.fn.call(A.context,d,p,w),!0;case 5:return A.fn.call(A.context,d,p,w,h),!0;case 6:return A.fn.call(A.context,d,p,w,h,b),!0}for(k=1,x=new Array(I-1);k<I;k++)x[k-1]=arguments[k];A.fn.apply(A.context,x)}else{var B=A.length,L;for(k=0;k<B;k++)switch(A[k].once&&this.removeListener(u,A[k].fn,void 0,!0),I){case 1:A[k].fn.call(A[k].context);break;case 2:A[k].fn.call(A[k].context,d);break;case 3:A[k].fn.call(A[k].context,d,p);break;case 4:A[k].fn.call(A[k].context,d,p,w);break;default:if(!x)for(L=1,x=new Array(I-1);L<I;L++)x[L-1]=arguments[L];A[k].fn.apply(A[k].context,x)}}return!0},a.prototype.on=function(u,d,p){return o(this,u,d,p,!1)},a.prototype.once=function(u,d,p){return o(this,u,d,p,!0)},a.prototype.removeListener=function(u,d,p,w){var h=t?t+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var b=this._events[h];if(b.fn)b.fn===d&&(!w||b.once)&&(!p||b.context===p)&&s(this,h);else{for(var S=0,A=[],I=b.length;S<I;S++)(b[S].fn!==d||w&&!b[S].once||p&&b[S].context!==p)&&A.push(b[S]);A.length?this._events[h]=A.length===1?A[0]:A:s(this,h)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=t?t+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(Yg);var nE=Yg.exports;const Zg=_i(nE);var rE=class extends Zg{constructor(e,t){super();Ft(this,"socket");this.socket=new window.WebSocket(e,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(e,t,r){const i=r||t;try{this.socket.send(e),i()}catch(o){i(o)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function iE(n,e){return new rE(n,e)}var oE=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},sE=class extends Zg{constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:o=1e3,max_reconnects:s=5,...a}={},c,u){super();Ft(this,"address");Ft(this,"rpc_id");Ft(this,"queue");Ft(this,"options");Ft(this,"autoconnect");Ft(this,"ready");Ft(this,"reconnect");Ft(this,"reconnect_timer_id");Ft(this,"reconnect_interval");Ft(this,"max_reconnects");Ft(this,"rest_options");Ft(this,"current_reconnects");Ft(this,"generate_request_id");Ft(this,"socket");Ft(this,"webSocketFactory");Ft(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=o,this.max_reconnects=s,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new oE,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((o,s)=>{if(!this.ready)return s(new Error("socket not ready"));const a=this.generate_request_id(e,t),c={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(c),i,u=>{if(u)return s(u);this.queue[a]={promise:[o,s]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],s(new Error("reply timeout"))},r))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(o),s=>{if(s)return i(s);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=ce.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let o=0;o<r.params.length;o++)i.push(r.params[o]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}};const aE=BigInt(0),ls=BigInt(1),cE=BigInt(2),uE=BigInt(7),lE=BigInt(256),dE=BigInt(113),Xg=[],Jg=[],Qg=[];for(let n=0,e=ls,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],Xg.push(2*(5*r+t)),Jg.push((n+1)*(n+2)/2%64);let i=aE;for(let o=0;o<7;o++)e=(e<<ls^(e>>uE)*dE)%lE,e&cE&&(i^=ls<<(ls<<BigInt(o))-ls);Qg.push(i)}const em=K0(Qg,!0),fE=em[0],hE=em[1],Sh=(n,e,t)=>t>32?W1(n,e,t):D1(n,e,t),kh=(n,e,t)=>t>32?z1(n,e,t):F1(n,e,t);function pE(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let s=0;s<10;s++)t[s]=n[s]^n[s+10]^n[s+20]^n[s+30]^n[s+40];for(let s=0;s<10;s+=2){const a=(s+8)%10,c=(s+2)%10,u=t[c],d=t[c+1],p=Sh(u,d,1)^t[a],w=kh(u,d,1)^t[a+1];for(let h=0;h<50;h+=10)n[s+h]^=p,n[s+h+1]^=w}let i=n[2],o=n[3];for(let s=0;s<24;s++){const a=Jg[s],c=Sh(i,o,a),u=kh(i,o,a),d=Xg[s];i=n[d],o=n[d+1],n[d]=c,n[d+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)t[a]=n[s+a];for(let a=0;a<10;a++)n[s+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=fE[r],n[1]^=hE[r]}pi(t)}class af extends Fd{constructor(e,t,r,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,Bs(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=T1(this.state)}clone(){return this._cloneInto()}keccak(){uh(this.state32),pE(this.state32,this.rounds),uh(this.state32),this.posOut=0,this.pos=0}update(e){Lo(this),e=Uc(e),zr(e);const{blockLen:t,state:r}=this,i=e.length;for(let o=0;o<i;){const s=Math.min(t-this.pos,i-o);for(let a=0;a<s;a++)r[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Lo(this,!1),zr(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,o=e.length;i<o;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,o-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bs(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(W0(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,pi(this.state)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:o,enableXOF:s}=this;return e||(e=new af(t,r,i,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}const gE=(n,e,t)=>Wd(()=>new af(e,n,t)),Ih=gE(1,136,256/8);class tm extends Fd{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,F0(e);const r=Uc(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),pi(o)}update(e){return Lo(this),this.iHash.update(e),this}digestInto(e){Lo(this),zr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const nm=(n,e,t)=>new tm(n,e).update(t).digest();nm.create=(n,e)=>new tm(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Th=(n,e)=>(n+(n>=0?e:-e)/rm)/e;function mE(n,e,t){const[[r,i],[o,s]]=e,a=Th(s*n,t),c=Th(-i*n,t);let u=n-a*r-c*o,d=-a*i-c*s;const p=u<Lr,w=d<Lr;p&&(u=-u),w&&(d=-d);const h=Xs(Math.ceil(j0(t)/2))+Io;if(u<Lr||u>=h||d<Lr||d>=h)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:p,k1:u,k2neg:w,k2:d}}function Wl(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function Zu(n,e){const t={};for(let r of Object.keys(e))t[r]=n[r]===void 0?e[r]:n[r];return Vi(t.lowS,"lowS"),Vi(t.prehash,"prehash"),t.format!==void 0&&Wl(t.format),t}class yE extends Error{constructor(e=""){super(e)}}const Nr={Err:yE,_tlv:{encode:(n,e)=>{const{Err:t}=Nr;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=va(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const o=r>127?va(i.length/2|128):"";return va(n)+o+i+e},decode(n,e){const{Err:t}=Nr;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],o=!!(i&128);let s=0;if(!o)s=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const d of u)s=s<<8|d;if(r+=c,s<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+s);if(a.length!==s)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+s)}}},_int:{encode(n){const{Err:e}=Nr;if(n<Lr)throw new e("integer: negative integers are not allowed");let t=va(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=Nr;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Dc(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=Nr,i=yt("signature",n),{v:o,l:s}=r.decode(48,i);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,o),{v:u,l:d}=r.decode(2,c);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(u)}},hexFromSig(n){const{_tlv:e,_int:t}=Nr,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),o=r+i;return e.encode(48,o)}},Lr=BigInt(0),Io=BigInt(1),rm=BigInt(2),Ra=BigInt(3),_E=BigInt(4);function wo(n,e){const{BYTES:t}=n;let r;if(typeof e=="bigint")r=e;else{let i=yt("private key",e);try{r=n.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function wE(n,e={}){const t=lg("weierstrass",n,e),{Fp:r,Fn:i}=t;let o=t.CURVE;const{h:s,n:a}=o;Js(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(o.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=om(r,i);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(V,v,l){const{x:f,y:_}=v.toAffine(),E=r.toBytes(f);if(Vi(l,"isCompressed"),l){d();const N=!r.isOdd(_);return ar(im(N),E)}else return ar(Uint8Array.of(4),E,r.toBytes(_))}function w(V){Xn(V,void 0,"Point");const{publicKey:v,publicKeyUncompressed:l}=u,f=V.length,_=V[0],E=V.subarray(1);if(f===v&&(_===2||_===3)){const N=r.fromBytes(E);if(!r.isValid(N))throw new Error("bad point: is not on curve, wrong x");const C=S(N);let P;try{P=r.sqrt(C)}catch(M){const oe=M instanceof Error?": "+M.message:"";throw new Error("bad point: is not on curve, sqrt error"+oe)}d();const T=r.isOdd(P);return(_&1)===1!==T&&(P=r.neg(P)),{x:N,y:P}}else if(f===l&&_===4){const N=r.BYTES,C=r.fromBytes(E.subarray(0,N)),P=r.fromBytes(E.subarray(N,N*2));if(!A(C,P))throw new Error("bad point: is not on curve");return{x:C,y:P}}else throw new Error(`bad point: got length ${f}, expected compressed=${v} or uncompressed=${l}`)}const h=e.toBytes||p,b=e.fromBytes||w;function S(V){const v=r.sqr(V),l=r.mul(v,V);return r.add(r.add(l,r.mul(V,o.a)),o.b)}function A(V,v){const l=r.sqr(v),f=S(V);return r.eql(l,f)}if(!A(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const I=r.mul(r.pow(o.a,Ra),_E),x=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(I,x)))throw new Error("bad curve params: a or b");function k(V,v,l=!1){if(!r.isValid(v)||l&&r.is0(v))throw new Error(`bad point coordinate ${V}`);return v}function B(V){if(!(V instanceof D))throw new Error("ProjectivePoint expected")}function L(V){if(!c||!c.basises)throw new Error("no endo");return mE(V,c.basises,i.ORDER)}const $=cc((V,v)=>{const{X:l,Y:f,Z:_}=V;if(r.eql(_,r.ONE))return{x:l,y:f};const E=V.is0();v==null&&(v=E?r.ONE:r.inv(_));const N=r.mul(l,v),C=r.mul(f,v),P=r.mul(_,v);if(E)return{x:r.ZERO,y:r.ZERO};if(!r.eql(P,r.ONE))throw new Error("invZ was invalid");return{x:N,y:C}}),W=cc(V=>{if(V.is0()){if(e.allowInfinityPoint&&!r.is0(V.Y))return;throw new Error("bad point: ZERO")}const{x:v,y:l}=V.toAffine();if(!r.isValid(v)||!r.isValid(l))throw new Error("bad point: x or y not field elements");if(!A(v,l))throw new Error("bad point: equation left != right");if(!V.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function Y(V,v,l,f,_){return l=new D(r.mul(l.X,V),l.Y,l.Z),v=uc(f,v),l=uc(_,l),v.add(l)}class D{constructor(v,l,f){this.X=k("x",v),this.Y=k("y",l,!0),this.Z=k("z",f),Object.freeze(this)}static CURVE(){return o}static fromAffine(v){const{x:l,y:f}=v||{};if(!v||!r.isValid(l)||!r.isValid(f))throw new Error("invalid affine point");if(v instanceof D)throw new Error("projective point not allowed");return r.is0(l)&&r.is0(f)?D.ZERO:new D(l,f,r.ONE)}static fromBytes(v){const l=D.fromAffine(b(Xn(v,void 0,"point")));return l.assertValidity(),l}static fromHex(v){return D.fromBytes(yt("pointHex",v))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(v=8,l=!0){return G.createCache(this,v),l||this.multiply(Ra),this}assertValidity(){W(this)}hasEvenY(){const{y:v}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(v)}equals(v){B(v);const{X:l,Y:f,Z:_}=this,{X:E,Y:N,Z:C}=v,P=r.eql(r.mul(l,C),r.mul(E,_)),T=r.eql(r.mul(f,C),r.mul(N,_));return P&&T}negate(){return new D(this.X,r.neg(this.Y),this.Z)}double(){const{a:v,b:l}=o,f=r.mul(l,Ra),{X:_,Y:E,Z:N}=this;let C=r.ZERO,P=r.ZERO,T=r.ZERO,m=r.mul(_,_),M=r.mul(E,E),oe=r.mul(N,N),ne=r.mul(_,E);return ne=r.add(ne,ne),T=r.mul(_,N),T=r.add(T,T),C=r.mul(v,T),P=r.mul(f,oe),P=r.add(C,P),C=r.sub(M,P),P=r.add(M,P),P=r.mul(C,P),C=r.mul(ne,C),T=r.mul(f,T),oe=r.mul(v,oe),ne=r.sub(m,oe),ne=r.mul(v,ne),ne=r.add(ne,T),T=r.add(m,m),m=r.add(T,m),m=r.add(m,oe),m=r.mul(m,ne),P=r.add(P,m),oe=r.mul(E,N),oe=r.add(oe,oe),m=r.mul(oe,ne),C=r.sub(C,m),T=r.mul(oe,M),T=r.add(T,T),T=r.add(T,T),new D(C,P,T)}add(v){B(v);const{X:l,Y:f,Z:_}=this,{X:E,Y:N,Z:C}=v;let P=r.ZERO,T=r.ZERO,m=r.ZERO;const M=o.a,oe=r.mul(o.b,Ra);let ne=r.mul(l,E),ue=r.mul(f,N),Ie=r.mul(_,C),we=r.add(l,f),ye=r.add(E,N);we=r.mul(we,ye),ye=r.add(ne,ue),we=r.sub(we,ye),ye=r.add(l,_);let dt=r.add(E,C);return ye=r.mul(ye,dt),dt=r.add(ne,Ie),ye=r.sub(ye,dt),dt=r.add(f,_),P=r.add(N,C),dt=r.mul(dt,P),P=r.add(ue,Ie),dt=r.sub(dt,P),m=r.mul(M,ye),P=r.mul(oe,Ie),m=r.add(P,m),P=r.sub(ue,m),m=r.add(ue,m),T=r.mul(P,m),ue=r.add(ne,ne),ue=r.add(ue,ne),Ie=r.mul(M,Ie),ye=r.mul(oe,ye),ue=r.add(ue,Ie),Ie=r.sub(ne,Ie),Ie=r.mul(M,Ie),ye=r.add(ye,Ie),ne=r.mul(ue,ye),T=r.add(T,ne),ne=r.mul(dt,ye),P=r.mul(we,P),P=r.sub(P,ne),ne=r.mul(we,ue),m=r.mul(dt,m),m=r.add(m,ne),new D(P,T,m)}subtract(v){return this.add(v.negate())}is0(){return this.equals(D.ZERO)}multiply(v){const{endo:l}=e;if(!i.isValidNot0(v))throw new Error("invalid scalar: out of range");let f,_;const E=N=>G.cached(this,N,C=>xi(D,C));if(l){const{k1neg:N,k1:C,k2neg:P,k2:T}=L(v),{p:m,f:M}=E(C),{p:oe,f:ne}=E(T);_=M.add(ne),f=Y(l.beta,m,oe,N,P)}else{const{p:N,f:C}=E(v);f=N,_=C}return xi(D,[f,_])[0]}multiplyUnsafe(v){const{endo:l}=e,f=this;if(!i.isValid(v))throw new Error("invalid scalar: out of range");if(v===Lr||f.is0())return D.ZERO;if(v===Io)return f;if(G.hasCache(this))return this.multiply(v);if(l){const{k1neg:_,k1:E,k2neg:N,k2:C}=L(v),{p1:P,p2:T}=pb(D,f,E,C);return Y(l.beta,P,T,_,N)}else return G.unsafe(f,v)}multiplyAndAddUnsafe(v,l,f){const _=this.multiplyUnsafe(l).add(v.multiplyUnsafe(f));return _.is0()?void 0:_}toAffine(v){return $(this,v)}isTorsionFree(){const{isTorsionFree:v}=e;return s===Io?!0:v?v(D,this):G.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:v}=e;return s===Io?this:v?v(D,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(v=!0){return Vi(v,"isCompressed"),this.assertValidity(),h(D,this,v)}toHex(v=!0){return Ki(this.toBytes(v))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(v=!0){return this.toBytes(v)}_setWindowSize(v){this.precompute(v)}static normalizeZ(v){return xi(D,v)}static msm(v,l){return ug(D,i,v,l)}static fromPrivateKey(v){return D.BASE.multiply(wo(i,v))}}D.BASE=new D(o.Gx,o.Gy,r.ONE),D.ZERO=new D(r.ZERO,r.ONE,r.ZERO),D.Fp=r,D.Fn=i;const j=i.BITS,G=new cg(D,e.endo?Math.ceil(j/2):j);return D.BASE.precompute(8),D}function im(n){return Uint8Array.of(n?2:3)}function om(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function bE(n,e={}){const{Fn:t}=n,r=e.randomBytes||zd,i=Object.assign(om(n.Fp,t),{seed:og(t.ORDER)});function o(h){try{return!!wo(t,h)}catch{return!1}}function s(h,b){const{publicKey:S,publicKeyUncompressed:A}=i;try{const I=h.length;return b===!0&&I!==S||b===!1&&I!==A?!1:!!n.fromBytes(h)}catch{return!1}}function a(h=r(i.seed)){return db(Xn(h,i.seed,"seed"),t.ORDER)}function c(h,b=!0){return n.BASE.multiply(wo(t,h)).toBytes(b)}function u(h){const b=a(h);return{secretKey:b,publicKey:c(b)}}function d(h){if(typeof h=="bigint")return!1;if(h instanceof n)return!0;const{secretKey:b,publicKey:S,publicKeyUncompressed:A}=i;if(t.allowedLengths||b===S)return;const I=yt("key",h).length;return I===S||I===A}function p(h,b,S=!0){if(d(h)===!0)throw new Error("first arg must be private key");if(d(b)===!1)throw new Error("second arg must be public key");const A=wo(t,h);return n.fromHex(b).multiply(A).toBytes(S)}return Object.freeze({getPublicKey:c,getSharedSecret:p,keygen:u,Point:n,utils:{isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:a,isValidPrivateKey:o,randomPrivateKey:a,normPrivateKeyToScalar:h=>wo(t,h),precompute(h=8,b=n.BASE){return b.precompute(h,!1)}},lengths:i})}function vE(n,e,t={}){F0(e),Js(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||zd,i=t.hmac||((l,...f)=>nm(e,l,ar(...f))),{Fp:o,Fn:s}=n,{ORDER:a,BITS:c}=s,{keygen:u,getPublicKey:d,getSharedSecret:p,utils:w,lengths:h}=bE(n,t),b={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},S="compact";function A(l){const f=a>>Io;return l>f}function I(l,f){if(!s.isValidNot0(f))throw new Error(`invalid signature ${l}: out of range 1..Point.Fn.ORDER`);return f}function x(l,f){Wl(f);const _=h.signature,E=f==="compact"?_:f==="recovered"?_+1:void 0;return Xn(l,E,`${f} signature`)}class k{constructor(f,_,E){this.r=I("r",f),this.s=I("s",_),E!=null&&(this.recovery=E),Object.freeze(this)}static fromBytes(f,_=S){x(f,_);let E;if(_==="der"){const{r:T,s:m}=Nr.toSig(Xn(f));return new k(T,m)}_==="recovered"&&(E=f[0],_="compact",f=f.subarray(1));const N=s.BYTES,C=f.subarray(0,N),P=f.subarray(N,N*2);return new k(s.fromBytes(C),s.fromBytes(P),E)}static fromHex(f,_){return this.fromBytes(ac(f),_)}addRecoveryBit(f){return new k(this.r,this.s,f)}recoverPublicKey(f){const _=o.ORDER,{r:E,s:N,recovery:C}=this;if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");if(a*rm<_&&C>1)throw new Error("recovery id is ambiguous for h>1 curve");const T=C===2||C===3?E+a:E;if(!o.isValid(T))throw new Error("recovery id 2 or 3 invalid");const m=o.toBytes(T),M=n.fromBytes(ar(im((C&1)===0),m)),oe=s.inv(T),ne=L(yt("msgHash",f)),ue=s.create(-ne*oe),Ie=s.create(N*oe),we=n.BASE.multiplyUnsafe(ue).add(M.multiplyUnsafe(Ie));if(we.is0())throw new Error("point at infinify");return we.assertValidity(),we}hasHighS(){return A(this.s)}toBytes(f=S){if(Wl(f),f==="der")return ac(Nr.hexFromSig(this));const _=s.toBytes(this.r),E=s.toBytes(this.s);if(f==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ar(Uint8Array.of(this.recovery),_,E)}return ar(_,E)}toHex(f){return Ki(this.toBytes(f))}assertValidity(){}static fromCompact(f){return k.fromBytes(yt("sig",f),"compact")}static fromDER(f){return k.fromBytes(yt("sig",f),"der")}normalizeS(){return this.hasHighS()?new k(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ki(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ki(this.toBytes("compact"))}}const B=t.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");const _=Dc(f),E=f.length*8-c;return E>0?_>>BigInt(E):_},L=t.bits2int_modN||function(f){return s.create(B(f))},$=Xs(c);function W(l){return Ul("num < 2^"+c,l,Lr,$),s.toBytes(l)}function Y(l,f){return Xn(l,void 0,"message"),f?Xn(e(l),void 0,"prehashed message"):l}function D(l,f,_){if(["recovered","canonical"].some(ue=>ue in _))throw new Error("sign() legacy options not supported");const{lowS:E,prehash:N,extraEntropy:C}=Zu(_,b);l=Y(l,N);const P=L(l),T=wo(s,f),m=[W(T),W(P)];if(C!=null&&C!==!1){const ue=C===!0?r(h.secretKey):C;m.push(yt("extraEntropy",ue))}const M=ar(...m),oe=P;function ne(ue){const Ie=B(ue);if(!s.isValidNot0(Ie))return;const we=s.inv(Ie),ye=n.BASE.multiply(Ie).toAffine(),dt=s.create(ye.x);if(dt===Lr)return;const ze=s.create(we*s.create(oe+dt*T));if(ze===Lr)return;let He=(ye.x===dt?0:2)|Number(ye.y&Io),zn=ze;return E&&A(ze)&&(zn=s.neg(ze),He^=1),new k(dt,zn,He)}return{seed:M,k2sig:ne}}function j(l,f,_={}){l=yt("message",l);const{seed:E,k2sig:N}=D(l,f,_);return tb(e.outputLen,s.BYTES,i)(E,N)}function G(l){let f;const _=typeof l=="string"||Zs(l),E=!_&&l!==null&&typeof l=="object"&&typeof l.r=="bigint"&&typeof l.s=="bigint";if(!_&&!E)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(E)f=new k(l.r,l.s);else if(_){try{f=k.fromBytes(yt("sig",l),"der")}catch(N){if(!(N instanceof Nr.Err))throw N}if(!f)try{f=k.fromBytes(yt("sig",l),"compact")}catch{return!1}}return f||!1}function V(l,f,_,E={}){const{lowS:N,prehash:C,format:P}=Zu(E,b);if(_=yt("publicKey",_),f=Y(yt("message",f),C),"strict"in E)throw new Error("options.strict was renamed to lowS");const T=P===void 0?G(l):k.fromBytes(yt("sig",l),P);if(T===!1)return!1;try{const m=n.fromBytes(_);if(N&&T.hasHighS())return!1;const{r:M,s:oe}=T,ne=L(f),ue=s.inv(oe),Ie=s.create(ne*ue),we=s.create(M*ue),ye=n.BASE.multiplyUnsafe(Ie).add(m.multiplyUnsafe(we));return ye.is0()?!1:s.create(ye.x)===M}catch{return!1}}function v(l,f,_={}){const{prehash:E}=Zu(_,b);return f=Y(f,E),k.fromBytes(l,"recovered").recoverPublicKey(f).toBytes()}return Object.freeze({keygen:u,getPublicKey:d,getSharedSecret:p,utils:w,lengths:h,Point:n,sign:j,verify:V,recoverPublicKey:v,Signature:k,hash:e})}function EE(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},t=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0;const i=Yi(e.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),o={Fp:t,Fn:i,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:o}}function AE(n){const{CURVE:e,curveOpts:t}=EE(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:t,hash:n.hash,ecdsaOpts:r}}function RE(n,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},n,rg(t.Fn.ORDER,t.Fn.BITS))})}function SE(n){const{CURVE:e,curveOpts:t,hash:r,ecdsaOpts:i}=AE(n),o=wE(e,t),s=vE(o,r,i);return RE(n,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kE(n,e){const t=r=>SE({...n,hash:r});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cf={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},IE={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Nh=BigInt(2);function TE(n){const e=cf.p,t=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=n*n*n%e,d=u*u*n%e,p=mt(d,t,e)*d%e,w=mt(p,t,e)*d%e,h=mt(w,Nh,e)*u%e,b=mt(h,i,e)*h%e,S=mt(b,o,e)*b%e,A=mt(S,a,e)*S%e,I=mt(A,c,e)*A%e,x=mt(I,a,e)*S%e,k=mt(x,t,e)*d%e,B=mt(k,s,e)*b%e,L=mt(B,r,e)*u%e,$=mt(L,Nh,e);if(!zl.eql(zl.sqr($),n))throw new Error("Cannot find square root");return $}const zl=Yi(cf.p,{sqrt:TE}),uf=kE({...cf,Fp:zl,lowS:!0,endo:IE},V0),NE=Xo.utils.randomPrivateKey,Oh=()=>{const n=Xo.utils.randomPrivateKey(),e=mc(n),t=new Uint8Array(64);return t.set(n),t.set(e,32),{publicKey:e,secretKey:t}},mc=Xo.getPublicKey;function Ch(n){try{return Xo.ExtendedPoint.fromHex(n),!0}catch{return!1}}const lf=(n,e)=>Xo.sign(n,e.slice(0,32)),OE=Xo.verify,ke=n=>ce.Buffer.isBuffer(n)?n:n instanceof Uint8Array?ce.Buffer.from(n.buffer,n.byteOffset,n.byteLength):ce.Buffer.from(n);let df=class{constructor(e){Object.assign(this,e)}encode(){return ce.Buffer.from(wg(As,this))}static decode(e){return bg(As,this,e)}static decodeUnchecked(e){return pg(As,this,e)}};class CE extends df{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const As=new Map;var sm;const am=32,hr=32;function xE(n){return n._bn!==void 0}let xh=1;class X extends df{constructor(e){if(super({}),this._bn=void 0,xE(e))this._bn=e._bn;else{if(typeof e=="string"){const t=_t.decode(e);if(t.length!=hr)throw new Error("Invalid public key input");this._bn=new Mn(t)}else this._bn=new Mn(e);if(this._bn.byteLength()>hr)throw new Error("Invalid public key input")}}static unique(){const e=new X(xh);return xh+=1,new X(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return _t.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ce.Buffer);if(e.length===hr)return e;const t=ce.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=ce.Buffer.concat([e.toBuffer(),ce.Buffer.from(t),r.toBuffer()]),o=Eh(i);return new X(o)}static createProgramAddressSync(e,t){let r=ce.Buffer.alloc(0);e.forEach(function(o){if(o.length>am)throw new TypeError("Max seed length exceeded");r=ce.Buffer.concat([r,ke(o)])}),r=ce.Buffer.concat([r,t.toBuffer(),ce.Buffer.from("ProgramDerivedAddress")]);const i=Eh(r);if(Ch(i))throw new Error("Invalid seeds, address must fall off the curve");return new X(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,i;for(;r!=0;){try{const o=e.concat(ce.Buffer.from([r]));i=this.createProgramAddressSync(o,t)}catch(o){if(o instanceof TypeError)throw o;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new X(e);return Ch(t.toBytes())}}sm=X;X.default=new sm("11111111111111111111111111111111");As.set(X,{kind:"struct",fields:[["_bn","u256"]]});class BE{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=ke(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=ke(NE()),this._publicKey=ke(mc(this._secretKey))}get publicKey(){return new X(this._publicKey)}get secretKey(){return ce.Buffer.concat([this._secretKey,this._publicKey],64)}}const ME=new X("BPFLoader1111111111111111111111111111111111"),ui=1232,Vc=127,Ls=64;class ff extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ff.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class hf extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(hf.prototype,"name",{value:"TransactionExpiredTimeoutError"});class bo extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(bo.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Us{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((o,s)=>{r.set(o.toBase58(),s)});const i=o=>{const s=r.get(o.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return e.map(o=>({programIdIndex:i(o.programId),accountKeyIndexes:o.keys.map(s=>i(s.pubkey)),data:o.data}))}}const Te=(n="publicKey")=>Ze(32,n),PE=(n="signature")=>Ze(64,n),Bi=(n="string")=>{const e=de([fe("length"),fe("lengthPadding"),Ze(ci(fe(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(o,s)=>t(o,s).chars.toString(),i.encode=(o,s,a)=>{const c={chars:ce.Buffer.from(o,"utf8")};return r(c,s,a)},i.alloc=o=>fe().span+fe().span+ce.Buffer.from(o,"utf8").length,i},LE=(n="authorized")=>de([Te("staker"),Te("withdrawer")],n),UE=(n="lockup")=>de([xn("unixTimestamp"),xn("epoch"),Te("custodian")],n),DE=(n="voteInit")=>de([Te("nodePubkey"),Te("authorizedVoter"),Te("authorizedWithdrawer"),xe("commission")],n),FE=(n="voteAuthorizeWithSeedArgs")=>de([fe("voteAuthorizationType"),Te("currentAuthorityDerivedKeyOwnerPubkey"),Bi("currentAuthorityDerivedKeySeed"),Te("newAuthorized")],n);function cm(n,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const o=e[i.property];if(Array.isArray(o))return o.length*t(i.elementLayout)}else if("fields"in i)return cm({layout:i},e[i.property]);return 0};let r=0;return n.layout.fields.forEach(i=>{r+=t(i)}),r}function bn(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function Bn(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function Me(n,e){if(!n)throw new Error(e||"Assertion failed")}class qc{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,i=s=>{const a=s.toBase58();let c=r.get(a);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,c)),c},o=i(t);o.isSigner=!0,o.isWritable=!0;for(const s of e){i(s.programId).isInvoked=!0;for(const a of s.keys){const c=i(a.pubkey);c.isSigner||(c.isSigner=a.isSigner),c.isWritable||(c.isWritable=a.isWritable)}}return new qc(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Me(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),r=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),o=e.filter(([,c])=>!c.isSigner&&!c.isWritable),s={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:o.length};{Me(t.length>0,"Expected at least one writable signer key");const[c]=t[0];Me(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([c])=>new X(c)),...r.map(([c])=>new X(c)),...i.map(([c])=>new X(c)),...o.map(([c])=>new X(c))];return[s,a]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[i,o]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:r,readonly:o}]}drainKeysFoundInLookupTable(e,t){const r=new Array,i=new Array;for(const[o,s]of this.keyMetaMap.entries())if(t(s)){const a=new X(o),c=e.findIndex(u=>u.equals(a));c>=0&&(Me(c<256,"Max lookup table index exceeded"),r.push(c),i.push(a),this.keyMetaMap.delete(o))}return[r,i]}}const um="Reached end of buffer unexpectedly";function cr(n){if(n.length===0)throw new Error(um);return n.shift()}function vn(n,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(um);return n.splice(...e)}class nr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new X(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:_t.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Us(this.staticAccountKeys)}static compile(e){const t=qc.compile(e.instructions,e.payerKey),[r,i]=t.getMessageComponents(),s=new Us(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:_t.encode(a.data)}));return new nr({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:s})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,o=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<o}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Bn(t,e);const r=this.instructions.map(p=>{const{accounts:w,programIdIndex:h}=p,b=Array.from(_t.decode(p.data));let S=[];Bn(S,w.length);let A=[];return Bn(A,b.length),{programIdIndex:h,keyIndicesCount:ce.Buffer.from(S),keyIndices:w,dataLength:ce.Buffer.from(A),data:b}});let i=[];Bn(i,r.length);let o=ce.Buffer.alloc(ui);ce.Buffer.from(i).copy(o);let s=i.length;r.forEach(p=>{const h=de([xe("programIdIndex"),Ze(p.keyIndicesCount.length,"keyIndicesCount"),on(xe("keyIndex"),p.keyIndices.length,"keyIndices"),Ze(p.dataLength.length,"dataLength"),on(xe("userdatum"),p.data.length,"data")]).encode(p,o,s);s+=h}),o=o.slice(0,s);const a=de([Ze(1,"numRequiredSignatures"),Ze(1,"numReadonlySignedAccounts"),Ze(1,"numReadonlyUnsignedAccounts"),Ze(t.length,"keyCount"),on(Te("key"),e,"keys"),Te("recentBlockhash")]),c={numRequiredSignatures:ce.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ce.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ce.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ce.Buffer.from(t),keys:this.accountKeys.map(p=>ke(p.toBytes())),recentBlockhash:_t.decode(this.recentBlockhash)};let u=ce.Buffer.alloc(2048);const d=a.encode(c,u);return o.copy(u,d),u.slice(0,d+o.length)}static from(e){let t=[...e];const r=cr(t);if(r!==(r&Vc))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=cr(t),o=cr(t),s=bn(t);let a=[];for(let w=0;w<s;w++){const h=vn(t,0,hr);a.push(new X(ce.Buffer.from(h)))}const c=vn(t,0,hr),u=bn(t);let d=[];for(let w=0;w<u;w++){const h=cr(t),b=bn(t),S=vn(t,0,b),A=bn(t),I=vn(t,0,A),x=_t.encode(ce.Buffer.from(I));d.push({programIdIndex:h,accounts:S,data:x})}const p={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:_t.encode(ce.Buffer.from(c)),accountKeys:a,instructions:d};return new nr(p)}}class qi{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Us(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,o=this.addressTableLookups.reduce((s,a)=>s+a.writableIndexes.length,0);return i<o}else if(e>=this.header.numRequiredSignatures){const i=e-t,s=r-t-this.header.numReadonlyUnsignedAccounts;return i<s}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(o=>o.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const o of r.writableIndexes)if(o<i.state.addresses.length)t.writable.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`);for(const o of r.readonlyIndexes)if(o<i.state.addresses.length)t.readonly.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=qc.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(const d of o){const p=t.extractTableLookup(d);if(p!==void 0){const[w,{writable:h,readonly:b}]=p;r.push(w),i.writable.push(...h),i.readonly.push(...b)}}const[s,a]=t.getMessageComponents(),u=new Us(a,i).compileInstructions(e.instructions);return new qi({header:s,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:r})}serialize(){const e=Array();Bn(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();Bn(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),o=Array();Bn(o,this.addressTableLookups.length);const s=de([xe("prefix"),de([xe("numRequiredSignatures"),xe("numReadonlySignedAccounts"),xe("numReadonlyUnsignedAccounts")],"header"),Ze(e.length,"staticAccountKeysLength"),on(Te(),this.staticAccountKeys.length,"staticAccountKeys"),Te("recentBlockhash"),Ze(r.length,"instructionsLength"),Ze(t.length,"serializedInstructions"),Ze(o.length,"addressTableLookupsLength"),Ze(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(ui),u=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(d=>d.toBytes()),recentBlockhash:_t.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:i},a);return a.slice(0,u)}serializeInstructions(){let e=0;const t=new Uint8Array(ui);for(const r of this.compiledInstructions){const i=Array();Bn(i,r.accountKeyIndexes.length);const o=Array();Bn(o,r.data.length);const s=de([xe("programIdIndex"),Ze(i.length,"encodedAccountKeyIndexesLength"),on(xe(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ze(o.length,"encodedDataLength"),Ze(r.data.length,"data")]);e+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(ui);for(const r of this.addressTableLookups){const i=Array();Bn(i,r.writableIndexes.length);const o=Array();Bn(o,r.readonlyIndexes.length);const s=de([Te("accountKey"),Ze(i.length,"encodedWritableIndexesLength"),on(xe(),r.writableIndexes.length,"writableIndexes"),Ze(o.length,"encodedReadonlyIndexesLength"),on(xe(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=cr(t),i=r&Vc;Me(r!==i,"Expected versioned message but received legacy message");const o=i;Me(o===0,`Expected versioned message with version 0 but found version ${o}`);const s={numRequiredSignatures:cr(t),numReadonlySignedAccounts:cr(t),numReadonlyUnsignedAccounts:cr(t)},a=[],c=bn(t);for(let b=0;b<c;b++)a.push(new X(vn(t,0,hr)));const u=_t.encode(vn(t,0,hr)),d=bn(t),p=[];for(let b=0;b<d;b++){const S=cr(t),A=bn(t),I=vn(t,0,A),x=bn(t),k=new Uint8Array(vn(t,0,x));p.push({programIdIndex:S,accountKeyIndexes:I,data:k})}const w=bn(t),h=[];for(let b=0;b<w;b++){const S=new X(vn(t,0,hr)),A=bn(t),I=vn(t,0,A),x=bn(t),k=vn(t,0,x);h.push({accountKey:S,writableIndexes:I,readonlyIndexes:k})}return new qi({header:s,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:p,addressTableLookups:h})}}const Gc={deserializeMessageVersion(n){const e=n[0],t=e&Vc;return t===e?"legacy":t},deserialize:n=>{const e=Gc.deserializeMessageVersion(n);if(e==="legacy")return nr.from(n);if(e===0)return qi.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ir=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const WE=ce.Buffer.alloc(Ls).fill(0);class De{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ce.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ne{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new De(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let S=0;S<t.length;S++)if(t[S].programId===void 0)throw new Error(`Transaction instruction index ${S} has undefined program id`);const i=[],o=[];t.forEach(S=>{S.keys.forEach(I=>{o.push({...I})});const A=S.programId.toString();i.includes(A)||i.push(A)}),i.forEach(S=>{o.push({pubkey:new X(S),isSigner:!1,isWritable:!1})});const s=[];o.forEach(S=>{const A=S.pubkey.toString(),I=s.findIndex(x=>x.pubkey.toString()===A);I>-1?(s[I].isWritable=s[I].isWritable||S.isWritable,s[I].isSigner=s[I].isSigner||S.isSigner):s.push(S)}),s.sort(function(S,A){if(S.isSigner!==A.isSigner)return S.isSigner?-1:1;if(S.isWritable!==A.isWritable)return S.isWritable?-1:1;const I={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return S.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",I)});const a=s.findIndex(S=>S.pubkey.equals(r));if(a>-1){const[S]=s.splice(a,1);S.isSigner=!0,S.isWritable=!0,s.unshift(S)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const S of this.signatures){const A=s.findIndex(I=>I.pubkey.equals(S.publicKey));if(A>-1)s[A].isSigner||(s[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${S.publicKey.toString()}`)}let c=0,u=0,d=0;const p=[],w=[];s.forEach(({pubkey:S,isSigner:A,isWritable:I})=>{A?(p.push(S.toString()),c+=1,I||(u+=1)):(w.push(S.toString()),I||(d+=1))});const h=p.concat(w),b=t.map(S=>{const{data:A,programId:I}=S;return{programIdIndex:h.indexOf(I.toString()),accounts:S.keys.map(x=>h.indexOf(x.pubkey.toString())),data:_t.encode(A)}});return b.forEach(S=>{Me(S.programIdIndex>=0),S.accounts.forEach(A=>Me(A>=0))}),new nr({header:{numRequiredSignatures:c,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:d},accountKeys:h,recentBlockhash:e,instructions:b})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,o)=>t[o].equals(i.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const i=r.toString();return t.has(i)?!1:(t.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const o of e){const s=o.publicKey.toString();t.has(s)||(t.add(s),r.push(o))}this.signatures=r.map(o=>({signature:null,publicKey:o.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const o of e){const s=o.publicKey.toString();t.has(s)||(t.add(s),r.push(o))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(i=>{const o=lf(r,i.secretKey);this._addSignature(i.publicKey,ke(o))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Me(t.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=ce.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:i,publicKey:o}of this.signatures)i===null?t&&(r.missing||(r.missing=[])).push(o):OE(i,e,o.toBytes())||(r.invalid||(r.invalid=[])).push(o);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const o=this._getMessageSignednessErrors(i,t);if(o){let s="Signature verification failed.";throw o.invalid&&(s+=`
Invalid signature for public key${o.invalid.length===1?"":"(s)"} [\`${o.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),o.missing&&(s+=`
Missing signature for public key${o.missing.length===1?"":"(s)"} [\`${o.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(s)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,r=[];Bn(r,t.length);const i=r.length+t.length*64+e.length,o=ce.Buffer.alloc(i);return Me(t.length<256),ce.Buffer.from(r).copy(o,0),t.forEach(({signature:s},a)=>{s!==null&&(Me(s.length===64,"signature has invalid length"),ce.Buffer.from(s).copy(o,r.length+a*64))}),e.copy(o,r.length+t.length*64),Me(o.length<=ui,`Transaction too large: ${o.length} > ${ui}`),o}get keys(){return Me(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Me(this.instructions.length===1),this.instructions[0].programId}get data(){return Me(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=bn(t);let i=[];for(let o=0;o<r;o++){const s=vn(t,0,Ls);i.push(_t.encode(ce.Buffer.from(s)))}return Ne.populate(nr.from(t),i)}static populate(e,t=[]){const r=new Ne;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((i,o)=>{const s={signature:i==_t.encode(WE)?null:_t.decode(i),publicKey:e.accountKeys[o]};r.signatures.push(s)}),e.instructions.forEach(i=>{const o=i.accounts.map(s=>{const a=e.accountKeys[s];return{pubkey:a,isSigner:r.signatures.some(c=>c.publicKey.toString()===a.toString())||e.isAccountSigner(s),isWritable:e.isAccountWritable(s)}});r.instructions.push(new De({keys:o,programId:e.accountKeys[i.programIdIndex],data:_t.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class pf{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:r,compiledInstructions:i,recentBlockhash:o}=e,{numRequiredSignatures:s,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:c}=r,u=s-a;Me(u>0,"Message header is invalid");const d=e.staticAccountKeys.length-s-c;Me(d>=0,"Message header is invalid");const p=e.getAccountKeys(t),w=p.get(0);if(w===void 0)throw new Error("Failed to decompile message because no account keys were found");const h=[];for(const b of i){const S=[];for(const I of b.accountKeyIndexes){const x=p.get(I);if(x===void 0)throw new Error(`Failed to find key for account key index ${I}`);const k=I<s;let B;k?B=I<u:I<p.staticAccountKeys.length?B=I-s<d:B=I-p.staticAccountKeys.length<p.accountKeysFromLookups.writable.length,S.push({pubkey:x,isSigner:I<r.numRequiredSignatures,isWritable:B})}const A=p.get(b.programIdIndex);if(A===void 0)throw new Error(`Failed to find program id for program id index ${b.programIdIndex}`);h.push(new De({programId:A,data:ke(b.data),keys:S}))}return new pf({payerKey:w,instructions:h,recentBlockhash:o})}compileToLegacyMessage(){return nr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return qi.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Fo{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Me(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array(Ls));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Bn(t,this.signatures.length);const r=de([Ze(t.length,"encodedSignaturesLength"),on(PE(),this.signatures.length,"signatures"),Ze(e.length,"serializedMessage")]),i=new Uint8Array(2048),o=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,o)}static deserialize(e){let t=[...e];const r=[],i=bn(t);for(let s=0;s<i;s++)r.push(new Uint8Array(vn(t,0,Ls)));const o=Gc.deserialize(new Uint8Array(t));return new Fo(o,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const o=r.findIndex(s=>s.equals(i.publicKey));Me(o>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[o]=lf(t,i.secretKey)}}addSignature(e,t){Me(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(e));Me(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const zE=160,HE=64,KE=zE/HE,lm=1e3/KE,or=new X("SysvarC1ock11111111111111111111111111111111"),$E=new X("SysvarEpochSchedu1e111111111111111111111111"),VE=new X("Sysvar1nstructions1111111111111111111111111"),Da=new X("SysvarRecentB1ockHashes11111111111111111111"),Wo=new X("SysvarRent111111111111111111111111111111111"),qE=new X("SysvarRewards111111111111111111111111111111"),GE=new X("SysvarS1otHashes111111111111111111111111111"),jE=new X("SysvarS1otHistory11111111111111111111111111"),Fa=new X("SysvarStakeHistory1111111111111111111111111");class gi extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:i}){const o=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${r}. `+o+s;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+o+s;break;default:a=`Unknown action '${(c=>c)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const o=i.meta.logMessages;this.transactionLogs=o,t(o)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const YE={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class pe extends Error{constructor({code:e,message:t,data:r},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function Hl(n,e,t,r){const i=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},o=await n.sendTransaction(e,t,i);let s;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)s=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:a}=e.nonceInfo,c=a.keys[0].pubkey;s=(await n.confirmTransaction({abortSignal:r==null?void 0:r.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:e.nonceInfo.nonce,signature:o},r&&r.commitment)).value}else(r==null?void 0:r.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await n.confirmTransaction(o,r&&r.commitment)).value;if(s.err)throw o!=null?new gi({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(s)})`}):new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function Ni(n){return new Promise(e=>setTimeout(e,n))}function Ce(n,e){const t=n.layout.span>=0?n.layout.span:cm(n,e),r=ce.Buffer.alloc(t),i=Object.assign({instruction:n.index},e);return n.layout.encode(i,r),r}function Le(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${n.index}`);return t}const dm=Qt("lamportsPerSignature"),fm=de([fe("version"),fe("state"),Te("authorizedPubkey"),Te("nonce"),de([dm],"feeCalculator")]),Kl=fm.span;class jc{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=fm.decode(ke(e),0);return new jc({authorizedPubkey:new X(t.authorizedPubkey),nonce:new X(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function zo(n){const e=Ze(8,n),t=e.decode.bind(e),r=e.encode.bind(e),i=e,o=Ev();return i.decode=(s,a)=>{const c=t(s,a);return o.decode(c)},i.encode=(s,a,c)=>{const u=o.encode(s);return r(u,a,c)},i}class ZE{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=fe("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(qe))if(s.index==r){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:i}=Le(qe.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new X(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Le(qe.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:i}=Le(qe.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new X(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Le(qe.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:i,programId:o}=Le(qe.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new X(t),seed:r,space:i,programId:new X(o)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Le(qe.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new X(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:i}=Le(qe.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new X(t),seed:r,programId:new X(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:i,space:o,programId:s}=Le(qe.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new X(t),seed:r,lamports:i,space:o,programId:new X(s)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Le(qe.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new X(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Le(qe.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Le(qe.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Le(qe.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new X(t)}}static checkProgramId(e){if(!e.equals(vt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const qe=Object.freeze({Create:{index:0,layout:de([fe("instruction"),xn("lamports"),xn("space"),Te("programId")])},Assign:{index:1,layout:de([fe("instruction"),Te("programId")])},Transfer:{index:2,layout:de([fe("instruction"),zo("lamports")])},CreateWithSeed:{index:3,layout:de([fe("instruction"),Te("base"),Bi("seed"),xn("lamports"),xn("space"),Te("programId")])},AdvanceNonceAccount:{index:4,layout:de([fe("instruction")])},WithdrawNonceAccount:{index:5,layout:de([fe("instruction"),xn("lamports")])},InitializeNonceAccount:{index:6,layout:de([fe("instruction"),Te("authorized")])},AuthorizeNonceAccount:{index:7,layout:de([fe("instruction"),Te("authorized")])},Allocate:{index:8,layout:de([fe("instruction"),xn("space")])},AllocateWithSeed:{index:9,layout:de([fe("instruction"),Te("base"),Bi("seed"),xn("space"),Te("programId")])},AssignWithSeed:{index:10,layout:de([fe("instruction"),Te("base"),Bi("seed"),Te("programId")])},TransferWithSeed:{index:11,layout:de([fe("instruction"),zo("lamports"),Bi("seed"),Te("programId")])},UpgradeNonceAccount:{index:12,layout:de([fe("instruction")])}});class vt{constructor(){}static createAccount(e){const t=qe.Create,r=Ce(t,{lamports:e.lamports,space:e.space,programId:ke(e.programId.toBuffer())});return new De({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){const i=qe.TransferWithSeed;t=Ce(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:ke(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=qe.Transfer;t=Ce(i,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new De({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){const i=qe.AssignWithSeed;t=Ce(i,{base:ke(e.basePubkey.toBuffer()),seed:e.seed,programId:ke(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=qe.Assign;t=Ce(i,{programId:ke(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new De({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=qe.CreateWithSeed,r=Ce(t,{base:ke(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ke(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new De({keys:i,programId:this.programId,data:r})}static createNonceAccount(e){const t=new Ne;"basePubkey"in e&&"seed"in e?t.add(vt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Kl,programId:this.programId})):t.add(vt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Kl,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=qe.InitializeNonceAccount,r=Ce(t,{authorized:ke(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Da,isSigner:!1,isWritable:!1},{pubkey:Wo,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new De(i)}static nonceAdvance(e){const t=qe.AdvanceNonceAccount,r=Ce(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Da,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new De(i)}static nonceWithdraw(e){const t=qe.WithdrawNonceAccount,r=Ce(t,{lamports:e.lamports});return new De({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Da,isSigner:!1,isWritable:!1},{pubkey:Wo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){const t=qe.AuthorizeNonceAccount,r=Ce(t,{authorized:ke(e.newAuthorizedPubkey.toBuffer())});return new De({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){const i=qe.AllocateWithSeed;t=Ce(i,{base:ke(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ke(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=qe.Allocate;t=Ce(i,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new De({keys:r,programId:this.programId,data:t})}}vt.programId=new X("11111111111111111111111111111111");const XE=ui-300;class Gi{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Gi.chunkSize)+1+1)}static async load(e,t,r,i,o){{const p=await e.getMinimumBalanceForRentExemption(o.length),w=await e.getAccountInfo(r.publicKey,"confirmed");let h=null;if(w!==null){if(w.executable)return console.error("Program load failed, account is already executable"),!1;w.data.length!==o.length&&(h=h||new Ne,h.add(vt.allocate({accountPubkey:r.publicKey,space:o.length}))),w.owner.equals(i)||(h=h||new Ne,h.add(vt.assign({accountPubkey:r.publicKey,programId:i}))),w.lamports<p&&(h=h||new Ne,h.add(vt.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:p-w.lamports})))}else h=new Ne().add(vt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:p>0?p:1,space:o.length,programId:i}));h!==null&&await Hl(e,h,[t,r],{commitment:"confirmed"})}const s=de([fe("instruction"),fe("offset"),fe("bytesLength"),fe("bytesLengthPadding"),on(xe("byte"),ci(fe(),-8),"bytes")]),a=Gi.chunkSize;let c=0,u=o,d=[];for(;u.length>0;){const p=u.slice(0,a),w=ce.Buffer.alloc(a+16);s.encode({instruction:0,offset:c,bytes:p,bytesLength:0,bytesLengthPadding:0},w);const h=new Ne().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:w});d.push(Hl(e,h,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await Ni(1e3/4),c+=a,u=u.slice(a)}await Promise.all(d);{const p=de([fe("instruction")]),w=ce.Buffer.alloc(p.span);p.encode({instruction:1},w);const h=new Ne().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Wo,isSigner:!1,isWritable:!1}],programId:i,data:w}),b="processed",S=await e.sendTransaction(h,[t,r],{preflightCommitment:b}),{context:A,value:I}=await e.confirmTransaction({signature:S,lastValidBlockHeight:h.lastValidBlockHeight,blockhash:h.recentBlockhash},b);if(I.err)throw new Error(`Transaction ${S} failed (${JSON.stringify(I)})`);for(;;){try{if(await e.getSlot({commitment:b})>A.slot)break}catch{}await new Promise(x=>setTimeout(x,Math.round(lm/2)))}}return!0}}Gi.chunkSize=XE;const JE=new X("BPFLoader2111111111111111111111111111111111");class QE{static getMinNumSignatures(e){return Gi.getMinNumSignatures(e)}static load(e,t,r,i,o){return Gi.load(e,t,r,o,i)}}function eA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xu,Bh;function tA(){if(Bh)return Xu;Bh=1;var n=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var o in r)i.push(o);return i};function t(r,i){var o,s,a,c,u,d,p;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),i);if(p=n.call(r),p==="[object Array]"){for(a="[",s=r.length-1,o=0;o<s;o++)a+=t(r[o],!0)+",";return s>-1&&(a+=t(r[o],!0)),a+"]"}else if(p==="[object Object]"){for(c=e(r).sort(),s=c.length,a="",o=0;o<s;)u=c[o],d=t(r[u],!1),d!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+d),o++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Xu=function(r){var i=t(r,!1);if(i!==void 0)return""+i},Xu}var nA=tA(),Mh=eA(nA);const ds=32;function Ju(n){let e=0;for(;n>1;)n/=2,e++;return e}function rA(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class hm{constructor(e,t,r,i,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=o}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Ju(rA(e+ds+1))-Ju(ds)-1,r=this.getSlotsInEpoch(t),i=e-(r-ds);return[t,i]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+r,o=t%this.slotsPerEpoch;return[i,o]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*ds:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ju(ds)):this.slotsPerEpoch}}var iA=globalThis.fetch;class oA extends sE{constructor(e,t,r){const i=o=>{const s=iE(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in s?this.underlyingSocket=s.socket:this.underlyingSocket=s,s};super(i,e,t,r),this.underlyingSocket=void 0}call(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function sA(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}const Ph=56;class $l{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=sA(aA,e),r=e.length-Ph;Me(r>=0,"lookup table is invalid"),Me(r%32===0,"lookup table is invalid");const i=r/32,{addresses:o}=de([on(Te(),i,"addresses")]).decode(e.slice(Ph));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new X(t.authority[0]):void 0,addresses:o.map(s=>new X(s))}}}const aA={index:1,layout:de([fe("typeIndex"),zo("deactivationSlot"),Qt("lastExtendedSlot"),xe("lastExtendedStartIndex"),xe(),on(Te(),ci(xe(),-1),"authority")])},cA=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function uA(n){const e=n.match(cA);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,i,o]=e,s=n.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),c=a==null?"":`:${a+1}`;return`${s}//${r}${c}${o}`}const lt=ta(of(X),te(),n=>new X(n)),pm=sf([te(),ct("base64")]),gf=ta(of(ce.Buffer),pm,n=>ce.Buffer.from(n[0],"base64")),gm=30*1e3;function lA(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function $e(n){let e,t;if(typeof n=="string")e=n;else if(n){const{commitment:r,...i}=n;e=r,t=i}return{commitment:e,config:t}}function Lh(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function mm(n){return mn([Q({jsonrpc:ct("2.0"),id:te(),result:n}),Q({jsonrpc:ct("2.0"),id:te(),error:Q({code:es(),message:te(),data:ge(Tv())})})])}const dA=mm(es());function Se(n){return ta(mm(n),dA,e=>"error"in e?e:{...e,result:re(e.result,n)})}function wt(n){return Se(Q({context:Q({slot:H()}),value:n}))}function Yc(n){return Q({context:Q({slot:H()}),value:n})}function Qu(n,e){return n===0?new qi({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new X(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:_t.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new nr(e)}const fA=Q({foundation:H(),foundationTerm:H(),initial:H(),taper:H(),terminal:H()}),hA=Se(se(ae(Q({epoch:H(),effectiveSlot:H(),amount:H(),postBalance:H(),commission:ge(ae(H()))})))),pA=se(Q({slot:H(),prioritizationFee:H()})),gA=Q({total:H(),validator:H(),foundation:H(),epoch:H()}),mA=Q({epoch:H(),slotIndex:H(),slotsInEpoch:H(),absoluteSlot:H(),blockHeight:ge(H()),transactionCount:ge(H())}),yA=Q({slotsPerEpoch:H(),leaderScheduleSlotOffset:H(),warmup:pr(),firstNormalEpoch:H(),firstNormalSlot:H()}),_A=Kg(te(),se(H())),Ji=ae(mn([Q({}),te()])),wA=Q({err:Ji}),bA=ct("receivedSignature"),vA=Q({"solana-core":te(),"feature-set":ge(H())}),EA=Q({program:te(),programId:lt,parsed:es()}),AA=Q({programId:lt,accounts:se(lt),data:te()}),Uh=wt(Q({err:ae(mn([Q({}),te()])),logs:ae(se(te())),accounts:ge(ae(se(ae(Q({executable:pr(),owner:te(),lamports:H(),data:se(te()),rentEpoch:ge(H())}))))),unitsConsumed:ge(H()),returnData:ge(ae(Q({programId:te(),data:sf([te(),ct("base64")])}))),innerInstructions:ge(ae(se(Q({index:H(),instructions:se(mn([EA,AA]))}))))})),RA=wt(Q({byIdentity:Kg(te(),se(H())),range:Q({firstSlot:H(),lastSlot:H()})}));function SA(n,e,t,r,i,o){const s=t||iA;let a;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return r&&(c=async(d,p)=>{const w=await new Promise((h,b)=>{try{r(d,p,(S,A)=>h([S,A]))}catch(S){b(S)}});return await s(...w)}),new tE(async(d,p)=>{const w={method:"POST",body:d,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},SR)};try{let h=5,b,S=500;for(;c?b=await c(n,w):b=await s(n,w),!(b.status!==429||i===!0||(h-=1,h===0));)console.error(`Server responded with ${b.status} ${b.statusText}.  Retrying after ${S}ms delay...`),await Ni(S),S*=2;const A=await b.text();b.ok?p(null,A):p(new Error(`${b.status} ${b.statusText}: ${A}`))}catch(h){h instanceof Error&&p(h)}},{})}function kA(n){return(e,t)=>new Promise((r,i)=>{n.request(e,t,(o,s)=>{if(o){i(o);return}r(s)})})}function IA(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);const i=e.map(o=>n.request(o.methodName,o.args));n.request(i,(o,s)=>{if(o){r(o);return}t(s)})})}const TA=Se(fA),NA=Se(gA),OA=Se(pA),CA=Se(mA),xA=Se(yA),BA=Se(_A),MA=Se(H()),PA=wt(Q({total:H(),circulating:H(),nonCirculating:H(),nonCirculatingAccounts:se(lt)})),Vl=Q({amount:te(),uiAmount:ae(H()),decimals:H(),uiAmountString:ge(te())}),LA=wt(se(Q({address:lt,amount:te(),uiAmount:ae(H()),decimals:H(),uiAmountString:ge(te())}))),UA=wt(se(Q({pubkey:lt,account:Q({executable:pr(),owner:lt,lamports:H(),data:gf,rentEpoch:H()})}))),ql=Q({program:te(),parsed:es(),space:H()}),DA=wt(se(Q({pubkey:lt,account:Q({executable:pr(),owner:lt,lamports:H(),data:ql,rentEpoch:H()})}))),FA=wt(se(Q({lamports:H(),address:lt}))),Ds=Q({executable:pr(),owner:lt,lamports:H(),data:gf,rentEpoch:H()}),WA=Q({pubkey:lt,account:Ds}),zA=ta(mn([of(ce.Buffer),ql]),mn([pm,ql]),n=>Array.isArray(n)?re(n,gf):n),Gl=Q({executable:pr(),owner:lt,lamports:H(),data:zA,rentEpoch:H()}),HA=Q({pubkey:lt,account:Gl}),KA=Q({state:mn([ct("active"),ct("inactive"),ct("activating"),ct("deactivating")]),active:H(),inactive:H()}),$A=Se(se(Q({signature:te(),slot:H(),err:Ji,memo:ae(te()),blockTime:ge(ae(H()))}))),VA=Se(se(Q({signature:te(),slot:H(),err:Ji,memo:ae(te()),blockTime:ge(ae(H()))}))),qA=Q({subscription:H(),result:Yc(Ds)}),GA=Q({pubkey:lt,account:Ds}),jA=Q({subscription:H(),result:Yc(GA)}),YA=Q({parent:H(),slot:H(),root:H()}),ZA=Q({subscription:H(),result:YA}),XA=mn([Q({type:mn([ct("firstShredReceived"),ct("completed"),ct("optimisticConfirmation"),ct("root")]),slot:H(),timestamp:H()}),Q({type:ct("createdBank"),parent:H(),slot:H(),timestamp:H()}),Q({type:ct("frozen"),slot:H(),timestamp:H(),stats:Q({numTransactionEntries:H(),numSuccessfulTransactions:H(),numFailedTransactions:H(),maxTransactionsPerEntry:H()})}),Q({type:ct("dead"),slot:H(),timestamp:H(),err:te()})]),JA=Q({subscription:H(),result:XA}),QA=Q({subscription:H(),result:Yc(mn([wA,bA]))}),eR=Q({subscription:H(),result:H()}),tR=Q({pubkey:te(),gossip:ae(te()),tpu:ae(te()),rpc:ae(te()),version:ae(te())}),Dh=Q({votePubkey:te(),nodePubkey:te(),activatedStake:H(),epochVoteAccount:pr(),epochCredits:se(sf([H(),H(),H()])),commission:H(),lastVote:H(),rootSlot:ae(H())}),nR=Se(Q({current:se(Dh),delinquent:se(Dh)})),rR=mn([ct("processed"),ct("confirmed"),ct("finalized")]),iR=Q({slot:H(),confirmations:ae(H()),err:Ji,confirmationStatus:ge(rR)}),oR=wt(se(ae(iR))),sR=Se(H()),ym=Q({accountKey:lt,writableIndexes:se(H()),readonlyIndexes:se(H())}),mf=Q({signatures:se(te()),message:Q({accountKeys:se(te()),header:Q({numRequiredSignatures:H(),numReadonlySignedAccounts:H(),numReadonlyUnsignedAccounts:H()}),instructions:se(Q({accounts:se(H()),data:te(),programIdIndex:H()})),recentBlockhash:te(),addressTableLookups:ge(se(ym))})}),_m=Q({pubkey:lt,signer:pr(),writable:pr(),source:ge(mn([ct("transaction"),ct("lookupTable")]))}),wm=Q({accountKeys:se(_m),signatures:se(te())}),bm=Q({parsed:es(),program:te(),programId:lt}),vm=Q({accounts:se(lt),data:te(),programId:lt}),aR=mn([vm,bm]),cR=mn([Q({parsed:es(),program:te(),programId:te()}),Q({accounts:se(te()),data:te(),programId:te()})]),Em=ta(aR,cR,n=>"accounts"in n?re(n,vm):re(n,bm)),Am=Q({signatures:se(te()),message:Q({accountKeys:se(_m),instructions:se(Em),recentBlockhash:te(),addressTableLookups:ge(ae(se(ym)))})}),yc=Q({accountIndex:H(),mint:te(),owner:ge(te()),programId:ge(te()),uiTokenAmount:Vl}),Rm=Q({writable:se(lt),readonly:se(lt)}),Zc=Q({err:Ji,fee:H(),innerInstructions:ge(ae(se(Q({index:H(),instructions:se(Q({accounts:se(H()),data:te(),programIdIndex:H()}))})))),preBalances:se(H()),postBalances:se(H()),logMessages:ge(ae(se(te()))),preTokenBalances:ge(ae(se(yc))),postTokenBalances:ge(ae(se(yc))),loadedAddresses:ge(Rm),computeUnitsConsumed:ge(H()),costUnits:ge(H())}),yf=Q({err:Ji,fee:H(),innerInstructions:ge(ae(se(Q({index:H(),instructions:se(Em)})))),preBalances:se(H()),postBalances:se(H()),logMessages:ge(ae(se(te()))),preTokenBalances:ge(ae(se(yc))),postTokenBalances:ge(ae(se(yc))),loadedAddresses:ge(Rm),computeUnitsConsumed:ge(H()),costUnits:ge(H())}),ts=mn([ct(0),ct("legacy")]),Qi=Q({pubkey:te(),lamports:H(),postBalance:ae(H()),rewardType:ae(te()),commission:ge(ae(H()))}),uR=Se(ae(Q({blockhash:te(),previousBlockhash:te(),parentSlot:H(),transactions:se(Q({transaction:mf,meta:ae(Zc),version:ge(ts)})),rewards:ge(se(Qi)),blockTime:ae(H()),blockHeight:ae(H())}))),lR=Se(ae(Q({blockhash:te(),previousBlockhash:te(),parentSlot:H(),rewards:ge(se(Qi)),blockTime:ae(H()),blockHeight:ae(H())}))),dR=Se(ae(Q({blockhash:te(),previousBlockhash:te(),parentSlot:H(),transactions:se(Q({transaction:wm,meta:ae(Zc),version:ge(ts)})),rewards:ge(se(Qi)),blockTime:ae(H()),blockHeight:ae(H())}))),fR=Se(ae(Q({blockhash:te(),previousBlockhash:te(),parentSlot:H(),transactions:se(Q({transaction:Am,meta:ae(yf),version:ge(ts)})),rewards:ge(se(Qi)),blockTime:ae(H()),blockHeight:ae(H())}))),hR=Se(ae(Q({blockhash:te(),previousBlockhash:te(),parentSlot:H(),transactions:se(Q({transaction:wm,meta:ae(yf),version:ge(ts)})),rewards:ge(se(Qi)),blockTime:ae(H()),blockHeight:ae(H())}))),pR=Se(ae(Q({blockhash:te(),previousBlockhash:te(),parentSlot:H(),rewards:ge(se(Qi)),blockTime:ae(H()),blockHeight:ae(H())}))),gR=Se(ae(Q({blockhash:te(),previousBlockhash:te(),parentSlot:H(),transactions:se(Q({transaction:mf,meta:ae(Zc)})),rewards:ge(se(Qi)),blockTime:ae(H())}))),Fh=Se(ae(Q({blockhash:te(),previousBlockhash:te(),parentSlot:H(),signatures:se(te()),blockTime:ae(H())}))),el=Se(ae(Q({slot:H(),meta:ae(Zc),blockTime:ge(ae(H())),transaction:mf,version:ge(ts)}))),Sa=Se(ae(Q({slot:H(),transaction:Am,meta:ae(yf),blockTime:ge(ae(H())),version:ge(ts)}))),mR=wt(Q({blockhash:te(),lastValidBlockHeight:H()})),yR=wt(pr()),_R=Q({slot:H(),numTransactions:H(),numSlots:H(),samplePeriodSecs:H()}),wR=Se(se(_R)),bR=wt(ae(Q({feeCalculator:Q({lamportsPerSignature:H()})}))),vR=Se(te()),ER=Se(te()),AR=Q({err:Ji,logs:se(te()),signature:te()}),RR=Q({result:Yc(AR),subscription:H()}),SR={"solana-client":"js/1.0.0-maintenance"};class Sm{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async d=>{const{commitment:p,config:w}=$e(d),h=this._buildArgs([],p,void 0,w),b=Mh(h);return u[b]=u[b]??(async()=>{try{const S=await this._rpcRequest("getBlockHeight",h),A=re(S,Se(H()));if("error"in A)throw new pe(A.error,"failed to get block height information");return A.result}finally{delete u[b]}})(),await u[b]}})();let r,i,o,s,a,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,i=t.httpHeaders,o=t.fetch,s=t.fetchMiddleware,a=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=lA(e),this._rpcWsEndpoint=r||uA(e),this._rpcClient=SA(e,i,o,s,a,c),this._rpcRequest=kA(this._rpcClient),this._rpcBatchRequest=IA(this._rpcClient),this._rpcWebSocket=new oA(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:i}=$e(t),o=this._buildArgs([e.toBase58()],r,void 0,i),s=await this._rpcRequest("getBalance",o),a=re(s,wt(H()));if("error"in a)throw new pe(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=re(t,Se(ae(H())));if("error"in r)throw new pe(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=re(e,Se(H()));if("error"in t)throw new pe(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=re(e,MA);if("error"in t)throw new pe(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),i=re(r,PA);if("error"in i)throw new pe(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",r),o=re(i,wt(Vl));if("error"in o)throw new pe(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",r),o=re(i,wt(Vl));if("error"in o)throw new pe(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(e,t,r){const{commitment:i,config:o}=$e(r);let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const a=this._buildArgs(s,i,"base64",o),c=await this._rpcRequest("getTokenAccountsByOwner",a),u=re(c,UA);if("error"in u)throw new pe(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,t,r){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const o=this._buildArgs(i,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",o),a=re(s,DA);if("error"in a)throw new pe(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",r),o=re(i,FA);if("error"in o)throw new pe(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",r),o=re(i,LA);if("error"in o)throw new pe(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:i}=$e(t),o=this._buildArgs([e.toBase58()],r,"base64",i),s=await this._rpcRequest("getAccountInfo",o),a=re(s,wt(ae(Ds)));if("error"in a)throw new pe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:r,config:i}=$e(t),o=this._buildArgs([e.toBase58()],r,"jsonParsed",i),s=await this._rpcRequest("getAccountInfo",o),a=re(s,wt(ae(Gl)));if("error"in a)throw new pe(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:i}=$e(t),o=e.map(u=>u.toBase58()),s=this._buildArgs([o],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",s),c=re(a,wt(se(ae(Gl))));if("error"in c)throw new pe(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:i}=$e(t),o=e.map(u=>u.toBase58()),s=this._buildArgs([o],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",s),c=re(a,wt(se(ae(Ds))));if("error"in c)throw new pe(c.error,`failed to get info for accounts ${o}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:i,config:o}=$e(t),s=this._buildArgs([e.toBase58()],i,void 0,{...o,epoch:r??(o==null?void 0:o.epoch)}),a=await this._rpcRequest("getStakeActivation",s),c=re(a,Se(KA));if("error"in c)throw new pe(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:r,config:i}=$e(t),{encoding:o,...s}=i||{},a=this._buildArgs([e.toBase58()],r,o||"base64",{...s,...s.filters?{filters:Lh(s.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",a),u=se(WA),d=s.withContext===!0?re(c,wt(u)):re(c,Se(u));if("error"in d)throw new pe(d.error,`failed to get accounts owned by program ${e.toBase58()}`);return d.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:i}=$e(t),o=this._buildArgs([e.toBase58()],r,"jsonParsed",i),s=await this._rpcRequest("getProgramAccounts",o),a=re(s,Se(se(HA)));if("error"in a)throw new pe(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){var o;let r;if(typeof e=="string")r=e;else{const s=e;if((o=s.abortSignal)!=null&&o.aborted)return Promise.reject(s.abortSignal.reason);r=s.signature}let i;try{i=_t.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Me(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,i,o=!1;const s=new Promise((c,u)=>{try{r=this.onSignature(t,(p,w)=>{r=void 0;const h={context:w,value:p};c({__type:Ir.PROCESSED,response:h})},e);const d=new Promise(p=>{r==null?p():i=this._onSubscriptionStateChange(r,w=>{w==="subscribed"&&p()})});(async()=>{if(await d,o)return;const p=await this.getSignatureStatus(t);if(o||p==null)return;const{context:w,value:h}=p;if(h!=null)if(h!=null&&h.err)u(h.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(h.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(h.confirmationStatus==="processed"||h.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,c({__type:Ir.PROCESSED,response:{context:w,value:h}})}})()}catch(d){u(d)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:i}}){let o=!1;const s=new Promise(p=>{const w=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let h=await w();if(!o){for(;h<=r;)if(await Ni(1e3),o||(h=await w(),o))return;p({__type:Ir.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),u=this.getCancellationPromise(t);let d;try{const p=await Promise.race([u,c,s]);if(p.__type===Ir.PROCESSED)d=p.response;else throw new ff(i)}finally{o=!0,a()}return d}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:i,nonceValue:o,signature:s}}){let a=!1;const c=new Promise(h=>{let b=o,S=null;const A=async()=>{try{const{context:I,value:x}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return S=I.slot,x==null?void 0:x.nonce}catch{return b}};(async()=>{if(b=await A(),!a)for(;;){if(o!==b){h({__type:Ir.NONCE_INVALID,slotInWhichNonceDidAdvance:S});return}if(await Ni(2e3),a||(b=await A(),a))return}})()}),{abortConfirmation:u,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),p=this.getCancellationPromise(t);let w;try{const h=await Promise.race([p,d,c]);if(h.__type===Ir.PROCESSED)w=h.response;else{let b;for(;;){const S=await this.getSignatureStatus(s);if(S==null)break;if(S.context.slot<(h.slotInWhichNonceDidAdvance??r)){await Ni(400);continue}b=S;break}if(b!=null&&b.value){const S=e||"finalized",{confirmationStatus:A}=b.value;switch(S){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new bo(s);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new bo(s);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new bo(s);break;default:}w={context:b.context,value:{err:b.value.err}}}else throw new bo(s)}}finally{a=!0,u()}return w}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const i=new Promise(c=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>c({__type:Ir.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const c=await Promise.race([s,i]);if(c.__type===Ir.PROCESSED)a=c.response;else throw new hf(t,c.timeoutMs/1e3)}finally{clearTimeout(r),o()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=re(e,Se(se(tR)));if("error"in t)throw new pe(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),i=re(r,nR);if("error"in i)throw new pe(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:r}=$e(e),i=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getSlot",i),s=re(o,Se(H()));if("error"in s)throw new pe(s.error,"failed to get slot");return s.result}async getSlotLeader(e){const{commitment:t,config:r}=$e(e),i=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getSlotLeader",i),s=re(o,Se(te()));if("error"in s)throw new pe(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(e,t){const r=[e,t],i=await this._rpcRequest("getSlotLeaders",r),o=re(i,Se(se(lt)));if("error"in o)throw new pe(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(e,t){const{context:r,value:i}=await this.getSignatureStatuses([e],t);Me(i.length===1);const o=i[0];return{context:r,value:o}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const i=await this._rpcRequest("getSignatureStatuses",r),o=re(i,oR);if("error"in o)throw new pe(o.error,"failed to get signature status");return o.result}async getTransactionCount(e){const{commitment:t,config:r}=$e(e),i=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getTransactionCount",i),s=re(o,Se(H()));if("error"in s)throw new pe(s.error,"failed to get transaction count");return s.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),i=re(r,TA);if("error"in i)throw new pe(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,r){const{commitment:i,config:o}=$e(r),s=this._buildArgs([e.map(u=>u.toBase58())],i,void 0,{...o,epoch:t??(o==null?void 0:o.epoch)}),a=await this._rpcRequest("getInflationReward",s),c=re(a,hA);if("error"in c)throw new pe(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=re(e,NA);if("error"in t)throw new pe(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=$e(e),i=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getEpochInfo",i),s=re(o,CA);if("error"in s)throw new pe(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=re(e,xA);if("error"in t)throw new pe(t.error,"failed to get epoch schedule");const r=t.result;return new hm(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=re(e,BA);if("error"in t)throw new pe(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),o=re(i,sR);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=re(t,wR);if("error"in r)throw new pe(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),o=re(i,bR);if("error"in o)throw new pe(o.error,"failed to get fee calculator");const{context:s,value:a}=o.result;return{context:s,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const r=ke(e.serialize()).toString("base64"),i=this._buildArgs([r],t),o=await this._rpcRequest("getFeeForMessage",i),s=re(o,wt(ae(H())));if("error"in s)throw new pe(s.error,"failed to get fee for message");if(s.result===null)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(e){var s;const t=(s=e==null?void 0:e.lockedWritableAccounts)==null?void 0:s.map(a=>a.toBase58()),r=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),o=re(i,OA);if("error"in o)throw new pe(o.error,"failed to get recent prioritization fees");return o.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=$e(e),i=this._buildArgs([],t,void 0,r),o=await this._rpcRequest("getLatestBlockhash",i),s=re(o,mR);if("error"in s)throw new pe(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(e,t){const{commitment:r,config:i}=$e(t),o=this._buildArgs([e],r,void 0,i),s=await this._rpcRequest("isBlockhashValid",o),a=re(s,yR);if("error"in a)throw new pe(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=re(e,Se(vA));if("error"in t)throw new pe(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=re(e,Se(te()));if("error"in t)throw new pe(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:i}=$e(t),o=this._buildArgsAtLeastConfirmed([e],r,void 0,i),s=await this._rpcRequest("getBlock",o);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=re(s,dR);if("error"in a)throw a.error;return a.result}case"none":{const a=re(s,lR);if("error"in a)throw a.error;return a.result}default:{const a=re(s,uR);if("error"in a)throw a.error;const{result:c}=a;return c?{...c,transactions:c.transactions.map(({transaction:u,meta:d,version:p})=>({meta:d,transaction:{...u,message:Qu(p,u.message)},version:p}))}:null}}}catch(a){throw new pe(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:i}=$e(t),o=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),s=await this._rpcRequest("getBlock",o);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=re(s,hR);if("error"in a)throw a.error;return a.result}case"none":{const a=re(s,pR);if("error"in a)throw a.error;return a.result}default:{const a=re(s,fR);if("error"in a)throw a.error;return a.result}}}catch(a){throw new pe(a,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...c}=e;r=a,t=c}const i=this._buildArgs([],r,"base64",t),o=await this._rpcRequest("getBlockProduction",i),s=re(o,RA);if("error"in s)throw new pe(s.error,"failed to get block production information");return s.result}async getTransaction(e,t){const{commitment:r,config:i}=$e(t),o=this._buildArgsAtLeastConfirmed([e],r,void 0,i),s=await this._rpcRequest("getTransaction",o),a=re(s,el);if("error"in a)throw new pe(a.error,"failed to get transaction");const c=a.result;return c&&{...c,transaction:{...c.transaction,message:Qu(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:i}=$e(t),o=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),s=await this._rpcRequest("getTransaction",o),a=re(s,Sa);if("error"in a)throw new pe(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:r,config:i}=$e(t),o=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(o)).map(c=>{const u=re(c,Sa);if("error"in u)throw new pe(u.error,"failed to get transactions");return u.result})}async getTransactions(e,t){const{commitment:r,config:i}=$e(t),o=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],r,void 0,i)}));return(await this._rpcBatchRequest(o)).map(c=>{const u=re(c,el);if("error"in u)throw new pe(u.error,"failed to get transactions");const d=u.result;return d&&{...d,transaction:{...d.transaction,message:Qu(d.version,d.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",r),o=re(i,gR);if("error"in o)throw new pe(o.error,"failed to get confirmed block");const s=o.result;if(!s)throw new Error("Confirmed block "+e+" not found");const a={...s,transactions:s.transactions.map(({transaction:c,meta:u})=>{const d=new nr(c.message);return{meta:u,transaction:{...c,message:d}}})};return{...a,transactions:a.transactions.map(({transaction:c,meta:u})=>({meta:u,transaction:Ne.populate(c.message,c.signatures)}))}}async getBlocks(e,t,r){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),o=await this._rpcRequest("getBlocks",i),s=re(o,Se(se(H())));if("error"in s)throw new pe(s.error,"failed to get blocks");return s.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),o=re(i,Fh);if("error"in o)throw new pe(o.error,"failed to get block");const s=o.result;if(!s)throw new Error("Block "+e+" not found");return s}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),o=re(i,Fh);if("error"in o)throw new pe(o.error,"failed to get confirmed block");const s=o.result;if(!s)throw new Error("Confirmed block "+e+" not found");return s}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",r),o=re(i,el);if("error"in o)throw new pe(o.error,"failed to get transaction");const s=o.result;if(!s)return s;const a=new nr(s.transaction.message),c=s.transaction.signatures;return{...s,transaction:Ne.populate(a,c)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",r),o=re(i,Sa);if("error"in o)throw new pe(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(e,t){const r=e.map(s=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([s],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(s=>{const a=re(s,Sa);if("error"in a)throw new pe(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,r){let i={},o=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<o));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let s=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>s));)try{const c=await this.getConfirmedBlockSignatures(r);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),s=re(o,$A);if("error"in s)throw new pe(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),o=await this._rpcRequest("getSignaturesForAddress",i),s=re(o,VA);if("error"in s)throw new pe(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let o=null;return i!==null&&(o=new $l({key:e,state:$l.deserialize(i.data)})),{context:r,value:o}}async getNonceAndContext(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let o=null;return i!==null&&(o=jc.fromAccountData(i.data)),{context:r,value:o}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=re(r,vR);if("error"in i)throw new pe(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Ni(100);const r=Date.now()-this._blockhashInfo.lastFetch>=gm;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let i=0;i<50;i++){const o=await this.getLatestBlockhash("finalized");if(r!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await Ni(lm/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=$e(e),i=this._buildArgs([],t,"base64",r),o=await this._rpcRequest("getStakeMinimumDelegation",i),s=re(o,wt(H()));if("error"in s)throw new pe(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(e,t,r){if("message"in e){const S=e.serialize(),A=ce.Buffer.from(S).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const I=t||{};I.encoding="base64","commitment"in I||(I.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(I.innerInstructions=t.innerInstructions);const x=[A,I],k=await this._rpcRequest("simulateTransaction",x),B=re(k,Uh);if("error"in B)throw new Error("failed to simulate transaction: "+B.error.message);return B.result}let i;if(e instanceof Ne){let b=e;i=new Ne,i.feePayer=b.feePayer,i.instructions=e.instructions,i.nonceInfo=b.nonceInfo,i.signatures=b.signatures}else i=Ne.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const o=t;if(i.nonceInfo&&o)i.sign(...o);else{let b=this._disableBlockhashCaching;for(;;){const S=await this._blockhashWithExpiryBlockHeight(b);if(i.lastValidBlockHeight=S.lastValidBlockHeight,i.recentBlockhash=S.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");const A=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else b=!0}}const s=i._compile(),a=s.serialize(),u=i._serialize(a).toString("base64"),d={encoding:"base64",commitment:this.commitment};if(r){const b=(Array.isArray(r)?r:s.nonProgramIds()).map(S=>S.toBase58());d.accounts={encoding:"base64",addresses:b}}o&&(d.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(d.innerInstructions=t.innerInstructions);const p=[u,d],w=await this._rpcRequest("simulateTransaction",p),h=re(w,Uh);if("error"in h){let b;if("data"in h.error&&(b=h.error.data.logs,b&&Array.isArray(b))){const S=`
    `,A=S+b.join(S);console.error(h.error.message,A)}throw new gi({action:"simulate",signature:"",transactionMessage:h.error.message,logs:b})}return h.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const s=e.serialize();return await this.sendRawTransaction(s,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let s=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(s);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))s=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const o=e.serialize();return await this.sendRawTransaction(o,r)}async sendRawTransaction(e,t){const r=ke(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},i=t&&t.skipPreflight,o=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),i&&(r.skipPreflight=i),o&&(r.preflightCommitment=o);const s=[e,r],a=await this._rpcRequest("sendTransaction",s),c=re(a,ER);if("error"in c){let u;throw"data"in c.error&&(u=c.error.data.logs),new gi({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:u})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const o=this._subscriptionStateChangeCallbacksByHash[e];o&&o.forEach(s=>{try{s(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var o;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(o=this._subscriptionStateChangeCallbacksByHash)[r]||(o[r]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:o,method:s}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(s,o);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${s}\``,{args:o,error:a}),!t())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:o,unsubscribeMethod:s}=i;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[o])}catch(a){if(a instanceof Error&&console.error(`${s} error:`,a.message),!t())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...t)}catch(o){console.error(o)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=re(e,qA);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,i=Mh([e.method,t]),o=this._subscriptionsByHash[i];return o===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const s=this._subscriptionsByHash[i];Me(s!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),s.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:i,config:o}=$e(r),s=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=re(e,jA);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,i){const{commitment:o,config:s}=$e(r),a=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64",s||(i?{filters:Lh(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=re(e,RR);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=re(e,ZA);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=re(e,JA);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,i){const o=t||this._commitment;if(o||r||i){let s={};r&&(s.encoding=r),o&&(s.commitment=o),i&&(s=Object.assign(s,i)),e.push(s)}return e}_buildArgsAtLeastConfirmed(e,t,r,i){const o=t||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,i)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=re(e,QA);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),o=this._makeSubscription({callback:(s,a)=>{if(s.type==="status"){t(s.result,a);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}onSignatureWithOptions(e,t,r){const{commitment:i,...o}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([e],i,void 0,o),a=this._makeSubscription({callback:(c,u)=>{t(c,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=re(e,eR);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class li{constructor(e){this._keypair=void 0,this._keypair=e??Oh()}static generate(){return new li(Oh())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),o=mc(i);for(let s=0;s<32;s++)if(r[s]!==o[s])throw new Error("provided secretKey is invalid")}return new li({publicKey:r,secretKey:e})}static fromSeed(e){const t=mc(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new li({publicKey:t,secretKey:r})}get publicKey(){return new X(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Br=Object.freeze({CreateLookupTable:{index:0,layout:de([fe("instruction"),zo("recentSlot"),xe("bumpSeed")])},FreezeLookupTable:{index:1,layout:de([fe("instruction")])},ExtendLookupTable:{index:2,layout:de([fe("instruction"),zo(),on(Te(),ci(fe(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:de([fe("instruction")])},CloseLookupTable:{index:4,layout:de([fe("instruction")])}});class kR{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=fe("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(Br))if(s.index==r){i=o;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Le(Br.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Le(Br.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(r=>new X(r))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(_f.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class _f{constructor(){}static createLookupTable(e){const[t,r]=X.findProgramAddressSync([e.authority.toBuffer(),Wg().encode(e.recentSlot)],this.programId),i=Br.CreateLookupTable,o=Ce(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:vt.programId,isSigner:!1,isWritable:!1}];return[new De({programId:this.programId,keys:s,data:o}),t]}static freezeLookupTable(e){const t=Br.FreezeLookupTable,r=Ce(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new De({programId:this.programId,keys:i,data:r})}static extendLookupTable(e){const t=Br.ExtendLookupTable,r=Ce(t,{addresses:e.addresses.map(o=>o.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:vt.programId,isSigner:!1,isWritable:!1}),new De({programId:this.programId,keys:i,data:r})}static deactivateLookupTable(e){const t=Br.DeactivateLookupTable,r=Ce(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new De({programId:this.programId,keys:i,data:r})}static closeLookupTable(e){const t=Br.CloseLookupTable,r=Ce(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new De({programId:this.programId,keys:i,data:r})}}_f.programId=new X("AddressLookupTab1e1111111111111111111111111");class IR{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=xe("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(ur))if(s.index==r){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=Le(ur.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Le(ur.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Le(ur.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Le(ur.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Xc.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const ur=Object.freeze({RequestUnits:{index:0,layout:de([xe("instruction"),fe("units"),fe("additionalFee")])},RequestHeapFrame:{index:1,layout:de([xe("instruction"),fe("bytes")])},SetComputeUnitLimit:{index:2,layout:de([xe("instruction"),fe("units")])},SetComputeUnitPrice:{index:3,layout:de([xe("instruction"),zo("microLamports")])}});class Xc{constructor(){}static requestUnits(e){const t=ur.RequestUnits,r=Ce(t,e);return new De({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){const t=ur.RequestHeapFrame,r=Ce(t,e);return new De({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){const t=ur.SetComputeUnitLimit,r=Ce(t,e);return new De({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){const t=ur.SetComputeUnitPrice,r=Ce(t,{microLamports:BigInt(e.microLamports)});return new De({keys:[],programId:this.programId,data:r})}}Xc.programId=new X("ComputeBudget111111111111111111111111111111");const Wh=64,zh=32,Hh=64,Kh=de([xe("numSignatures"),xe("padding"),Kn("signatureOffset"),Kn("signatureInstructionIndex"),Kn("publicKeyOffset"),Kn("publicKeyInstructionIndex"),Kn("messageDataOffset"),Kn("messageDataSize"),Kn("messageInstructionIndex")]);class Jc{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:i,instructionIndex:o}=e;Me(t.length===zh,`Public Key must be ${zh} bytes but received ${t.length} bytes`),Me(i.length===Hh,`Signature must be ${Hh} bytes but received ${i.length} bytes`);const s=Kh.span,a=s+t.length,c=a+i.length,u=1,d=ce.Buffer.alloc(c+r.length),p=o??65535;return Kh.encode({numSignatures:u,padding:0,signatureOffset:a,signatureInstructionIndex:p,publicKeyOffset:s,publicKeyInstructionIndex:p,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:p},d),d.fill(t,s),d.fill(i,a),d.fill(r,c),new De({keys:[],programId:Jc.programId,data:d})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:i}=e;Me(t.length===Wh,`Private key must be ${Wh} bytes but received ${t.length} bytes`);try{const o=li.fromSecretKey(t),s=o.publicKey.toBytes(),a=lf(r,o.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:a,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}}Jc.programId=new X("Ed25519SigVerify111111111111111111111111111");const TR=(n,e)=>{const t=uf.sign(n,e);return[t.toCompactRawBytes(),t.recovery]};uf.utils.isValidPrivateKey;const NR=uf.getPublicKey,$h=32,tl=20,Vh=64,OR=11,nl=de([xe("numSignatures"),Kn("signatureOffset"),xe("signatureInstructionIndex"),Kn("ethAddressOffset"),xe("ethAddressInstructionIndex"),Kn("messageDataOffset"),Kn("messageDataSize"),xe("messageInstructionIndex"),Ze(20,"ethAddress"),Ze(64,"signature"),xe("recoveryId")]);class To{constructor(){}static publicKeyToEthAddress(e){Me(e.length===Vh,`Public key must be ${Vh} bytes but received ${e.length} bytes`);try{return ce.Buffer.from(Ih(ke(e))).slice(-tl)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:i,recoveryId:o,instructionIndex:s}=e;return To.createInstructionWithEthAddress({ethAddress:To.publicKeyToEthAddress(t),message:r,signature:i,recoveryId:o,instructionIndex:s})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:i,recoveryId:o,instructionIndex:s=0}=e;let a;typeof t=="string"?t.startsWith("0x")?a=ce.Buffer.from(t.substr(2),"hex"):a=ce.Buffer.from(t,"hex"):a=t,Me(a.length===tl,`Address must be ${tl} bytes but received ${a.length} bytes`);const c=1+OR,u=c,d=c+a.length,p=d+i.length+1,w=1,h=ce.Buffer.alloc(nl.span+r.length);return nl.encode({numSignatures:w,signatureOffset:d,signatureInstructionIndex:s,ethAddressOffset:u,ethAddressInstructionIndex:s,messageDataOffset:p,messageDataSize:r.length,messageInstructionIndex:s,signature:ke(i),ethAddress:ke(a),recoveryId:o},h),h.fill(ke(r),nl.span),new De({keys:[],programId:To.programId,data:h})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:i}=e;Me(t.length===$h,`Private key must be ${$h} bytes but received ${t.length} bytes`);try{const o=ke(t),s=NR(o,!1).slice(1),a=ce.Buffer.from(Ih(ke(r))),[c,u]=TR(a,o);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:c,recoveryId:u,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}}To.programId=new X("KeccakSecp256k11111111111111111111111111111");var km;const Im=new X("StakeConfig11111111111111111111111111111111");class Tm{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class na{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}km=na;na.default=new km(0,0,X.default);class CR{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=fe("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(Zt))if(s.index==r){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=Le(Zt.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Tm(new X(t.staker),new X(t.withdrawer)),lockup:new na(r.unixTimestamp,r.epoch,new X(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Le(Zt.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=Le(Zt.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new X(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:i,authorityOwner:o}=Le(Zt.AuthorizeWithSeed,e.data),s={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new X(o),newAuthorizedPubkey:new X(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Le(Zt.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Le(Zt.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Le(Zt.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Le(Zt.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Qc.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Zt=Object.freeze({Initialize:{index:0,layout:de([fe("instruction"),LE(),UE()])},Authorize:{index:1,layout:de([fe("instruction"),Te("newAuthorized"),fe("stakeAuthorizationType")])},Delegate:{index:2,layout:de([fe("instruction")])},Split:{index:3,layout:de([fe("instruction"),xn("lamports")])},Withdraw:{index:4,layout:de([fe("instruction"),xn("lamports")])},Deactivate:{index:5,layout:de([fe("instruction")])},Merge:{index:7,layout:de([fe("instruction")])},AuthorizeWithSeed:{index:8,layout:de([fe("instruction"),Te("newAuthorized"),fe("stakeAuthorizationType"),Bi("authoritySeed"),Te("authorityOwner")])}}),xR=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Qc{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:i}=e,o=i||na.default,s=Zt.Initialize,a=Ce(s,{authorized:{staker:ke(r.staker.toBuffer()),withdrawer:ke(r.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:ke(o.custodian.toBuffer())}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Wo,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new De(c)}static createAccountWithSeed(e){const t=new Ne;t.add(vt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:i,lockup:o}))}static createAccount(e){const t=new Ne;t.add(vt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:i,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:i,lockup:o}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:i}=e,o=Zt.Delegate,s=Ce(o);return new Ne().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:or,isSigner:!1,isWritable:!1},{pubkey:Fa,isSigner:!1,isWritable:!1},{pubkey:Im,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:s}=e,a=Zt.Authorize,c=Ce(a,{newAuthorized:ke(i.toBuffer()),stakeAuthorizationType:o.index}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:or,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!0,isWritable:!1}),new Ne().add({keys:u,programId:this.programId,data:c})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:i,authorityOwner:o,newAuthorizedPubkey:s,stakeAuthorizationType:a,custodianPubkey:c}=e,u=Zt.AuthorizeWithSeed,d=Ce(u,{newAuthorized:ke(s.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:i,authorityOwner:ke(o.toBuffer())}),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:or,isSigner:!1,isWritable:!1}];return c&&p.push({pubkey:c,isSigner:!0,isWritable:!1}),new Ne().add({keys:p,programId:this.programId,data:d})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:i,lamports:o}=e,s=Zt.Split,a=Ce(s,{lamports:o});return new De({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,t){const r=new Ne;return r.add(vt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:i,splitStakePubkey:o,basePubkey:s,seed:a,lamports:c}=e,u=new Ne;return u.add(vt.allocate({accountPubkey:o,basePubkey:s,seed:a,space:this.space,programId:this.programId})),t&&t>0&&u.add(vt.transfer({fromPubkey:e.authorizedPubkey,toPubkey:o,lamports:t})),u.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:i,splitStakePubkey:o,lamports:c}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:i}=e,o=Zt.Merge,s=Ce(o);return new Ne().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:or,isSigner:!1,isWritable:!1},{pubkey:Fa,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:i,lamports:o,custodianPubkey:s}=e,a=Zt.Withdraw,c=Ce(a,{lamports:o}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:or,isSigner:!1,isWritable:!1},{pubkey:Fa,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&u.push({pubkey:s,isSigner:!0,isWritable:!1}),new Ne().add({keys:u,programId:this.programId,data:c})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,i=Zt.Deactivate,o=Ce(i);return new Ne().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:or,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}}Qc.programId=new X("Stake11111111111111111111111111111111111111");Qc.space=200;class Nm{constructor(e,t,r,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=i}}class BR{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const r=fe("instruction").decode(e.data);let i;for(const[o,s]of Object.entries(lr))if(s.index==r){i=o;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Le(lr.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Nm(new X(t.nodePubkey),new X(t.authorizedVoter),new X(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=Le(lr.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new X(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:i,voteAuthorizationType:o}}=Le(lr.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new X(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new X(i),voteAuthorizationType:{index:o},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Le(lr.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(ns.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const lr=Object.freeze({InitializeAccount:{index:0,layout:de([fe("instruction"),DE()])},Authorize:{index:1,layout:de([fe("instruction"),Te("newAuthorized"),fe("voteAuthorizationType")])},Withdraw:{index:3,layout:de([fe("instruction"),xn("lamports")])},UpdateValidatorIdentity:{index:4,layout:de([fe("instruction")])},AuthorizeWithSeed:{index:10,layout:de([fe("instruction"),FE()])}}),MR=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class ns{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:i}=e,o=lr.InitializeAccount,s=Ce(o,{voteInit:{nodePubkey:ke(i.nodePubkey.toBuffer()),authorizedVoter:ke(i.authorizedVoter.toBuffer()),authorizedWithdrawer:ke(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Wo,isSigner:!1,isWritable:!1},{pubkey:or,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new De(a)}static createAccount(e){const t=new Ne;return t.add(vt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:i,voteAuthorizationType:o}=e,s=lr.Authorize,a=Ce(s,{newAuthorized:ke(i.toBuffer()),voteAuthorizationType:o.index}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:or,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ne().add({keys:c,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:o,voteAuthorizationType:s,votePubkey:a}=e,c=lr.AuthorizeWithSeed,u=Ce(c,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ke(r.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:ke(o.toBuffer()),voteAuthorizationType:s.index}}),d=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:or,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new Ne().add({keys:d,programId:this.programId,data:u})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:i,toPubkey:o}=e,s=lr.Withdraw,a=Ce(s,{lamports:i}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ne().add({keys:c,programId:this.programId,data:a})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return ns.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:i}=e,o=lr.UpdateValidatorIdentity,s=Ce(o),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ne().add({keys:a,programId:this.programId,data:s})}}ns.programId=new X("Vote111111111111111111111111111111111111111");ns.space=3762;const Om=new X("Va1idator1nfo111111111111111111111111111111"),PR=Q({name:te(),website:ge(te()),details:ge(te()),iconUrl:ge(te()),keybaseUsername:ge(te())});class wf{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(bn(t)!==2)return null;const i=[];for(let o=0;o<2;o++){const s=new X(vn(t,0,hr)),a=cr(t)===1;i.push({publicKey:s,isSigner:a})}if(i[0].publicKey.equals(Om)&&i[1].isSigner){const o=Bi().decode(ce.Buffer.from(t)),s=JSON.parse(o);return zg(s,PR),new wf(i[1].publicKey,s)}return null}}const LR=new X("Vote111111111111111111111111111111111111111"),UR=de([Te("nodePubkey"),Te("authorizedWithdrawer"),xe("commission"),Qt(),on(de([Qt("slot"),fe("confirmationCount")]),ci(fe(),-8),"votes"),xe("rootSlotValid"),Qt("rootSlot"),Qt(),on(de([Qt("epoch"),Te("authorizedVoter")]),ci(fe(),-8),"authorizedVoters"),de([on(de([Te("authorizedPubkey"),Qt("epochOfLastAuthorizedSwitch"),Qt("targetEpoch")]),32,"buf"),Qt("idx"),xe("isEmpty")],"priorVoters"),Qt(),on(de([Qt("epoch"),Qt("credits"),Qt("prevCredits")]),ci(fe(),-8),"epochCredits"),de([Qt("slot"),Qt("timestamp")],"lastTimestamp")]);class bf{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const r=UR.decode(ke(e),4);let i=r.rootSlot;return r.rootSlotValid||(i=null),new bf({nodePubkey:new X(r.nodePubkey),authorizedWithdrawer:new X(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:i,authorizedVoters:r.authorizedVoters.map(DR),priorVoters:FR(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function DR({authorizedVoter:n,epoch:e}){return{epoch:e,authorizedVoter:new X(n)}}function qh({authorizedPubkey:n,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new X(n),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function FR({buf:n,idx:e,isEmpty:t}){return t?[]:[...n.slice(e+1).map(qh),...n.slice(0,e).map(qh)]}const Gh={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function WR(n,e){const t=e===!1?"http":"https";if(!n)return Gh[t].devnet;const r=Gh[t][n];if(!r)throw new Error(`Unknown ${t} cluster: ${n}`);return r}async function zR(n,e,t,r){let i,o;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(i=t,o=r):o=t;const s=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},a=await n.sendRawTransaction(e,s),c=o&&o.commitment,d=(await(i?n.confirmTransaction(i,c):n.confirmTransaction(a,c))).value;if(d.err)throw a!=null?new gi({action:s!=null&&s.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(d)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(d)})`);return a}const HR=1e9,KR=Object.freeze(Object.defineProperty({__proto__:null,Account:BE,AddressLookupTableAccount:$l,AddressLookupTableInstruction:kR,AddressLookupTableProgram:_f,Authorized:Tm,BLOCKHASH_CACHE_TIMEOUT_MS:gm,BPF_LOADER_DEPRECATED_PROGRAM_ID:ME,BPF_LOADER_PROGRAM_ID:JE,BpfLoader:QE,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:ur,ComputeBudgetInstruction:IR,ComputeBudgetProgram:Xc,Connection:Sm,Ed25519Program:Jc,Enum:CE,EpochSchedule:hm,FeeCalculatorLayout:dm,Keypair:li,LAMPORTS_PER_SOL:HR,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Br,Loader:Gi,Lockup:na,MAX_SEED_LENGTH:am,Message:nr,MessageAccountKeys:Us,MessageV0:qi,NONCE_ACCOUNT_LENGTH:Kl,NonceAccount:jc,PACKET_DATA_SIZE:ui,PUBLIC_KEY_LENGTH:hr,PublicKey:X,SIGNATURE_LENGTH_IN_BYTES:Ls,SOLANA_SCHEMA:As,STAKE_CONFIG_ID:Im,STAKE_INSTRUCTION_LAYOUTS:Zt,SYSTEM_INSTRUCTION_LAYOUTS:qe,SYSVAR_CLOCK_PUBKEY:or,SYSVAR_EPOCH_SCHEDULE_PUBKEY:$E,SYSVAR_INSTRUCTIONS_PUBKEY:VE,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Da,SYSVAR_RENT_PUBKEY:Wo,SYSVAR_REWARDS_PUBKEY:qE,SYSVAR_SLOT_HASHES_PUBKEY:GE,SYSVAR_SLOT_HISTORY_PUBKEY:jE,SYSVAR_STAKE_HISTORY_PUBKEY:Fa,Secp256k1Program:To,SendTransactionError:gi,SolanaJSONRPCError:pe,SolanaJSONRPCErrorCode:YE,StakeAuthorizationLayout:xR,StakeInstruction:CR,StakeProgram:Qc,Struct:df,SystemInstruction:ZE,SystemProgram:vt,Transaction:Ne,TransactionExpiredBlockheightExceededError:ff,TransactionExpiredNonceInvalidError:bo,TransactionExpiredTimeoutError:hf,TransactionInstruction:De,TransactionMessage:pf,TransactionStatus:Ir,VALIDATOR_INFO_KEY:Om,VERSION_PREFIX_MASK:Vc,VOTE_PROGRAM_ID:LR,ValidatorInfo:wf,VersionedMessage:Gc,VersionedTransaction:Fo,VoteAccount:bf,VoteAuthorizationLayout:MR,VoteInit:Nm,VoteInstruction:BR,VoteProgram:ns,clusterApiUrl:WR,sendAndConfirmRawTransaction:zR,sendAndConfirmTransaction:Hl},Symbol.toStringTag,{value:"Module"}));function Cm(n,e){for(var t in e)n[t]=e[t];return n}function jl(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function xm(n,e){var t=e(),r=Ge({t:{__:t,u:e}}),i=r[0].t,o=r[1];return Wr(function(){i.__=t,i.u=e,rl(i)&&o({t:i})},[n,t,e]),qt(function(){return rl(i)&&o({t:i}),n(function(){rl(i)&&o({t:i})})},[n]),t}function rl(n){var e,t,r=n.u,i=n.__;try{var o=r();return!((e=i)===(t=o)&&(e!==0||1/e==1/t)||e!=e&&t!=t)}catch{return!0}}function Bm(n){n()}function Mm(n){return n}function Pm(){return[!1,Bm]}var Lm=Wr;function Yl(n,e){this.props=n,this.context=e}function $R(n,e){function t(i){var o=this.props.ref,s=o==i.ref;return!s&&o&&(o.call?o(null):o.current=null),e?!e(this.props,i)||!s:jl(this.props,i)}function r(i){return this.shouldComponentUpdate=t,Fr(n,i)}return r.displayName="Memo("+(n.displayName||n.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r.type=n,r}(Yl.prototype=new Qn).isPureReactComponent=!0,Yl.prototype.shouldComponentUpdate=function(n,e){return jl(this.props,n)||jl(this.state,e)};var jh=Ee.__b;Ee.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),jh&&jh(n)};var VR=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function qR(n){function e(t){var r=Cm({},t);return delete r.ref,n(r,t.ref||null)}return e.$$typeof=VR,e.render=n,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}var Yh=function(n,e){return n==null?null:Ur(Ur(n).map(e))},GR={map:Yh,forEach:Yh,count:function(n){return n?Ur(n).length:0},only:function(n){var e=Ur(n);if(e.length!==1)throw"Children.only";return e[0]},toArray:Ur},jR=Ee.__e;Ee.__e=function(n,e,t,r){if(n.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}jR(n,e,t,r)};var Zh=Ee.unmount;function Um(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=Cm({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return Um(r,e,t)})),n}function Dm(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return Dm(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function Wa(){this.__u=0,this.o=null,this.__b=null}function Fm(n){if(!n.__)return null;var e=n.__.__c;return e&&e.__a&&e.__a(n)}function YR(n){var e,t,r,i=null;function o(s){if(e||(e=n()).then(function(a){a&&(i=a.default||a),r=!0},function(a){t=a,r=!0}),t)throw t;if(!r)throw e;return i?Fr(i,s):null}return o.displayName="Lazy",o.__f=!0,o}function ps(){this.i=null,this.l=null}Ee.unmount=function(n){var e=n.__c;e&&(e.__z=!0),e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),Zh&&Zh(n)},(Wa.prototype=new Qn).__c=function(n,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var i=Fm(r.__v),o=!1,s=function(){o||r.__z||(o=!0,t.__R=null,i?i(c):c())};t.__R=s;var a=t.__P;t.__P=null;var c=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=Dm(u,u.__c.__P,u.__c.__O)}var d;for(r.setState({__a:r.__b=null});d=r.o.pop();)d.__P=a,d.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(s,s)},Wa.prototype.componentWillUnmount=function(){this.o=[]},Wa.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Um(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&Fr(Ln,null,n.fallback);return i&&(i.__u&=-33),[Fr(Ln,null,e.__a?null:n.children),i]};var Xh=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};function ZR(n){return this.getChildContext=function(){return n.context},n.children}function XR(n){var e=this,t=n.h;if(e.componentWillUnmount=function(){Mo(null,e.v),e.v=null,e.h=null},e.h&&e.h!==t&&e.componentWillUnmount(),!e.v){for(var r=e.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;e.h=t,e.v={nodeType:1,parentNode:t,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},namespaceURI:t.namespaceURI,insertBefore:function(i,o){this.childNodes.push(i),e.h.insertBefore(i,o)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.h.removeChild(i)}}}Mo(Fr(ZR,{context:e.context},n.__v),e.v)}function Wm(n,e){var t=Fr(XR,{__v:n,h:e});return t.containerInfo=e,t}(ps.prototype=new Qn).__a=function(n){var e=this,t=Fm(e.__v),r=e.l.get(n);return r[0]++,function(i){var o=function(){e.props.revealOrder?(r.push(i),Xh(e,n,r)):i()};t?t(o):o()}},ps.prototype.render=function(n){this.i=null,this.l=new Map;var e=Ur(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},ps.prototype.componentDidUpdate=ps.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){Xh(n,t,e)})};var zm=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,JR=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,QR=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,eS=/[A-Z0-9]/g,tS=typeof document<"u",nS=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function rS(n,e,t){return e.__k==null&&(e.textContent=""),Mo(n,e),typeof t=="function"&&t(),n?n.__c:null}function iS(n,e,t){return B0(n,e),typeof t=="function"&&t(),n?n.__c:null}Qn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Qn.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var Jh=Ee.event;function oS(){}function sS(){return this.cancelBubble}function aS(){return this.defaultPrevented}Ee.event=function(n){return Jh&&(n=Jh(n)),n.persist=oS,n.isPropagationStopped=sS,n.isDefaultPrevented=aS,n.nativeEvent=n};var vf,cS={enumerable:!1,configurable:!0,get:function(){return this.class}},Qh=Ee.vnode;Ee.vnode=function(n){typeof n.type=="string"&&function(e){var t=e.props,r=e.type,i={},o=r.indexOf("-")===-1;for(var s in t){var a=t[s];if(!(s==="value"&&"defaultValue"in t&&a==null||tS&&s==="children"&&r==="noscript"||s==="class"||s==="className")){var c=s.toLowerCase();s==="defaultValue"&&"value"in t&&t.value==null?s="value":s==="download"&&a===!0?a="":c==="translate"&&a==="no"?a=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?s="ondblclick":c!=="onchange"||r!=="input"&&r!=="textarea"||nS(t.type)?c==="onfocus"?s="onfocusin":c==="onblur"?s="onfocusout":QR.test(s)&&(s=c):c=s="oninput":o&&JR.test(s)?s=s.replace(eS,"-$&").toLowerCase():a===null&&(a=void 0),c==="oninput"&&i[s=c]&&(s="oninputCapture"),i[s]=a}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Ur(t.children).forEach(function(u){u.props.selected=i.value.indexOf(u.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=Ur(t.children).forEach(function(u){u.props.selected=i.multiple?i.defaultValue.indexOf(u.props.value)!=-1:i.defaultValue==u.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",cS)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(n),n.$$typeof=zm,Qh&&Qh(n)};var ep=Ee.__r;Ee.__r=function(n){ep&&ep(n),vf=n.__c};var tp=Ee.diffed;Ee.diffed=function(n){tp&&tp(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),vf=null};var uS={ReactCurrentDispatcher:{current:{readContext:function(n){return vf.__n[n.__c].props.value},useCallback:rn,useContext:Ys,useDebugValue:L0,useDeferredValue:Mm,useEffect:qt,useId:U0,useImperativeHandle:P0,useInsertionEffect:Lm,useLayoutEffect:Wr,useMemo:bt,useReducer:Ud,useRef:nn,useState:Ge,useSyncExternalStore:xm,useTransition:Pm}}};function lS(n){return Fr.bind(null,n)}function eu(n){return!!n&&n.$$typeof===zm}function dS(n){return eu(n)&&n.type===Ln}function fS(n){return!!n&&!!n.displayName&&(typeof n.displayName=="string"||n.displayName instanceof String)&&n.displayName.startsWith("Memo(")}function hS(n){return eu(n)?R1.apply(null,arguments):n}function pS(n){return!!n.__k&&(Mo(null,n),!0)}function gS(n){return n&&(n.base||n.nodeType===1&&n)||null}var mS=function(n,e){return n(e)},yS=function(n,e){return n(e)},_S=Ln,wS=eu,ee={useState:Ge,useId:U0,useReducer:Ud,useEffect:qt,useLayoutEffect:Wr,useInsertionEffect:Lm,useTransition:Pm,useDeferredValue:Mm,useSyncExternalStore:xm,startTransition:Bm,useRef:nn,useImperativeHandle:P0,useMemo:bt,useCallback:rn,useContext:Ys,useDebugValue:L0,version:"18.3.1",Children:GR,render:rS,hydrate:iS,unmountComponentAtNode:pS,createPortal:Wm,createElement:Fr,createContext:Lc,createFactory:lS,cloneElement:hS,createRef:w1,Fragment:Ln,isValidElement:eu,isElement:wS,isFragment:dS,isMemo:fS,findDOMNode:gS,Component:Qn,PureComponent:Yl,memo:$R,forwardRef:qR,flushSync:yS,unstable_batchedUpdates:mS,StrictMode:_S,Suspense:Wa,SuspenseList:ps,lazy:YR,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:uS};const Hm=Lc({});function Ef(){return Ys(Hm)}const bS=({children:n,endpoint:e,config:t={commitment:"confirmed"}})=>{const r=bt(()=>new Sm(e,t),[e,t]);return ee.createElement(Hm.Provider,{value:{connection:r}},n)};var Km={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function o(c,u,d,p,w){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,p||c,w),b=t?t+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],h]:c._events[b].push(h):(c._events[b]=h,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,p;if(this._eventsCount===0)return u;for(p in d=this._events)e.call(d,p)&&u.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=t?t+u:u,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var w=0,h=p.length,b=new Array(h);w<h;w++)b[w]=p[w].fn;return b},a.prototype.listenerCount=function(u){var d=t?t+u:u,p=this._events[d];return p?p.fn?1:p.length:0},a.prototype.emit=function(u,d,p,w,h,b){var S=t?t+u:u;if(!this._events[S])return!1;var A=this._events[S],I=arguments.length,x,k;if(A.fn){switch(A.once&&this.removeListener(u,A.fn,void 0,!0),I){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,d),!0;case 3:return A.fn.call(A.context,d,p),!0;case 4:return A.fn.call(A.context,d,p,w),!0;case 5:return A.fn.call(A.context,d,p,w,h),!0;case 6:return A.fn.call(A.context,d,p,w,h,b),!0}for(k=1,x=new Array(I-1);k<I;k++)x[k-1]=arguments[k];A.fn.apply(A.context,x)}else{var B=A.length,L;for(k=0;k<B;k++)switch(A[k].once&&this.removeListener(u,A[k].fn,void 0,!0),I){case 1:A[k].fn.call(A[k].context);break;case 2:A[k].fn.call(A[k].context,d);break;case 3:A[k].fn.call(A[k].context,d,p);break;case 4:A[k].fn.call(A[k].context,d,p,w);break;default:if(!x)for(L=1,x=new Array(I-1);L<I;L++)x[L-1]=arguments[L];A[k].fn.apply(A[k].context,x)}}return!0},a.prototype.on=function(u,d,p){return o(this,u,d,p,!1)},a.prototype.once=function(u,d,p){return o(this,u,d,p,!0)},a.prototype.removeListener=function(u,d,p,w){var h=t?t+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var b=this._events[h];if(b.fn)b.fn===d&&(!w||b.once)&&(!p||b.context===p)&&s(this,h);else{for(var S=0,A=[],I=b.length;S<I;S++)(b[S].fn!==d||w&&!b[S].once||p&&b[S].context!==p)&&A.push(b[S]);A.length?this._events[h]=A.length===1?A[0]:A:s(this,h)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=t?t+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(Km);var vS=Km.exports;const ES=_i(vS);class yn extends Error{constructor(e,t){super(e),this.error=t}}class Fs extends yn{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class gs extends yn{constructor(){super(...arguments),this.name="WalletConfigError"}}class _c extends yn{constructor(){super(...arguments),this.name="WalletConnectionError"}}class AS extends yn{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class RS extends yn{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class vo extends yn{constructor(){super(...arguments),this.name="WalletAccountError"}}class $m extends yn{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class fr extends yn{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Mi extends yn{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Pi extends yn{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Vm extends yn{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class np extends yn{constructor(){super(...arguments),this.name="WalletSignInError"}}var ut;(function(n){n.Installed="Installed",n.NotDetected="NotDetected",n.Loadable="Loadable",n.Unsupported="Unsupported"})(ut||(ut={}));class qm extends ES{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,r={}){const i=this.publicKey;if(!i)throw new fr;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,e}}function Li(n){return"version"in n}class SS extends qm{async sendTransaction(e,t,r={}){let i=!0;try{if(Li(e)){if(!this.supportedTransactionVersions)throw new Mi("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Mi(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const o=e.serialize();return await t.sendRawTransaction(o,r)}catch(o){throw o instanceof Pi?(i=!1,o):new Mi(o==null?void 0:o.message,o)}}else try{const{signers:o,...s}=r;e=await this.prepareTransaction(e,t,s),o!=null&&o.length&&e.partialSign(...o),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,s)}catch(o){throw o instanceof Pi?(i=!1,o):new Mi(o==null?void 0:o.message,o)}}catch(o){throw i&&this.emit("error",o),o}}async signAllTransactions(e){for(const r of e)if(Li(r)){if(!this.supportedTransactionVersions)throw new Pi("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new Pi(`Signing transaction version ${r.version} isn't supported by this wallet`)}const t=[];for(const r of e)t.push(await this.signTransaction(r));return t}}class kS extends SS{}class IS extends kS{}const An="solana:signAndSendTransaction",$i="solana:signIn",ri="solana:signMessage",at="solana:signTransaction",Af="standard:connect",Zl="standard:disconnect",Rf="standard:events";function TS(n){return Af in n.features&&Rf in n.features&&(An in n.features||at in n.features)}class rp extends yn{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const NS=[],tu={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Yn("call","select")},connect(){return Promise.reject(Yn("call","connect"))},disconnect(){return Promise.reject(Yn("call","disconnect"))},sendTransaction(){return Promise.reject(Yn("call","sendTransaction"))},signTransaction(){return Promise.reject(Yn("call","signTransaction"))},signAllTransactions(){return Promise.reject(Yn("call","signAllTransactions"))},signMessage(){return Promise.reject(Yn("call","signMessage"))},signIn(){return Promise.reject(Yn("call","signIn"))}};Object.defineProperty(tu,"wallets",{get(){return Yn("read","wallets"),NS}});Object.defineProperty(tu,"wallet",{get(){return Yn("read","wallet"),null}});Object.defineProperty(tu,"publicKey",{get(){return Yn("read","publicKey"),null}});function Yn(n,e){const t=new Error(`You have tried to ${n} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const Gm=Lc(tu);function ra(){return Ys(Gm)}function OS(n,e){const t=Ge(()=>{try{const o=localStorage.getItem(n);if(o)return JSON.parse(o)}catch(o){typeof window<"u"&&console.error(o)}return e}),r=t[0],i=nn(!0);return qt(()=>{if(i.current){i.current=!1;return}try{r===null?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(r))}catch(o){typeof window<"u"&&console.error(o)}},[r,n]),t}var CS=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},jm={},Fn={};let Sf;const xS=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Fn.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Fn.getSymbolTotalCodewords=function(e){return xS[e]};Fn.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Fn.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Sf=e};Fn.isKanjiModeEnabled=function(){return typeof Sf<"u"};Fn.toSJIS=function(e){return Sf(e)};var nu={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}})(nu);function Ym(){this.buffer=[],this.length=0}Ym.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var BS=Ym;function ia(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}ia.prototype.set=function(n,e,t,r){const i=n*this.size+e;this.data[i]=t,r&&(this.reservedBit[i]=!0)};ia.prototype.get=function(n,e){return this.data[n*this.size+e]};ia.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};ia.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var MS=ia,Zm={};(function(n){const e=Fn.getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,o=e(r),s=o===145?26:Math.ceil((o-13)/(2*i-2))*2,a=[o-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-s;return a.push(6),a.reverse()},n.getPositions=function(r){const i=[],o=n.getRowColCoords(r),s=o.length;for(let a=0;a<s;a++)for(let c=0;c<s;c++)a===0&&c===0||a===0&&c===s-1||a===s-1&&c===0||i.push([o[a],o[c]]);return i}})(Zm);var Xm={};const PS=Fn.getSymbolSize,ip=7;Xm.getPositions=function(e){const t=PS(e);return[[0,0],[t-ip,0],[0,t-ip]]};var Jm={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const o=i.size;let s=0,a=0,c=0,u=null,d=null;for(let p=0;p<o;p++){a=c=0,u=d=null;for(let w=0;w<o;w++){let h=i.get(p,w);h===u?a++:(a>=5&&(s+=e.N1+(a-5)),u=h,a=1),h=i.get(w,p),h===d?c++:(c>=5&&(s+=e.N1+(c-5)),d=h,c=1)}a>=5&&(s+=e.N1+(a-5)),c>=5&&(s+=e.N1+(c-5))}return s},n.getPenaltyN2=function(i){const o=i.size;let s=0;for(let a=0;a<o-1;a++)for(let c=0;c<o-1;c++){const u=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(u===4||u===0)&&s++}return s*e.N2},n.getPenaltyN3=function(i){const o=i.size;let s=0,a=0,c=0;for(let u=0;u<o;u++){a=c=0;for(let d=0;d<o;d++)a=a<<1&2047|i.get(u,d),d>=10&&(a===1488||a===93)&&s++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&s++}return s*e.N3},n.getPenaltyN4=function(i){let o=0;const s=i.data.length;for(let c=0;c<s;c++)o+=i.data[c];return Math.abs(Math.ceil(o*100/s/5)-10)*e.N4};function t(r,i,o){switch(r){case n.Patterns.PATTERN000:return(i+o)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return o%3===0;case n.Patterns.PATTERN011:return(i+o)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case n.Patterns.PATTERN101:return i*o%2+i*o%3===0;case n.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case n.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,o){const s=o.size;for(let a=0;a<s;a++)for(let c=0;c<s;c++)o.isReserved(c,a)||o.xor(c,a,t(i,c,a))},n.getBestMask=function(i,o){const s=Object.keys(n.Patterns).length;let a=0,c=1/0;for(let u=0;u<s;u++){o(u),n.applyMask(u,i);const d=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(u,i),d<c&&(c=d,a=u)}return a}})(Jm);var ru={};const ai=nu,ka=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ia=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ru.getBlocksCount=function(e,t){switch(t){case ai.L:return ka[(e-1)*4+0];case ai.M:return ka[(e-1)*4+1];case ai.Q:return ka[(e-1)*4+2];case ai.H:return ka[(e-1)*4+3];default:return}};ru.getTotalCodewordsCount=function(e,t){switch(t){case ai.L:return Ia[(e-1)*4+0];case ai.M:return Ia[(e-1)*4+1];case ai.Q:return Ia[(e-1)*4+2];case ai.H:return Ia[(e-1)*4+3];default:return}};var Qm={},iu={};const Rs=new Uint8Array(512),wc=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Rs[t]=e,wc[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Rs[t]=Rs[t-255]})();iu.log=function(e){if(e<1)throw new Error("log("+e+")");return wc[e]};iu.exp=function(e){return Rs[e]};iu.mul=function(e,t){return e===0||t===0?0:Rs[wc[e]+wc[t]]};(function(n){const e=iu;n.mul=function(r,i){const o=new Uint8Array(r.length+i.length-1);for(let s=0;s<r.length;s++)for(let a=0;a<i.length;a++)o[s+a]^=e.mul(r[s],i[a]);return o},n.mod=function(r,i){let o=new Uint8Array(r);for(;o.length-i.length>=0;){const s=o[0];for(let c=0;c<i.length;c++)o[c]^=e.mul(i[c],s);let a=0;for(;a<o.length&&o[a]===0;)a++;o=o.slice(a)}return o},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let o=0;o<r;o++)i=n.mul(i,new Uint8Array([1,e.exp(o)]));return i}})(Qm);const ey=Qm;function kf(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}kf.prototype.initialize=function(e){this.degree=e,this.genPoly=ey.generateECPolynomial(this.degree)};kf.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=ey.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){const o=new Uint8Array(this.degree);return o.set(r,i),o}return r};var LS=kf,ty={},wi={},If={};If.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var wr={};const ny="[0-9]+",US="[A-Z $%*+\\-./:]+";let Ws="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Ws=Ws.replace(/u/g,"\\u");const DS="(?:(?![A-Z0-9 $%*+\\-./:]|"+Ws+`)(?:.|[\r
]))+`;wr.KANJI=new RegExp(Ws,"g");wr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");wr.BYTE=new RegExp(DS,"g");wr.NUMERIC=new RegExp(ny,"g");wr.ALPHANUMERIC=new RegExp(US,"g");const FS=new RegExp("^"+Ws+"$"),WS=new RegExp("^"+ny+"$"),zS=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");wr.testKanji=function(e){return FS.test(e)};wr.testNumeric=function(e){return WS.test(e)};wr.testAlphanumeric=function(e){return zS.test(e)};(function(n){const e=If,t=wr;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(o,s){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?o.ccBits[0]:s<27?o.ccBits[1]:o.ccBits[2]},n.getBestModeForData=function(o){return t.testNumeric(o)?n.NUMERIC:t.testAlphanumeric(o)?n.ALPHANUMERIC:t.testKanji(o)?n.KANJI:n.BYTE},n.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},n.isValid=function(o){return o&&o.bit&&o.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(o,s){if(n.isValid(o))return o;try{return r(o)}catch{return s}}})(wi);(function(n){const e=Fn,t=ru,r=nu,i=wi,o=If,s=7973,a=e.getBCHDigit(s);function c(w,h,b){for(let S=1;S<=40;S++)if(h<=n.getCapacity(S,b,w))return S}function u(w,h){return i.getCharCountIndicator(w,h)+4}function d(w,h){let b=0;return w.forEach(function(S){const A=u(S.mode,h);b+=A+S.getBitsLength()}),b}function p(w,h){for(let b=1;b<=40;b++)if(d(w,b)<=n.getCapacity(b,h,i.MIXED))return b}n.from=function(h,b){return o.isValid(h)?parseInt(h,10):b},n.getCapacity=function(h,b,S){if(!o.isValid(h))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const A=e.getSymbolTotalCodewords(h),I=t.getTotalCodewordsCount(h,b),x=(A-I)*8;if(S===i.MIXED)return x;const k=x-u(S,h);switch(S){case i.NUMERIC:return Math.floor(k/10*3);case i.ALPHANUMERIC:return Math.floor(k/11*2);case i.KANJI:return Math.floor(k/13);case i.BYTE:default:return Math.floor(k/8)}},n.getBestVersionForData=function(h,b){let S;const A=r.from(b,r.M);if(Array.isArray(h)){if(h.length>1)return p(h,A);if(h.length===0)return 1;S=h[0]}else S=h;return c(S.mode,S.getLength(),A)},n.getEncodedBits=function(h){if(!o.isValid(h)||h<7)throw new Error("Invalid QR Code version");let b=h<<12;for(;e.getBCHDigit(b)-a>=0;)b^=s<<e.getBCHDigit(b)-a;return h<<12|b}})(ty);var ry={};const Xl=Fn,iy=1335,HS=21522,op=Xl.getBCHDigit(iy);ry.getEncodedBits=function(e,t){const r=e.bit<<3|t;let i=r<<10;for(;Xl.getBCHDigit(i)-op>=0;)i^=iy<<Xl.getBCHDigit(i)-op;return(r<<10|i)^HS};var oy={};const KS=wi;function Ho(n){this.mode=KS.NUMERIC,this.data=n.toString()}Ho.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ho.prototype.getLength=function(){return this.data.length};Ho.prototype.getBitsLength=function(){return Ho.getBitsLength(this.data.length)};Ho.prototype.write=function(e){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),e.put(i,10);const o=this.data.length-t;o>0&&(r=this.data.substr(t),i=parseInt(r,10),e.put(i,o*3+1))};var $S=Ho;const VS=wi,il=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ko(n){this.mode=VS.ALPHANUMERIC,this.data=n}Ko.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Ko.prototype.getLength=function(){return this.data.length};Ko.prototype.getBitsLength=function(){return Ko.getBitsLength(this.data.length)};Ko.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=il.indexOf(this.data[t])*45;r+=il.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(il.indexOf(this.data[t]),6)};var qS=Ko;const GS=wi;function $o(n){this.mode=GS.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}$o.getBitsLength=function(e){return e*8};$o.prototype.getLength=function(){return this.data.length};$o.prototype.getBitsLength=function(){return $o.getBitsLength(this.data.length)};$o.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var jS=$o;const YS=wi,ZS=Fn;function Vo(n){this.mode=YS.KANJI,this.data=n}Vo.getBitsLength=function(e){return e*13};Vo.prototype.getLength=function(){return this.data.length};Vo.prototype.getBitsLength=function(){return Vo.getBitsLength(this.data.length)};Vo.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=ZS.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var XS=Vo,sy={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,r,i){var o={},s={};s[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var c,u,d,p,w,h,b,S,A;!a.empty();){c=a.pop(),u=c.value,p=c.cost,w=t[u]||{};for(d in w)w.hasOwnProperty(d)&&(h=w[d],b=p+h,S=s[d],A=typeof s[d]>"u",(A||S>b)&&(s[d]=b,a.push(d,b),o[d]=u))}if(typeof i<"u"&&typeof s[i]>"u"){var I=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(I)}return o},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],o=r;o;)i.push(o),t[o],o=t[o];return i.reverse(),i},find_path:function(t,r,i){var o=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},o;t=t||{};for(o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(sy);var JS=sy.exports;(function(n){const e=wi,t=$S,r=qS,i=jS,o=XS,s=wr,a=Fn,c=JS;function u(I){return unescape(encodeURIComponent(I)).length}function d(I,x,k){const B=[];let L;for(;(L=I.exec(k))!==null;)B.push({data:L[0],index:L.index,mode:x,length:L[0].length});return B}function p(I){const x=d(s.NUMERIC,e.NUMERIC,I),k=d(s.ALPHANUMERIC,e.ALPHANUMERIC,I);let B,L;return a.isKanjiModeEnabled()?(B=d(s.BYTE,e.BYTE,I),L=d(s.KANJI,e.KANJI,I)):(B=d(s.BYTE_KANJI,e.BYTE,I),L=[]),x.concat(k,B,L).sort(function(W,Y){return W.index-Y.index}).map(function(W){return{data:W.data,mode:W.mode,length:W.length}})}function w(I,x){switch(x){case e.NUMERIC:return t.getBitsLength(I);case e.ALPHANUMERIC:return r.getBitsLength(I);case e.KANJI:return o.getBitsLength(I);case e.BYTE:return i.getBitsLength(I)}}function h(I){return I.reduce(function(x,k){const B=x.length-1>=0?x[x.length-1]:null;return B&&B.mode===k.mode?(x[x.length-1].data+=k.data,x):(x.push(k),x)},[])}function b(I){const x=[];for(let k=0;k<I.length;k++){const B=I[k];switch(B.mode){case e.NUMERIC:x.push([B,{data:B.data,mode:e.ALPHANUMERIC,length:B.length},{data:B.data,mode:e.BYTE,length:B.length}]);break;case e.ALPHANUMERIC:x.push([B,{data:B.data,mode:e.BYTE,length:B.length}]);break;case e.KANJI:x.push([B,{data:B.data,mode:e.BYTE,length:u(B.data)}]);break;case e.BYTE:x.push([{data:B.data,mode:e.BYTE,length:u(B.data)}])}}return x}function S(I,x){const k={},B={start:{}};let L=["start"];for(let $=0;$<I.length;$++){const W=I[$],Y=[];for(let D=0;D<W.length;D++){const j=W[D],G=""+$+D;Y.push(G),k[G]={node:j,lastCount:0},B[G]={};for(let V=0;V<L.length;V++){const v=L[V];k[v]&&k[v].node.mode===j.mode?(B[v][G]=w(k[v].lastCount+j.length,j.mode)-w(k[v].lastCount,j.mode),k[v].lastCount+=j.length):(k[v]&&(k[v].lastCount=j.length),B[v][G]=w(j.length,j.mode)+4+e.getCharCountIndicator(j.mode,x))}}L=Y}for(let $=0;$<L.length;$++)B[L[$]].end=0;return{map:B,table:k}}function A(I,x){let k;const B=e.getBestModeForData(I);if(k=e.from(x,B),k!==e.BYTE&&k.bit<B.bit)throw new Error('"'+I+'" cannot be encoded with mode '+e.toString(k)+`.
 Suggested mode is: `+e.toString(B));switch(k===e.KANJI&&!a.isKanjiModeEnabled()&&(k=e.BYTE),k){case e.NUMERIC:return new t(I);case e.ALPHANUMERIC:return new r(I);case e.KANJI:return new o(I);case e.BYTE:return new i(I)}}n.fromArray=function(x){return x.reduce(function(k,B){return typeof B=="string"?k.push(A(B,null)):B.data&&k.push(A(B.data,B.mode)),k},[])},n.fromString=function(x,k){const B=p(x,a.isKanjiModeEnabled()),L=b(B),$=S(L,k),W=c.find_path($.map,"start","end"),Y=[];for(let D=1;D<W.length-1;D++)Y.push($.table[W[D]].node);return n.fromArray(h(Y))},n.rawSplit=function(x){return n.fromArray(p(x,a.isKanjiModeEnabled()))}})(oy);const ou=Fn,ol=nu,QS=BS,e2=MS,t2=Zm,n2=Xm,Jl=Jm,Ql=ru,r2=LS,bc=ty,i2=ry,o2=wi,sl=oy;function s2(n,e){const t=n.size,r=n2.getPositions(e);for(let i=0;i<r.length;i++){const o=r[i][0],s=r[i][1];for(let a=-1;a<=7;a++)if(!(o+a<=-1||t<=o+a))for(let c=-1;c<=7;c++)s+c<=-1||t<=s+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?n.set(o+a,s+c,!0,!0):n.set(o+a,s+c,!1,!0))}}function a2(n){const e=n.size;for(let t=8;t<e-8;t++){const r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function c2(n,e){const t=t2.getPositions(e);for(let r=0;r<t.length;r++){const i=t[r][0],o=t[r][1];for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s===-2||s===2||a===-2||a===2||s===0&&a===0?n.set(i+s,o+a,!0,!0):n.set(i+s,o+a,!1,!0)}}function u2(n,e){const t=n.size,r=bc.getEncodedBits(e);let i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+t-8-3,s=(r>>a&1)===1,n.set(i,o,s,!0),n.set(o,i,s,!0)}function al(n,e,t){const r=n.size,i=i2.getEncodedBits(e,t);let o,s;for(o=0;o<15;o++)s=(i>>o&1)===1,o<6?n.set(o,8,s,!0):o<8?n.set(o+1,8,s,!0):n.set(r-15+o,8,s,!0),o<8?n.set(8,r-o-1,s,!0):o<9?n.set(8,15-o-1+1,s,!0):n.set(8,15-o-1,s,!0);n.set(r-8,8,1,!0)}function l2(n,e){const t=n.size;let r=-1,i=t-1,o=7,s=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!n.isReserved(i,a-c)){let u=!1;s<e.length&&(u=(e[s]>>>o&1)===1),n.set(i,a-c,u),o--,o===-1&&(s++,o=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function d2(n,e,t){const r=new QS;t.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),o2.getCharCountIndicator(c.mode,n)),c.write(r)});const i=ou.getSymbolTotalCodewords(n),o=Ql.getTotalCodewordsCount(n,e),s=(i-o)*8;for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(s-r.getLengthInBits())/8;for(let c=0;c<a;c++)r.put(c%2?17:236,8);return f2(r,n,e)}function f2(n,e,t){const r=ou.getSymbolTotalCodewords(e),i=Ql.getTotalCodewordsCount(e,t),o=r-i,s=Ql.getBlocksCount(e,t),a=r%s,c=s-a,u=Math.floor(r/s),d=Math.floor(o/s),p=d+1,w=u-d,h=new r2(w);let b=0;const S=new Array(s),A=new Array(s);let I=0;const x=new Uint8Array(n.buffer);for(let W=0;W<s;W++){const Y=W<c?d:p;S[W]=x.slice(b,b+Y),A[W]=h.encode(S[W]),b+=Y,I=Math.max(I,Y)}const k=new Uint8Array(r);let B=0,L,$;for(L=0;L<I;L++)for($=0;$<s;$++)L<S[$].length&&(k[B++]=S[$][L]);for(L=0;L<w;L++)for($=0;$<s;$++)k[B++]=A[$][L];return k}function h2(n,e,t,r){let i;if(Array.isArray(n))i=sl.fromArray(n);else if(typeof n=="string"){let u=e;if(!u){const d=sl.rawSplit(n);u=bc.getBestVersionForData(d,t)}i=sl.fromString(n,u||40)}else throw new Error("Invalid data");const o=bc.getBestVersionForData(i,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const s=d2(e,t,i),a=ou.getSymbolSize(e),c=new e2(a);return s2(c,e),a2(c),c2(c,e),al(c,t,0),e>=7&&u2(c,e),l2(c,s),isNaN(r)&&(r=Jl.getBestMask(c,al.bind(null,c,t))),Jl.applyMask(r,c),al(c,t,r),{modules:c,version:e,errorCorrectionLevel:t,maskPattern:r,segments:i}}jm.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=ol.M,i,o;return typeof t<"u"&&(r=ol.from(t.errorCorrectionLevel,ol.M),i=bc.from(t.version),o=Jl.from(t.maskPattern),t.toSJISFunc&&ou.setToSJISFunction(t.toSJISFunc)),h2(e,i,r,o)};var ay={},Tf={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(o){return[o,o]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,s=r.scale||4;return{width:o,scale:o?4:s,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const o=n.getScale(r,i);return Math.floor((r+i.margin*2)*o)},n.qrToImageData=function(r,i,o){const s=i.modules.size,a=i.modules.data,c=n.getScale(s,o),u=Math.floor((s+o.margin*2)*c),d=o.margin*c,p=[o.color.light,o.color.dark];for(let w=0;w<u;w++)for(let h=0;h<u;h++){let b=(w*u+h)*4,S=o.color.light;if(w>=d&&h>=d&&w<u-d&&h<u-d){const A=Math.floor((w-d)/c),I=Math.floor((h-d)/c);S=p[a[A*s+I]?1:0]}r[b++]=S.r,r[b++]=S.g,r[b++]=S.b,r[b]=S.a}}})(Tf);(function(n){const e=Tf;function t(i,o,s){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=s,o.width=s,o.style.height=s+"px",o.style.width=s+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(o,s,a){let c=a,u=s;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),s||(u=r()),c=e.getOptions(c);const d=e.getImageWidth(o.modules.size,c),p=u.getContext("2d"),w=p.createImageData(d,d);return e.qrToImageData(w.data,o,c),t(p,u,d),p.putImageData(w,0,0),u},n.renderToDataURL=function(o,s,a){let c=a;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),c||(c={});const u=n.render(o,s,c),d=c.type||"image/png",p=c.rendererOpts||{};return u.toDataURL(d,p.quality)}})(ay);var cy={};const p2=Tf;function sp(n,e){const t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function cl(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function g2(n,e,t){let r="",i=0,o=!1,s=0;for(let a=0;a<n.length;a++){const c=Math.floor(a%e),u=Math.floor(a/e);!c&&!o&&(o=!0),n[a]?(s++,a>0&&c>0&&n[a-1]||(r+=o?cl("M",c+t,.5+u+t):cl("m",i,0),i=0,o=!1),c+1<e&&n[a+1]||(r+=cl("h",s),s=0)):i++}return r}cy.render=function(e,t,r){const i=p2.getOptions(t),o=e.modules.size,s=e.modules.data,a=o+i.margin*2,c=i.color.light.a?"<path "+sp(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+sp(i.color.dark,"stroke")+' d="'+g2(s,o,i.margin)+'"/>',d='viewBox="0 0 '+a+" "+a+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof r=="function"&&r(null,w),w};const m2=CS,ed=jm,uy=ay,y2=cy;function Nf(n,e,t,r,i){const o=[].slice.call(arguments,1),s=o.length,a=typeof o[s-1]=="function";if(!a&&!m2())throw new Error("Callback required as last argument");if(a){if(s<2)throw new Error("Too few arguments provided");s===2?(i=t,t=e,e=r=void 0):s===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=e,e=void 0))}else{if(s<1)throw new Error("Too few arguments provided");return s===1?(t=e,e=r=void 0):s===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(c,u){try{const d=ed.create(t,r);c(n(d,e,r))}catch(d){u(d)}})}try{const c=ed.create(t,r);i(null,n(c,e,r))}catch(c){i(c)}}ed.create;Nf.bind(null,uy.render);Nf.bind(null,uy.renderToDataURL);Nf.bind(null,function(n,e,t){return y2.render(n,t)});function ul(n){switch(n){case"processed":case"confirmed":case"finalized":case void 0:return n;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const vc="solana:mainnet",_2="solana:devnet",w2="solana:testnet",b2="solana:localnet",v2="https://api.mainnet-beta.solana.com";function E2(n){return n.includes(v2)?vc:/\bdevnet\b/i.test(n)?_2:/\btestnet\b/i.test(n)?w2:/\blocalhost\b/i.test(n)||/\b127\.0\.0\.1\b/.test(n)?b2:vc}function A2(n){let e=`${n.domain} wants you to sign in with your Solana account:
`;e+=`${n.address}`,n.statement&&(e+=`

${n.statement}`);const t=[];if(n.uri&&t.push(`URI: ${n.uri}`),n.version&&t.push(`Version: ${n.version}`),n.chainId&&t.push(`Chain ID: ${n.chainId}`),n.nonce&&t.push(`Nonce: ${n.nonce}`),n.issuedAt&&t.push(`Issued At: ${n.issuedAt}`),n.expirationTime&&t.push(`Expiration Time: ${n.expirationTime}`),n.notBefore&&t.push(`Not Before: ${n.notBefore}`),n.requestId&&t.push(`Request ID: ${n.requestId}`),n.resources){t.push("Resources:");for(const r of n.resources)t.push(`- ${r}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}function R2(n){return Object.freeze({...n,decode:(e,t=0)=>n.read(e,t)[0]})}var S2=n=>R2({read(e,t){const r=t===0?e:e.slice(t);if(r.length===0)return["",0];let i=r.findIndex(c=>c!==0);i=i===-1?r.length:i;const o=n[0].repeat(i);if(i===r.length)return[o,e.length];const s=r.slice(i).reduce((c,u)=>c*256n+BigInt(u),0n),a=k2(s,n);return[o+a,e.length]}});function k2(n,e){const t=BigInt(e.length),r=[];for(;n>0n;)r.unshift(e[Number(n%t)]),n/=t;return r.join("")}var I2="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",T2=()=>S2(I2);const Hr={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Kr extends Error{constructor(...e){const[t,r,i]=e;super(r),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class ly extends Error{constructor(...e){const[t,r,i,o]=e;super(i),this.code=r,this.data=o,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function Kt(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(p){s(p)}}function c(d){try{u(r.throw(d))}catch(p){s(p)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,[])).next())})}function N2(n){return window.btoa(n)}function ap(n,e){return window.btoa(String.fromCharCode.call(null,...n))}function dy(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}function ll(n,e){return Kt(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",n),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),i=new Uint8Array(t.byteLength+r.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(r),t.byteLength),i})}function O2(n){return A2(n)}function C2(n){return N2(O2(n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const x2="solana:signTransactions",cp="solana:cloneAuthorization";function B2(n){return T2().decode(n)}function M2(n){return B2(dy(n))}function P2(n,e){return new Proxy({},{get(t,r){return r==="then"?null:(t[r]==null&&(t[r]=function(i){return Kt(this,void 0,void 0,function*(){const{method:o,params:s}=L2(r,i,n),a=yield e(o,s);return o==="authorize"&&s.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield D2(s.sign_in_payload,a,e)),U2(r,a,n)})}),t[r])},defineProperty(){return!1},deleteProperty(){return!1}})}function L2(n,e,t){let r=e,i=n.toString().replace(/[A-Z]/g,o=>`_${o.toLowerCase()}`).toLowerCase();switch(n){case"authorize":{let{chain:o}=r;if(t==="legacy"){switch(o){case"solana:testnet":{o="testnet";break}case"solana:devnet":{o="devnet";break}case"solana:mainnet":{o="mainnet-beta";break}default:o=r.cluster}r.cluster=o}else{switch(o){case"testnet":case"devnet":{o=`solana:${o}`;break}case"mainnet-beta":{o="solana:mainnet";break}}r.chain=o}}case"reauthorize":{const{auth_token:o,identity:s}=r;if(o)switch(t){case"legacy":{i="reauthorize",r={auth_token:o,identity:s};break}default:{i="authorize";break}}break}}return{method:i,params:r}}function U2(n,e,t){switch(n){case"getCapabilities":{const r=e;switch(t){case"legacy":{const i=[x2];return r.supports_clone_authorization===!0&&i.push(cp),Object.assign(Object.assign({},r),{features:i})}case"v1":return Object.assign(Object.assign({},r),{supports_sign_and_send_transactions:!0,supports_clone_authorization:r.features.includes(cp)})}}}return e}function D2(n,e,t){var r;return Kt(this,void 0,void 0,function*(){const i=(r=n.domain)!==null&&r!==void 0?r:window.location.host,o=e.accounts[0].address,s=C2(Object.assign(Object.assign({},n),{domain:i,address:M2(o)})),a=yield t("sign_messages",{addresses:[o],payloads:[s]}),c=dy(a.signed_payloads[0]),u=ap(c.slice(0,c.length-64)),d=ap(c.slice(c.length-64));return{address:o,signed_message:u.length==0?s:u,signature:d}})}const Ui=4;function F2(n){if(n>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Ui);return new DataView(e).setUint32(0,n,!1),new Uint8Array(e)}const td=12,fy=65;function W2(n,e,t){return Kt(this,void 0,void 0,function*(){const r=F2(e),i=new Uint8Array(td);crypto.getRandomValues(i);const o=yield crypto.subtle.encrypt(py(r,i),t,new TextEncoder().encode(n)),s=new Uint8Array(r.byteLength+i.byteLength+o.byteLength);return s.set(new Uint8Array(r),0),s.set(new Uint8Array(i),r.byteLength),s.set(new Uint8Array(o),r.byteLength+i.byteLength),s})}function hy(n,e){return Kt(this,void 0,void 0,function*(){const t=n.slice(0,Ui),r=n.slice(Ui,Ui+td),i=n.slice(Ui+td),o=yield crypto.subtle.decrypt(py(t,r),e,i);return z2().decode(o)})}function py(n,e){return{additionalData:n,iv:e,name:"AES-GCM",tagLength:128}}let dl;function z2(){return dl===void 0&&(dl=new TextDecoder("utf-8")),dl}function H2(){return Kt(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function fl(){return Kt(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function K2(n){let e="";const t=new Uint8Array(n),r=t.byteLength;for(let i=0;i<r;i++)e+=String.fromCharCode(t[i]);return window.btoa(e)}function $2(){return gy(49152+Math.floor(Math.random()*16384))}function gy(n){if(n<49152||n>65535)throw new Kr(Hr.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${n} given.`,{port:n});return n}function V2(n){return n.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const q2="solana-wallet";function up(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function G2(n,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new Kr(Hr.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${q2}:/`));const r=n.startsWith("/")?n:[...up(t.pathname),...up(n)].join("/");return new URL(r,t)}function j2(n,e,t,r=["v1"]){return Kt(this,void 0,void 0,function*(){const i=gy(e),o=yield crypto.subtle.exportKey("raw",n),s=K2(o),a=G2("v1/associate/local",t);return a.searchParams.set("association",V2(s)),a.searchParams.set("port",`${i}`),r.forEach(c=>{a.searchParams.set("v",c)}),a})}function Y2(n,e){return Kt(this,void 0,void 0,function*(){const t=JSON.stringify(n),r=n.id;return W2(t,r,e)})}function Z2(n,e){return Kt(this,void 0,void 0,function*(){const t=yield hy(n,e),r=JSON.parse(t);if(Object.hasOwnProperty.call(r,"error"))throw new ly(r.id,r.error.code,r.error.message);return r})}function X2(n,e,t){return Kt(this,void 0,void 0,function*(){const[r,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",n.slice(0,fy),{name:"ECDH",namedCurve:"P-256"},!1,[])]),o=yield crypto.subtle.deriveBits({name:"ECDH",public:i},t,256),s=yield crypto.subtle.importKey("raw",o,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},s,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function J2(n,e){return Kt(this,void 0,void 0,function*(){const t=yield hy(n,e),r=JSON.parse(t);let i="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new Kr(Hr.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:i}})}const Ec={Firefox:0,Other:1};function Q2(){return navigator.userAgent.indexOf("Firefox/")!==-1?Ec.Firefox:Ec.Other}function ek(){return new Promise((n,e)=>{function t(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){t(),n()}window.addEventListener("blur",r);const i=setTimeout(()=>{t(),e()},3e3)})}let fs=null;function tk(n){fs==null&&(fs=document.createElement("iframe"),fs.style.display="none",document.body.appendChild(fs)),fs.contentWindow.location.href=n.toString()}function nk(n){return Kt(this,void 0,void 0,function*(){if(n.protocol==="https:")window.location.assign(n);else try{const e=Q2();switch(e){case Ec.Firefox:tk(n);break;case Ec.Other:{const t=ek();window.location.assign(n),yield t;break}default:}}catch{throw new Kr(Hr.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function rk(n,e){return Kt(this,void 0,void 0,function*(){const t=$2(),r=yield j2(n,t,e);return yield nk(r),t})}const lp={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},ik="com.solana.mobilewalletadapter.v1";function ok(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Kr(Hr.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function sk(n){let e;try{e=new URL(n)}catch{throw new Kr(Hr.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Kr(Hr.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function dp(n){return new DataView(n).getUint32(0,!1)}function ak(n,e){return Kt(this,void 0,void 0,function*(){ok();const t=yield H2(),i=`ws://localhost:${yield rk(t.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let o;const s=(()=>{const d=[...lp.retryDelayScheduleMs];return()=>d.length>1?d.shift():d[0]})();let a=1,c=0,u={__type:"disconnected"};return new Promise((d,p)=>{let w;const h={},b=()=>Kt(this,void 0,void 0,function*(){if(u.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${u.__type}\`.`);return}w.removeEventListener("open",b);const{associationKeypair:L}=u,$=yield fl();w.send(yield ll($.publicKey,L.privateKey)),u={__type:"hello_req_sent",associationPublicKey:L.publicKey,ecdhPrivateKey:$.privateKey}}),S=L=>{L.wasClean?u={__type:"disconnected"}:p(new Kr(Hr.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${L.code}: ${L.reason}).`,{closeEvent:L})),x()},A=L=>Kt(this,void 0,void 0,function*(){x(),Date.now()-o>=lp.timeoutMs?p(new Kr(Hr.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise($=>{const W=s();k=window.setTimeout($,W)}),B())}),I=L=>Kt(this,void 0,void 0,function*(){const $=yield L.data.arrayBuffer();switch(u.__type){case"connecting":if($.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const W=yield fl();w.send(yield ll(W.publicKey,t.privateKey)),u={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:W.privateKey};break;case"connected":try{const Y=$.slice(0,Ui),D=dp(Y);if(D!==c+1)throw new Error("Encrypted message has invalid sequence number");c=D;const j=yield Z2($,u.sharedSecret),G=h[j.id];delete h[j.id],G.resolve(j.result)}catch(Y){if(Y instanceof ly){const D=h[Y.jsonRpcMessageId];delete h[Y.jsonRpcMessageId],D.reject(Y)}else throw Y}break;case"hello_req_sent":{if($.byteLength===0){const V=yield fl();w.send(yield ll(V.publicKey,t.privateKey)),u={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:V.privateKey};break}const Y=yield X2($,u.associationPublicKey,u.ecdhPrivateKey),D=$.slice(fy),j=D.byteLength!==0?yield Kt(this,void 0,void 0,function*(){const V=D.slice(0,Ui),v=dp(V);if(v!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=v,J2(D,Y)}):{protocol_version:"legacy"};u={__type:"connected",sharedSecret:Y,sessionProperties:j};const G=P2(j.protocol_version,(V,v)=>Kt(this,void 0,void 0,function*(){const l=a++;return w.send(yield Y2({id:l,jsonrpc:"2.0",method:V,params:v??{}},Y)),new Promise((f,_)=>{h[l]={resolve(E){switch(V){case"authorize":case"reauthorize":{const{wallet_uri_base:N}=E;if(N!=null)try{sk(N)}catch(C){_(C);return}break}}f(E)},reject:_}})}));try{d(yield n(G))}catch(V){p(V)}finally{x(),w.close()}break}}});let x,k;const B=()=>{x&&x(),u={__type:"connecting",associationKeypair:t},o===void 0&&(o=Date.now()),w=new WebSocket(i,[ik]),w.addEventListener("open",b),w.addEventListener("close",S),w.addEventListener("error",A),w.addEventListener("message",I),x=()=>{window.clearTimeout(k),w.removeEventListener("open",b),w.removeEventListener("close",S),w.removeEventListener("error",A),w.removeEventListener("message",I)}};B()})})}function ck(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=r}var s=n.length,a=n.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function d(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var b=0,S=0,A=0,I=h.length;A!==I&&h[A]===0;)A++,b++;for(var x=(I-A)*u+1>>>0,k=new Uint8Array(x);A!==I;){for(var B=h[A],L=0,$=x-1;(B!==0||L<S)&&$!==-1;$--,L++)B+=256*k[$]>>>0,k[$]=B%s>>>0,B=B/s>>>0;if(B!==0)throw new Error("Non-zero carry");S=L,A++}for(var W=x-S;W!==x&&k[W]===0;)W++;for(var Y=a.repeat(b);W<x;++W)Y+=n.charAt(k[W]);return Y}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;for(var b=0,S=0,A=0;h[b]===a;)S++,b++;for(var I=(h.length-b)*c+1>>>0,x=new Uint8Array(I);h[b];){var k=h.charCodeAt(b);if(k>255)return;var B=e[k];if(B===255)return;for(var L=0,$=I-1;(B!==0||L<A)&&$!==-1;$--,L++)B+=s*x[$]>>>0,x[$]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");A=L,b++}for(var W=I-A;W!==I&&x[W]===0;)W++;for(var Y=new Uint8Array(S+(I-W)),D=S;W!==I;)Y[D++]=x[W++];return Y}function w(h){var b=p(h);if(b)return b;throw new Error("Non-base"+s+" character")}return{encode:d,decodeUnsafe:p,decode:w}}var uk=ck;const lk=uk,dk="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var fk=lk(dk);const nd=_i(fk);function tt(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(p){s(p)}}function c(d){try{u(r.throw(d))}catch(p){s(p)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,[])).next())})}function J(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function Wt(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var ms,$t,Ei,ho,my,yy,_y,za;const hk=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,pk=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,gk=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class mk{constructor(){ms.add(this),$t.set(this,null),Ei.set(this,{}),ho.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),J(this,ms,"m",yy).call(this),J(this,$t,"f")&&(J(this,$t,"f").style.display="flex")},this.close=(e=void 0)=>{var t;console.debug("Modal close"),J(this,ms,"m",_y).call(this),J(this,$t,"f")&&(J(this,$t,"f").style.display="none"),(t=J(this,Ei,"f").close)===null||t===void 0||t.forEach(r=>r(e))},za.set(this,e=>{e.key==="Escape"&&this.close(e)}),this.init=this.init.bind(this),Wt(this,$t,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return tt(this,void 0,void 0,function*(){console.log("Injecting modal"),J(this,ms,"m",my).call(this)})}addEventListener(e,t){var r;return!((r=J(this,Ei,"f")[e])===null||r===void 0)&&r.push(t)||(J(this,Ei,"f")[e]=[t]),()=>this.removeEventListener(e,t)}removeEventListener(e,t){var r;J(this,Ei,"f")[e]=(r=J(this,Ei,"f")[e])===null||r===void 0?void 0:r.filter(i=>t!==i)}}$t=new WeakMap,Ei=new WeakMap,ho=new WeakMap,za=new WeakMap,ms=new WeakSet,my=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){J(this,$t,"f")||Wt(this,$t,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}Wt(this,$t,document.createElement("div")),J(this,$t,"f").id="mobile-wallet-adapter-embedded-root-ui",J(this,$t,"f").innerHTML=hk,J(this,$t,"f").style.display="none";const e=J(this,$t,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);const t=document.createElement("style");t.id="mobile-wallet-adapter-embedded-modal-styles",t.textContent=pk+this.contentStyles;const r=document.createElement("div");r.innerHTML=gk,this.dom=r.attachShadow({mode:"closed"}),this.dom.appendChild(t),this.dom.appendChild(J(this,$t,"f")),document.body.appendChild(r)},yy=function(){if(!J(this,$t,"f")||J(this,ho,"f"))return;[...J(this,$t,"f").querySelectorAll("[data-modal-close]")].forEach(t=>t==null?void 0:t.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",J(this,za,"f")),Wt(this,ho,!0)},_y=function(){if(!J(this,ho,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",J(this,za,"f")),!J(this,$t,"f")))return;[...J(this,$t,"f").querySelectorAll("[data-modal-close]")].forEach(t=>t==null?void 0:t.removeEventListener("click",this.close)),Wt(this,ho,!1)};const yk="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function Ta(n){return window.btoa(String.fromCharCode.call(null,...n))}function Qr(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}var po,Di,rd,id,od,sd,ys,hn,Tr,ei,go,Ai,Ha,_s,Ka,ad,$a,wy,cd,Va,mo,qa,ws,Ga,yo,bs,ja,ud,ld,Ya,Za,dd,fd,Xa;const by="Mobile Wallet Adapter",_k=64,wk=[An,at,ri,$i];class bk{constructor(e){po.add(this),Di.set(this,{}),rd.set(this,"1.0.0"),id.set(this,by),od.set(this,"https://solanamobile.com/wallets"),sd.set(this,yk),ys.set(this,void 0),hn.set(this,void 0),Tr.set(this,void 0),ei.set(this,!1),go.set(this,0),Ai.set(this,[]),Ha.set(this,void 0),_s.set(this,void 0),Ka.set(this,void 0),ad.set(this,(t,r)=>{var i;return!((i=J(this,Di,"f")[t])===null||i===void 0)&&i.push(r)||(J(this,Di,"f")[t]=[r]),()=>J(this,po,"m",wy).call(this,t,r)}),cd.set(this,({silent:t}={})=>tt(this,void 0,void 0,function*(){if(J(this,ei,"f")||this.connected)return{accounts:this.accounts};Wt(this,ei,!0);try{if(t){const r=yield J(this,Tr,"f").get();if(r)yield J(this,qa,"f").call(this,r.capabilities),yield J(this,mo,"f").call(this,r);else return{accounts:this.accounts}}else yield J(this,Va,"f").call(this)}catch(r){throw new Error(r instanceof Error&&r.message||"Unknown error")}finally{Wt(this,ei,!1)}return{accounts:this.accounts}})),Va.set(this,t=>tt(this,void 0,void 0,function*(){try{const r=yield J(this,Tr,"f").get();if(r)return J(this,mo,"f").call(this,r),r;const i=yield J(this,Ha,"f").select(J(this,Ai,"f"));return yield J(this,yo,"f").call(this,o=>tt(this,void 0,void 0,function*(){const[s,a]=yield Promise.all([o.getCapabilities(),o.authorize({chain:i,identity:J(this,ys,"f"),sign_in_payload:t})]),c=J(this,ja,"f").call(this,a.accounts),u=Object.assign(Object.assign({},a),{accounts:c,chain:i,capabilities:s});return Promise.all([J(this,qa,"f").call(this,s),J(this,Tr,"f").set(u),J(this,mo,"f").call(this,u)]),u}))}catch(r){throw new Error(r instanceof Error&&r.message||"Unknown error")}})),mo.set(this,t=>tt(this,void 0,void 0,function*(){var r;const i=J(this,hn,"f")==null||((r=J(this,hn,"f"))===null||r===void 0?void 0:r.accounts.length)!==t.accounts.length||J(this,hn,"f").accounts.some((o,s)=>o.address!==t.accounts[s].address);Wt(this,hn,t),i&&J(this,po,"m",$a).call(this,"change",{accounts:this.accounts})})),qa.set(this,t=>tt(this,void 0,void 0,function*(){const r=t.features.includes("solana:signTransactions"),i=t.supports_sign_and_send_transactions,o=An in this.features!==i||at in this.features!==r;Wt(this,_s,Object.assign(Object.assign({},(i||!i&&!r)&&{[An]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:J(this,Ya,"f")}}),r&&{[at]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:J(this,Za,"f")}})),o&&J(this,po,"m",$a).call(this,"change",{features:this.features})})),ws.set(this,(t,r,i)=>tt(this,void 0,void 0,function*(){var o,s;try{const[a,c]=yield Promise.all([(s=(o=J(this,hn,"f"))===null||o===void 0?void 0:o.capabilities)!==null&&s!==void 0?s:yield t.getCapabilities(),t.authorize({auth_token:r,identity:J(this,ys,"f"),chain:i})]),u=J(this,ja,"f").call(this,c.accounts),d=Object.assign(Object.assign({},c),{accounts:u,chain:i,capabilities:a});Promise.all([J(this,Tr,"f").set(d),J(this,mo,"f").call(this,d)])}catch(a){throw J(this,Ga,"f").call(this),new Error(a instanceof Error&&a.message||"Unknown error")}})),Ga.set(this,()=>tt(this,void 0,void 0,function*(){var t;J(this,Tr,"f").clear(),Wt(this,ei,!1),Wt(this,go,(t=J(this,go,"f"),t++,t)),Wt(this,hn,void 0),J(this,po,"m",$a).call(this,"change",{accounts:this.accounts})})),yo.set(this,t=>tt(this,void 0,void 0,function*(){var r;const i=(r=J(this,hn,"f"))===null||r===void 0?void 0:r.wallet_uri_base,o=i?{baseUri:i}:void 0,s=J(this,go,"f");try{return yield ak(t,o)}catch(a){throw J(this,go,"f")!==s&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield J(this,Ka,"f").call(this,this)),a}})),bs.set(this,()=>{if(!J(this,hn,"f"))throw new Error("Wallet not connected");return{authToken:J(this,hn,"f").auth_token,chain:J(this,hn,"f").chain}}),ja.set(this,t=>t.map(r=>{var i,o;const s=Qr(r.address);return{address:nd.encode(s),publicKey:s,label:r.label,icon:r.icon,chains:(i=r.chains)!==null&&i!==void 0?i:J(this,Ai,"f"),features:(o=r.features)!==null&&o!==void 0?o:wk}})),ud.set(this,t=>tt(this,void 0,void 0,function*(){const{authToken:r,chain:i}=J(this,bs,"f").call(this);try{const o=t.map(s=>Ta(s));return yield J(this,yo,"f").call(this,s=>tt(this,void 0,void 0,function*(){return yield J(this,ws,"f").call(this,s,r,i),(yield s.signTransactions({payloads:o})).signed_payloads.map(Qr)}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),ld.set(this,(t,r)=>tt(this,void 0,void 0,function*(){const{authToken:i,chain:o}=J(this,bs,"f").call(this);try{return yield J(this,yo,"f").call(this,s=>tt(this,void 0,void 0,function*(){const[a,c]=yield Promise.all([s.getCapabilities(),J(this,ws,"f").call(this,s,i,o)]);if(a.supports_sign_and_send_transactions){const u=Ta(t);return(yield s.signAndSendTransactions(Object.assign(Object.assign({},r),{payloads:[u]}))).signatures.map(Qr)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(s){throw new Error(s instanceof Error&&s.message||"Unknown error")}})),Ya.set(this,(...t)=>tt(this,void 0,void 0,function*(){const r=[];for(const i of t){const o=yield J(this,ld,"f").call(this,i.transaction,i.options);r.push({signature:o})}return r})),Za.set(this,(...t)=>tt(this,void 0,void 0,function*(){return(yield J(this,ud,"f").call(this,t.map(({transaction:r})=>r))).map(r=>({signedTransaction:r}))})),dd.set(this,(...t)=>tt(this,void 0,void 0,function*(){const{authToken:r,chain:i}=J(this,bs,"f").call(this),o=t.map(({account:a})=>Ta(a.publicKey)),s=t.map(({message:a})=>Ta(a));try{return yield J(this,yo,"f").call(this,a=>tt(this,void 0,void 0,function*(){return yield J(this,ws,"f").call(this,a,r,i),(yield a.signMessages({addresses:o,payloads:s})).signed_payloads.map(Qr).map(u=>({signedMessage:u,signature:u.slice(-_k)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),fd.set(this,(...t)=>tt(this,void 0,void 0,function*(){const r=[];if(t.length>1)for(const i of t)r.push(yield J(this,Xa,"f").call(this,i));else return[yield J(this,Xa,"f").call(this,t[0])];return r})),Xa.set(this,t=>tt(this,void 0,void 0,function*(){var r,i,o;Wt(this,ei,!0);try{const s=yield J(this,Va,"f").call(this,Object.assign(Object.assign({},t),{domain:(r=t==null?void 0:t.domain)!==null&&r!==void 0?r:window.location.host}));if(!s.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const a=s.sign_in_result.address,c=s.accounts.find(u=>u.address==a);return{account:Object.assign(Object.assign({},c??{address:nd.encode(Qr(a))}),{publicKey:Qr(a),chains:(i=c==null?void 0:c.chains)!==null&&i!==void 0?i:J(this,Ai,"f"),features:(o=c==null?void 0:c.features)!==null&&o!==void 0?o:s.capabilities.features}),signedMessage:Qr(s.sign_in_result.signed_message),signature:Qr(s.sign_in_result.signature)}}catch(s){throw new Error(s instanceof Error&&s.message||"Unknown error")}finally{Wt(this,ei,!1)}})),Wt(this,Tr,e.authorizationCache),Wt(this,ys,e.appIdentity),Wt(this,Ai,e.chains),Wt(this,Ha,e.chainSelector),Wt(this,Ka,e.onWalletNotFound),Wt(this,_s,{[An]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:J(this,Ya,"f")},[at]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:J(this,Za,"f")}})}get version(){return J(this,rd,"f")}get name(){return J(this,id,"f")}get url(){return J(this,od,"f")}get icon(){return J(this,sd,"f")}get chains(){return J(this,Ai,"f")}get features(){return Object.assign({[Af]:{version:"1.0.0",connect:J(this,cd,"f")},[Zl]:{version:"1.0.0",disconnect:J(this,Ga,"f")},[Rf]:{version:"1.0.0",on:J(this,ad,"f")},[ri]:{version:"1.0.0",signMessage:J(this,dd,"f")},[$i]:{version:"1.0.0",signIn:J(this,fd,"f")}},J(this,_s,"f"))}get accounts(){var e,t;return(t=(e=J(this,hn,"f"))===null||e===void 0?void 0:e.accounts)!==null&&t!==void 0?t:[]}get connected(){return!!J(this,hn,"f")}get isAuthorized(){return!!J(this,hn,"f")}get currentAuthorization(){return J(this,hn,"f")}get cachedAuthorizationResult(){return J(this,Tr,"f").get()}}Di=new WeakMap,rd=new WeakMap,id=new WeakMap,od=new WeakMap,sd=new WeakMap,ys=new WeakMap,hn=new WeakMap,Tr=new WeakMap,ei=new WeakMap,go=new WeakMap,Ai=new WeakMap,Ha=new WeakMap,_s=new WeakMap,Ka=new WeakMap,ad=new WeakMap,cd=new WeakMap,Va=new WeakMap,mo=new WeakMap,qa=new WeakMap,ws=new WeakMap,Ga=new WeakMap,yo=new WeakMap,bs=new WeakMap,ja=new WeakMap,ud=new WeakMap,ld=new WeakMap,Ya=new WeakMap,Za=new WeakMap,dd=new WeakMap,fd=new WeakMap,Xa=new WeakMap,po=new WeakSet,$a=function(e,...t){var r;(r=J(this,Di,"f")[e])===null||r===void 0||r.forEach(i=>i.apply(null,t))},wy=function(e,t){var r;J(this,Di,"f")[e]=(r=J(this,Di,"f")[e])===null||r===void 0?void 0:r.filter(i=>t!==i)};const vk="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",Ek="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class Ak extends mk{constructor(){super(...arguments),this.contentStyles=Sk,this.contentHtml=Rk}initWithError(e){super.init(),this.populateError(e)}populateError(e){var t,r;const i=(t=this.dom)===null||t===void 0?void 0:t.getElementById("mobile-wallet-adapter-error-message"),o=(r=this.dom)===null||r===void 0?void 0:r.getElementById("mobile-wallet-adapter-error-action");if(i){if(e.name==="SolanaMobileWalletAdapterError")switch(e.code){case"ERROR_WALLET_NOT_FOUND":i.innerHTML=vk,o&&o.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":i.innerHTML=Ek,o&&(o.style.display="none");return}i.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}const Rk=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,Sk=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function kk(){return tt(this,void 0,void 0,function*(){if(typeof window<"u"){const n=window.navigator.userAgent.toLowerCase(),e=new Ak;n.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}const hl="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Ik(){let n;try{n=window.localStorage}catch{}return{clear(){return tt(this,void 0,void 0,function*(){if(n)try{n.removeItem(hl)}catch{}})},get(){return tt(this,void 0,void 0,function*(){if(n)try{const e=JSON.parse(n.getItem(hl));if(e&&e.accounts){const t=e.accounts.map(r=>Object.assign(Object.assign({},r),{publicKey:"publicKey"in r?new Uint8Array(Object.values(r.publicKey)):nd.decode(r.address)}));return Object.assign(Object.assign({},e),{accounts:t})}else return e||void 0}catch{}})},set(e){return tt(this,void 0,void 0,function*(){if(n)try{n.setItem(hl,JSON.stringify(e))}catch{}})}}}function Tk(){return{select(n){return tt(this,void 0,void 0,function*(){return n.length===1?n[0]:n.includes(vc)?vc:n[0]})}}}function Ve(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(p){s(p)}}function c(d){try{u(r.throw(d))}catch(p){s(p)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,[])).next())})}function me(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function On(n,e,t,r,i){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}const hd="standard:connect",Nk="standard:disconnect",Ok="standard:events";function pl(n){return window.btoa(String.fromCharCode.call(null,...n))}function Ck(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var jt,ot,ii,Mr,Ja,Or,Ri,pd,gd,vy,Ac,Qa,ni;const ec=by,xk=64;function Bk(n){return"version"in n}function Ey(n){switch(n){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return n}}class Mk extends IS{constructor(e,t){super(),jt.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),ot.set(this,void 0),ii.set(this,!1),Mr.set(this,Ck()?ut.Loadable:ut.Unsupported),Ja.set(this,void 0),Or.set(this,void 0),Ri.set(this,void 0),pd.set(this,r=>Ve(this,void 0,void 0,function*(){if(r.accounts&&r.accounts.length>0){me(this,jt,"m",vy).call(this);const i=yield me(this,Ja,"f").call(this,r.accounts);i!==me(this,Or,"f")&&(On(this,Or,i),On(this,Ri,void 0),this.emit("connect",this.publicKey))}})),On(this,Ja,r=>Ve(this,void 0,void 0,function*(){var i;const o=yield t.addressSelector.select(r.map(({publicKey:s})=>pl(s)));return(i=r.find(({publicKey:s})=>pl(s)===o))!==null&&i!==void 0?i:r[0]})),On(this,ot,e),me(this,ot,"f").features[Ok].on("change",me(this,pd,"f")),this.name=me(this,ot,"f").name,this.icon=me(this,ot,"f").icon,this.url=me(this,ot,"f").url}get publicKey(){var e;if(!me(this,Ri,"f")&&me(this,Or,"f"))try{On(this,Ri,new X(me(this,Or,"f").publicKey),"f")}catch(t){throw new $m(t instanceof Error&&(t==null?void 0:t.message)||"Unknown error",t)}return(e=me(this,Ri,"f"))!==null&&e!==void 0?e:null}get connected(){return me(this,ot,"f").connected}get connecting(){return me(this,ii,"f")}get readyState(){return me(this,Mr,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Ve(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Ve(this,void 0,void 0,function*(){me(this,jt,"m",gd).call(this,!0)})}connect(){return Ve(this,void 0,void 0,function*(){me(this,jt,"m",gd).call(this)})}performAuthorization(e){return Ve(this,void 0,void 0,function*(){try{const t=yield me(this,ot,"f").cachedAuthorizationResult;return t?(yield me(this,ot,"f").features[hd].connect({silent:!0}),t):(e?yield me(this,ot,"f").features[$i].signIn(e):yield me(this,ot,"f").features[hd].connect(),yield yield me(this,ot,"f").cachedAuthorizationResult)}catch(t){throw new _c(t instanceof Error&&t.message||"Unknown error",t)}})}disconnect(){return Ve(this,void 0,void 0,function*(){return yield me(this,jt,"m",ni).call(this,()=>Ve(this,void 0,void 0,function*(){On(this,ii,!1),On(this,Ri,void 0),On(this,Or,void 0),yield me(this,ot,"f").features[Nk].disconnect(),this.emit("disconnect")}))})}signIn(e){return Ve(this,void 0,void 0,function*(){return me(this,jt,"m",ni).call(this,()=>Ve(this,void 0,void 0,function*(){var t;if(me(this,Mr,"f")!==ut.Installed&&me(this,Mr,"f")!==ut.Loadable)throw new Fs;On(this,ii,!0);try{const r=yield me(this,ot,"f").features[$i].signIn(Object.assign(Object.assign({},e),{domain:(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:window.location.host}));if(r.length>0)return r[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(r){throw new _c(r instanceof Error&&r.message||"Unknown error",r)}finally{On(this,ii,!1)}}))})}signMessage(e){return Ve(this,void 0,void 0,function*(){return yield me(this,jt,"m",ni).call(this,()=>Ve(this,void 0,void 0,function*(){const t=me(this,jt,"m",Ac).call(this);try{return(yield me(this,ot,"f").features[ri].signMessage({account:t,message:e}))[0].signature}catch(r){throw new Vm(r==null?void 0:r.message,r)}}))})}sendTransaction(e,t,r){return Ve(this,void 0,void 0,function*(){return yield me(this,jt,"m",ni).call(this,()=>Ve(this,void 0,void 0,function*(){const i=me(this,jt,"m",Ac).call(this);try{let s=function(){let a;switch(t.commitment){case"confirmed":case"finalized":case"processed":a=t.commitment;break;default:a="finalized"}let c;switch(r==null?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":c=r.preflightCommitment;break;case void 0:c=a;break;default:c="finalized"}return(c==="finalized"?2:c==="confirmed"?1:0)<(a==="finalized"?2:a==="confirmed"?1:0)?c:a};var o=s;if(An in me(this,ot,"f").features){const a=Ey(me(this,ot,"f").currentAuthorization.chain),[c]=(yield me(this,ot,"f").features[An].signAndSendTransaction({account:i,transaction:e.serialize(),chain:a,options:r?{skipPreflight:r.skipPreflight,maxRetries:r.maxRetries}:void 0})).map(u=>pl(u.signature));return c}else{const[a]=yield me(this,jt,"m",Qa).call(this,[e]);if(Bk(a))return yield t.sendTransaction(a);{const c=a.serialize();return yield t.sendRawTransaction(c,Object.assign(Object.assign({},r),{preflightCommitment:s()}))}}}catch(s){throw new Mi(s==null?void 0:s.message,s)}}))})}signTransaction(e){return Ve(this,void 0,void 0,function*(){return yield me(this,jt,"m",ni).call(this,()=>Ve(this,void 0,void 0,function*(){const[t]=yield me(this,jt,"m",Qa).call(this,[e]);return t}))})}signAllTransactions(e){return Ve(this,void 0,void 0,function*(){return yield me(this,jt,"m",ni).call(this,()=>Ve(this,void 0,void 0,function*(){return yield me(this,jt,"m",Qa).call(this,e)}))})}}ot=new WeakMap,ii=new WeakMap,Mr=new WeakMap,Ja=new WeakMap,Or=new WeakMap,Ri=new WeakMap,pd=new WeakMap,jt=new WeakSet,gd=function(e=!1){return Ve(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield me(this,jt,"m",ni).call(this,()=>Ve(this,void 0,void 0,function*(){if(me(this,Mr,"f")!==ut.Installed&&me(this,Mr,"f")!==ut.Loadable)throw new Fs;On(this,ii,!0);try{yield me(this,ot,"f").features[hd].connect({silent:e})}catch(t){throw new _c(t instanceof Error&&t.message||"Unknown error",t)}finally{On(this,ii,!1)}}))})},vy=function(){me(this,Mr,"f")!==ut.Installed&&this.emit("readyStateChange",On(this,Mr,ut.Installed))},Ac=function(){if(!me(this,ot,"f").isAuthorized||!me(this,Or,"f"))throw new fr;return me(this,Or,"f")},Qa=function(e){return Ve(this,void 0,void 0,function*(){const t=me(this,jt,"m",Ac).call(this);try{if(at in me(this,ot,"f").features)return me(this,ot,"f").features[at].signTransaction(...e.map(r=>({account:t,transaction:r.serialize()}))).then(r=>r.map(i=>{const o=i.signedTransaction,a=o[0]*xk+1;return Gc.deserializeMessageVersion(o.slice(a,o.length))==="legacy"?Ne.from(o):Fo.deserialize(o)}));throw new Error("Connected wallet does not support signing transactions")}catch(r){throw new Pi(r==null?void 0:r.message,r)}})},ni=function(e){return Ve(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})};class Pk extends Mk{constructor(e){var t;const r=Ey((t=e.chain)!==null&&t!==void 0?t:e.cluster);super(new bk({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>Ve(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[r],chainSelector:Tk(),onWalletNotFound:()=>Ve(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:r})}}class Lk extends Pk{}function Uk(){return{select(n){return Ve(this,void 0,void 0,function*(){return n[0]})}}}function Dk(){return Ik()}function Fk(n){return Ve(this,void 0,void 0,function*(){return kk()})}function Wk(){return Fk}function zk(n,e){if(n===e)return!0;const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function Hk(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<n.length;u++){const d=n.charAt(u),p=d.charCodeAt(0);if(e[p]!==255)throw new TypeError(d+" is ambiguous");e[p]=u}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),o=Math.log(256)/Math.log(t);function s(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let d=0,p=0,w=0;const h=u.length;for(;w!==h&&u[w]===0;)w++,d++;const b=(h-w)*o+1>>>0,S=new Uint8Array(b);for(;w!==h;){let x=u[w],k=0;for(let B=b-1;(x!==0||k<p)&&B!==-1;B--,k++)x+=256*S[B]>>>0,S[B]=x%t>>>0,x=x/t>>>0;if(x!==0)throw new Error("Non-zero carry");p=k,w++}let A=b-p;for(;A!==b&&S[A]===0;)A++;let I=r.repeat(d);for(;A<b;++A)I+=n.charAt(S[A]);return I}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let d=0,p=0,w=0;for(;u[d]===r;)p++,d++;const h=(u.length-d)*i+1>>>0,b=new Uint8Array(h);for(;d<u.length;){const x=u.charCodeAt(d);if(x>255)return;let k=e[x];if(k===255)return;let B=0;for(let L=h-1;(k!==0||B<w)&&L!==-1;L--,B++)k+=t*b[L]>>>0,b[L]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");w=B,d++}let S=h-w;for(;S!==h&&b[S]===0;)S++;const A=new Uint8Array(p+(h-S));let I=p;for(;S!==h;)A[I++]=b[S++];return A}function c(u){const d=a(u);if(d)return d;throw new Error("Non-base"+t+" character")}return{encode:s,decodeUnsafe:a,decode:c}}var Kk="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const $k=Hk(Kk);var he=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},zt=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},en,wn,Fi,Wi,Si,vs,Rc,Be,Sc,md,tc,yd,Ss,_d,fp,hp,pp,gp;class Vk extends qm{get name(){return he(this,Be,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return he(this,Be,"f").icon}get readyState(){return he(this,Sc,"f")}get publicKey(){return he(this,Fi,"f")}get connecting(){return he(this,Wi,"f")}get supportedTransactionVersions(){return he(this,Rc,"f")}get wallet(){return he(this,Be,"f")}get standard(){return!0}constructor({wallet:e}){super(),en.add(this),wn.set(this,void 0),Fi.set(this,void 0),Wi.set(this,void 0),Si.set(this,void 0),vs.set(this,void 0),Rc.set(this,void 0),Be.set(this,void 0),Sc.set(this,typeof window>"u"||typeof document>"u"?ut.Unsupported:ut.Installed),_d.set(this,t=>{if("accounts"in t){const r=he(this,Be,"f").accounts[0];he(this,wn,"f")&&!he(this,Si,"f")&&r!==he(this,wn,"f")&&(r?he(this,en,"m",tc).call(this,r):(this.emit("error",new AS),he(this,en,"m",yd).call(this)))}"features"in t&&he(this,en,"m",Ss).call(this)}),zt(this,Be,e,"f"),zt(this,wn,null,"f"),zt(this,Fi,null,"f"),zt(this,Wi,!1,"f"),zt(this,Si,!1,"f"),zt(this,vs,he(this,Be,"f").features[Rf].on("change",he(this,_d,"f")),"f"),he(this,en,"m",Ss).call(this)}destroy(){zt(this,wn,null,"f"),zt(this,Fi,null,"f"),zt(this,Wi,!1,"f"),zt(this,Si,!1,"f");const e=he(this,vs,"f");e&&(zt(this,vs,null,"f"),e())}async autoConnect(){return he(this,en,"m",md).call(this,{silent:!0})}async connect(){return he(this,en,"m",md).call(this)}async disconnect(){if(Zl in he(this,Be,"f").features)try{zt(this,Si,!0,"f"),await he(this,Be,"f").features[Zl].disconnect()}catch(e){this.emit("error",new RS(e==null?void 0:e.message,e))}finally{zt(this,Si,!1,"f")}he(this,en,"m",yd).call(this)}async sendTransaction(e,t,r={}){try{const i=he(this,wn,"f");if(!i)throw new fr;let o;if(An in he(this,Be,"f").features)if(i.features.includes(An))o=An;else if(at in he(this,Be,"f").features&&i.features.includes(at))o=at;else throw new vo;else if(at in he(this,Be,"f").features){if(!i.features.includes(at))throw new vo;o=at}else throw new gs;const s=E2(t.rpcEndpoint);if(!i.chains.includes(s))throw new Mi;try{const{signers:a,...c}=r;let u;if(Li(e)?(a!=null&&a.length&&e.sign(a),u=e.serialize()):(e=await this.prepareTransaction(e,t,c),a!=null&&a.length&&e.partialSign(...a),u=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),o===An){const[d]=await he(this,Be,"f").features[An].signAndSendTransaction({account:i,chain:s,transaction:u,options:{preflightCommitment:ul(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return $k.encode(d.signature)}else{const[d]=await he(this,Be,"f").features[at].signTransaction({account:i,chain:s,transaction:u,options:{preflightCommitment:ul(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(d.signedTransaction,{...c,preflightCommitment:ul(c.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof yn?a:new Mi(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}wn=new WeakMap,Fi=new WeakMap,Wi=new WeakMap,Si=new WeakMap,vs=new WeakMap,Rc=new WeakMap,Be=new WeakMap,Sc=new WeakMap,_d=new WeakMap,en=new WeakSet,md=async function(e){try{if(this.connected||this.connecting)return;if(he(this,Sc,"f")!==ut.Installed)throw new Fs;if(zt(this,Wi,!0,"f"),!he(this,Be,"f").accounts.length)try{await he(this,Be,"f").features[Af].connect(e)}catch(r){throw new _c(r==null?void 0:r.message,r)}const t=he(this,Be,"f").accounts[0];if(!t)throw new vo;he(this,en,"m",tc).call(this,t)}catch(t){throw this.emit("error",t),t}finally{zt(this,Wi,!1,"f")}},tc=function(e){let t;try{t=new X(e.address)}catch(r){throw new $m(r==null?void 0:r.message,r)}zt(this,wn,e,"f"),zt(this,Fi,t,"f"),he(this,en,"m",Ss).call(this),this.emit("connect",t)},yd=function(){zt(this,wn,null,"f"),zt(this,Fi,null,"f"),he(this,en,"m",Ss).call(this),this.emit("disconnect")},Ss=function(){var t,r;const e=An in he(this,Be,"f").features?he(this,Be,"f").features[An].supportedTransactionVersions:he(this,Be,"f").features[at].supportedTransactionVersions;zt(this,Rc,zk(e,["legacy"])?null:new Set(e),"f"),at in he(this,Be,"f").features&&((t=he(this,wn,"f"))!=null&&t.features.includes(at))?(this.signTransaction=he(this,en,"m",fp),this.signAllTransactions=he(this,en,"m",hp)):(delete this.signTransaction,delete this.signAllTransactions),ri in he(this,Be,"f").features&&((r=he(this,wn,"f"))!=null&&r.features.includes(ri))?this.signMessage=he(this,en,"m",pp):delete this.signMessage,$i in he(this,Be,"f").features?this.signIn=he(this,en,"m",gp):delete this.signIn},fp=async function(e){try{const t=he(this,wn,"f");if(!t)throw new fr;if(!(at in he(this,Be,"f").features))throw new gs;if(!t.features.includes(at))throw new vo;try{const i=(await he(this,Be,"f").features[at].signTransaction({account:t,transaction:Li(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Li(e)?Fo.deserialize(i):Ne.from(i)}catch(r){throw r instanceof yn?r:new Pi(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},hp=async function(e){try{const t=he(this,wn,"f");if(!t)throw new fr;if(!(at in he(this,Be,"f").features))throw new gs;if(!t.features.includes(at))throw new vo;try{const r=await he(this,Be,"f").features[at].signTransaction(...e.map(i=>({account:t,transaction:Li(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,o)=>{const s=r[o].signedTransaction;return Li(i)?Fo.deserialize(s):Ne.from(s)})}catch(r){throw new Pi(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},pp=async function(e){try{const t=he(this,wn,"f");if(!t)throw new fr;if(!(ri in he(this,Be,"f").features))throw new gs;if(!t.features.includes(ri))throw new vo;try{return(await he(this,Be,"f").features[ri].signMessage({account:t,message:e}))[0].signature}catch(r){throw new Vm(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},gp=async function(e={}){try{if(!($i in he(this,Be,"f").features))throw new gs;let t;try{[t]=await he(this,Be,"f").features[$i].signIn(e)}catch(r){throw new np(r==null?void 0:r.message,r)}if(!t)throw new np;return he(this,en,"m",tc).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const qk=TS;var Gk=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},jk=function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},nc;let Cn;const su=new Set;function Yk(n){ks=void 0,su.add(n)}function Zk(n){ks=void 0,su.delete(n)}const Eo={};function Xk(){if(Cn||(Cn=Object.freeze({register:mp,get:Jk,on:Qk}),typeof window>"u"))return Cn;const n=Object.freeze({register:mp});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(n))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new eI(n))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Cn}function mp(...n){var e;return n=n.filter(t=>!su.has(t)),n.length?(n.forEach(t=>Yk(t)),(e=Eo.register)==null||e.forEach(t=>wd(()=>t(...n))),function(){var r;n.forEach(i=>Zk(i)),(r=Eo.unregister)==null||r.forEach(i=>wd(()=>i(...n)))}):()=>{}}let ks;function Jk(){return ks||(ks=[...su]),ks}function Qk(n,e){var t;return(t=Eo[n])!=null&&t.push(e)||(Eo[n]=[e]),function(){var i;Eo[n]=(i=Eo[n])==null?void 0:i.filter(o=>e!==o)}}function wd(n){try{n()}catch(e){console.error(e)}}class eI extends Event{get detail(){return Gk(this,nc,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),nc.set(this,void 0),jk(this,nc,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}nc=new WeakMap;function tI(){if(Cn||(Cn=Xk(),typeof window>"u"))return Cn;const n=window.navigator.wallets||[];if(!Array.isArray(n))return console.error("window.navigator.wallets is not an array"),Cn;const{register:e}=Cn,t=(...r)=>r.forEach(i=>wd(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),Cn}return t(...n),Cn}function nI(n){const e=yp(()=>new Set),{get:t,on:r}=yp(()=>tI()),[i,o]=Ge(()=>_p(t()));qt(()=>{const a=[r("register",(...c)=>o(u=>[...u,..._p(c)])),r("unregister",(...c)=>o(u=>u.filter(d=>c.some(p=>p===d.wallet))))];return()=>a.forEach(c=>c())},[r]);const s=rI(i);return qt(()=>{if(!s)return;const a=new Set(i);new Set(s.filter(u=>!a.has(u))).forEach(u=>u.destroy())},[s,i]),qt(()=>()=>i.forEach(a=>a.destroy()),[]),bt(()=>[...i,...n.filter(({name:a})=>i.some(c=>c.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,n,e])}function yp(n){const e=nn(void 0);return e.current===void 0&&(e.current={value:n()}),e.current.value}function rI(n){const e=nn(void 0);return qt(()=>{e.current=n}),e.current}function _p(n){return n.filter(qk).map(e=>new Vk({wallet:e}))}var No;(function(n){n[n.DESKTOP_WEB=0]="DESKTOP_WEB",n[n.MOBILE_WEB=1]="MOBILE_WEB"})(No||(No={}));function iI(n){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(n)}function oI({adapters:n,userAgentString:e}){return n.some(t=>t.name!==ec&&t.readyState===ut.Installed)?No.DESKTOP_WEB:e&&/android/i.test(e)&&!iI(e)?No.MOBILE_WEB:No.DESKTOP_WEB}function sI(n){return n?/devnet/i.test(n)?"devnet":/testnet/i.test(n)?"testnet":"mainnet-beta":"mainnet-beta"}function aI({children:n,wallets:e,adapter:t,isUnloadingRef:r,onAutoConnectRequest:i,onConnectError:o,onError:s,onSelectWallet:a}){const c=nn(!1),[u,d]=Ge(!1),p=nn(!1),[w,h]=Ge(!1),[b,S]=Ge(()=>(t==null?void 0:t.publicKey)??null),[A,I]=Ge(()=>(t==null?void 0:t.connected)??!1),x=nn(s);qt(()=>(x.current=s,()=>{x.current=void 0}),[s]);const k=nn((f,_)=>(r.current||(x.current?x.current(f,_):(console.error(f,_),f instanceof Fs&&typeof window<"u"&&_&&window.open(_.url,"_blank"))),f)),[B,L]=Ge(()=>e.map(f=>({adapter:f,readyState:f.readyState})).filter(({readyState:f})=>f!==ut.Unsupported));qt(()=>{L(_=>e.map((E,N)=>{const C=_[N];return C&&C.adapter===E&&C.readyState===E.readyState?C:{adapter:E,readyState:E.readyState}}).filter(({readyState:E})=>E!==ut.Unsupported));function f(_){L(E=>{const N=E.findIndex(({adapter:P})=>P===this);if(N===-1)return E;const{adapter:C}=E[N];return[...E.slice(0,N),{adapter:C,readyState:_},...E.slice(N+1)].filter(({readyState:P})=>P!==ut.Unsupported)})}return e.forEach(_=>_.on("readyStateChange",f,_)),()=>{e.forEach(_=>_.off("readyStateChange",f,_))}},[t,e]);const $=bt(()=>B.find(f=>f.adapter===t)??null,[t,B]);qt(()=>{if(!t)return;const f=N=>{S(N),c.current=!1,d(!1),I(!0),p.current=!1,h(!1)},_=()=>{r.current||(S(null),c.current=!1,d(!1),I(!1),p.current=!1,h(!1))},E=N=>{k.current(N,t)};return t.on("connect",f),t.on("disconnect",_),t.on("error",E),()=>{t.off("connect",f),t.off("disconnect",_),t.off("error",E),_()}},[t,r]);const W=nn(!1);qt(()=>()=>{W.current=!1},[t]),qt(()=>{W.current||c.current||A||!i||!(($==null?void 0:$.readyState)===ut.Installed||($==null?void 0:$.readyState)===ut.Loadable)||(c.current=!0,d(!0),W.current=!0,async function(){try{await i()}catch{o()}finally{d(!1),c.current=!1}}())},[A,i,o,$]);const Y=rn(async(f,_,E)=>{if(!t)throw k.current(new rp);if(!A)throw k.current(new fr,t);return await t.sendTransaction(f,_,E)},[t,A]),D=bt(()=>t&&"signTransaction"in t?async f=>{if(!A)throw k.current(new fr,t);return await t.signTransaction(f)}:void 0,[t,A]),j=bt(()=>t&&"signAllTransactions"in t?async f=>{if(!A)throw k.current(new fr,t);return await t.signAllTransactions(f)}:void 0,[t,A]),G=bt(()=>t&&"signMessage"in t?async f=>{if(!A)throw k.current(new fr,t);return await t.signMessage(f)}:void 0,[t,A]),V=bt(()=>t&&"signIn"in t?async f=>await t.signIn(f):void 0,[t]),v=rn(async()=>{if(c.current||p.current||$!=null&&$.adapter.connected)return;if(!$)throw k.current(new rp);const{adapter:f,readyState:_}=$;if(!(_===ut.Installed||_===ut.Loadable))throw k.current(new Fs,f);c.current=!0,d(!0);try{await f.connect()}catch(E){throw o(),E}finally{d(!1),c.current=!1}},[o,$]),l=rn(async()=>{if(!p.current&&t){p.current=!0,h(!0);try{await t.disconnect()}finally{h(!1),p.current=!1}}},[t]);return ee.createElement(Gm.Provider,{value:{autoConnect:!!i,wallets:B,wallet:$,publicKey:b,connected:A,connecting:u,disconnecting:w,select:a,connect:v,disconnect:l,sendTransaction:Y,signTransaction:D,signAllTransactions:j,signMessage:G,signIn:V}},n)}let gl;function cI(){var n;return gl===void 0&&(gl=((n=globalThis.navigator)==null?void 0:n.userAgent)??null),gl}function wp(n){const e=cI();return oI({adapters:n,userAgentString:e})===No.MOBILE_WEB}function uI(){const n=globalThis.location;if(n)return`${n.protocol}//${n.host}`}function lI({children:n,wallets:e,autoConnect:t,localStorageKey:r="walletName",onError:i}){const{connection:o}=Ef(),s=nI(e),a=bt(()=>{if(!wp(s))return null;const x=s.find(k=>k.name===ec);return x||new Lk({addressSelector:Uk(),appIdentity:{uri:uI()},authorizationResultCache:Dk(),cluster:sI(o==null?void 0:o.rpcEndpoint),onWalletNotFound:Wk()})},[s,o==null?void 0:o.rpcEndpoint]),c=bt(()=>a==null||s.indexOf(a)!==-1?s:[a,...s],[s,a]),[u,d]=OS(r,null),p=bt(()=>c.find(x=>x.name===u)??null,[c,u]),w=rn(x=>{u!==x&&(p&&p.name!==ec&&p.disconnect(),d(x))},[p,d,u]);qt(()=>{if(!p)return;function x(){S.current||d(null)}return p.on("disconnect",x),()=>{p.off("disconnect",x)}},[p,s,d,u]);const h=nn(!1),b=bt(()=>{if(!(!t||!p))return async()=>{(t===!0||await t(p))&&(h.current?await p.connect():await p.autoConnect())}},[t,p]),S=nn(!1);qt(()=>{if(u===ec&&wp(s)){S.current=!1;return}function x(){S.current=!0}return window.addEventListener("beforeunload",x),()=>{window.removeEventListener("beforeunload",x)}},[s,u]);const A=rn(()=>{p&&w(null)},[p,w]),I=rn(x=>{h.current=!0,w(x)},[w]);return ee.createElement(aI,{wallets:c,adapter:p,isUnloadingRef:S,onAutoConnectRequest:b,onConnectError:A,onError:i,onSelectWallet:I},n)}const Ay={setVisible(n){console.error(Ry("call","setVisible"))},visible:!1};Object.defineProperty(Ay,"visible",{get(){return console.error(Ry("read","visible")),!1}});function Ry(n,e){return`You have tried to  ${n} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const Sy=Lc(Ay);function ky(){return Ys(Sy)}function dI({onSelectWallet:n}){const{connect:e,connected:t,connecting:r,disconnect:i,disconnecting:o,publicKey:s,select:a,wallet:c,wallets:u}=ra();let d;r?d="connecting":t?d="connected":o?d="disconnecting":c?d="has-wallet":d="no-wallet";const p=rn(()=>{e().catch(()=>{})},[e]),w=rn(()=>{i().catch(()=>{})},[i]),h=rn(()=>{n({onSelectWallet:a,wallets:u})},[n,a,u]);return{buttonState:d,onConnect:d==="has-wallet"?p:void 0,onDisconnect:d!=="disconnecting"&&d!=="no-wallet"?w:void 0,onSelectWallet:h,publicKey:s??void 0,walletIcon:c==null?void 0:c.adapter.icon,walletName:c==null?void 0:c.adapter.name}}const Iy=n=>ee.createElement("button",{className:`wallet-adapter-button ${n.className||""}`,disabled:n.disabled,style:n.style,onClick:n.onClick,tabIndex:n.tabIndex||0,type:"button"},n.startIcon&&ee.createElement("i",{className:"wallet-adapter-button-start-icon"},n.startIcon),n.children,n.endIcon&&ee.createElement("i",{className:"wallet-adapter-button-end-icon"},n.endIcon)),Ty=({wallet:n,...e})=>n&&ee.createElement("img",{src:n.adapter.icon,alt:`${n.adapter.name} icon`,...e});function fI({walletIcon:n,walletName:e,...t}){return ee.createElement(Iy,{...t,className:"wallet-adapter-button-trigger",startIcon:n&&e?ee.createElement(Ty,{wallet:{adapter:{icon:n,name:e}}}):void 0})}function hI({children:n,labels:e,...t}){const{setVisible:r}=ky(),{buttonState:i,onConnect:o,onDisconnect:s,publicKey:a,walletIcon:c,walletName:u}=dI({onSelectWallet(){r(!0)}}),[d,p]=Ge(!1),[w,h]=Ge(!1),b=nn(null);qt(()=>{const A=I=>{const x=b.current;!x||x.contains(I.target)||h(!1)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A)}},[]);const S=bt(()=>{if(n)return n;if(a){const A=a.toBase58();return A.slice(0,4)+".."+A.slice(-4)}else return i==="connecting"||i==="has-wallet"?e[i]:e["no-wallet"]},[i,n,e,a]);return ee.createElement("div",{className:"wallet-adapter-dropdown"},ee.createElement(fI,{...t,"aria-expanded":w,style:{pointerEvents:w?"none":"auto",...t.style},onClick:()=>{switch(i){case"no-wallet":r(!0);break;case"has-wallet":o&&o();break;case"connected":h(!0);break}},walletIcon:c,walletName:u},S),ee.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${w&&"wallet-adapter-dropdown-list-active"}`,ref:b,role:"menu"},a?ee.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),p(!0),setTimeout(()=>p(!1),400)},role:"menuitem"},d?e.copied:e["copy-address"]):null,ee.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{r(!0),h(!1)},role:"menuitem"},e["change-wallet"]),s?ee.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{s(),h(!1)},role:"menuitem"},e.disconnect):null))}const bp=({id:n,children:e,expanded:t=!1})=>{const r=nn(null),i=nn(!0),o="height 250ms ease-out",s=()=>{const c=r.current;c&&requestAnimationFrame(()=>{c.style.height=c.scrollHeight+"px"})},a=()=>{const c=r.current;c&&requestAnimationFrame(()=>{c.style.height=c.offsetHeight+"px",c.style.overflow="hidden",requestAnimationFrame(()=>{c.style.height="0"})})};return Wr(()=>{t?s():a()},[t]),Wr(()=>{const c=r.current;if(!c)return;function u(){c&&(c.style.overflow=t?"initial":"hidden",t&&(c.style.height="auto"))}function d(p){c&&p.target===c&&p.propertyName==="height"&&u()}return i.current&&(u(),i.current=!1),c.addEventListener("transitionend",d),()=>c.removeEventListener("transitionend",d)},[t]),ee.createElement("div",{className:"wallet-adapter-collapse",id:n,ref:r,role:"region",style:{height:0,transition:i.current?void 0:o}},e)},ml=({handleClick:n,tabIndex:e,wallet:t})=>ee.createElement("li",null,ee.createElement(Iy,{onClick:n,startIcon:ee.createElement(Ty,{wallet:t}),tabIndex:e},t.adapter.name,t.readyState===ut.Installed&&ee.createElement("span",null,"Detected"))),pI=()=>ee.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ee.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),ee.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),ee.createElement("g",{clipPath:"url(#clip0_880_5115)"},ee.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),ee.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),ee.createElement("defs",null,ee.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ee.createElement("stop",{stopColor:"#9945FF"}),ee.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ee.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ee.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ee.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ee.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ee.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},ee.createElement("stop",{stopColor:"#9945FF"}),ee.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ee.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ee.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ee.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ee.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ee.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},ee.createElement("stop",{stopColor:"#9945FF"}),ee.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ee.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ee.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ee.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ee.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ee.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},ee.createElement("stop",{stopColor:"#9945FF"}),ee.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),ee.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),ee.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),ee.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),ee.createElement("stop",{offset:"1",stopColor:"#00D18C"})),ee.createElement("clipPath",{id:"clip0_880_5115"},ee.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),gI=({className:n="",container:e="body"})=>{const t=nn(null),{wallets:r,select:i}=ra(),{setVisible:o}=ky(),[s,a]=Ge(!1),[c,u]=Ge(!1),[d,p]=Ge(null),[w,h]=bt(()=>{const k=[],B=[];for(const L of r)L.readyState===ut.Installed?k.push(L):B.push(L);return k.length?[k,B]:[B,[]]},[r]),b=rn(()=>{u(!1),setTimeout(()=>o(!1),150)},[o]),S=rn(k=>{k.preventDefault(),b()},[b]),A=rn((k,B)=>{i(B),S(k)},[i,S]),I=rn(()=>a(!s),[s]),x=rn(k=>{const B=t.current;if(!B)return;const L=B.querySelectorAll("button"),$=L[0],W=L[L.length-1];k.shiftKey?document.activeElement===$&&(W.focus(),k.preventDefault()):document.activeElement===W&&($.focus(),k.preventDefault())},[t]);return Wr(()=>{const k=L=>{L.key==="Escape"?b():L.key==="Tab"&&x(L)},{overflow:B}=window.getComputedStyle(document.body);return setTimeout(()=>u(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",k,!1),()=>{document.body.style.overflow=B,window.removeEventListener("keydown",k,!1)}},[b,x]),Wr(()=>p(document.querySelector(e)),[e]),d&&Wm(ee.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${n}`,ref:t,role:"dialog"},ee.createElement("div",{className:"wallet-adapter-modal-container"},ee.createElement("div",{className:"wallet-adapter-modal-wrapper"},ee.createElement("button",{onClick:S,className:"wallet-adapter-modal-button-close"},ee.createElement("svg",{width:"14",height:"14"},ee.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),w.length?ee.createElement(ee.Fragment,null,ee.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),ee.createElement("ul",{className:"wallet-adapter-modal-list"},w.map(k=>ee.createElement(ml,{key:k.adapter.name,handleClick:B=>A(B,k.adapter.name),wallet:k})),h.length?ee.createElement(bp,{expanded:s,id:"wallet-adapter-modal-collapse"},h.map(k=>ee.createElement(ml,{key:k.adapter.name,handleClick:B=>A(B,k.adapter.name),tabIndex:s?0:-1,wallet:k}))):null),h.length?ee.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:I,tabIndex:0},ee.createElement("span",null,s?"Less ":"More ","options"),ee.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${s?"wallet-adapter-modal-list-more-icon-rotate":""}`},ee.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):ee.createElement(ee.Fragment,null,ee.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),ee.createElement("div",{className:"wallet-adapter-modal-middle"},ee.createElement(pI,null)),h.length?ee.createElement(ee.Fragment,null,ee.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:I,tabIndex:0},ee.createElement("span",null,s?"Hide ":"Already have a wallet? View ","options"),ee.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${s?"wallet-adapter-modal-list-more-icon-rotate":""}`},ee.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),ee.createElement(bp,{expanded:s,id:"wallet-adapter-modal-collapse"},ee.createElement("ul",{className:"wallet-adapter-modal-list"},h.map(k=>ee.createElement(ml,{key:k.adapter.name,handleClick:B=>A(B,k.adapter.name),tabIndex:s?0:-1,wallet:k}))))):null))),ee.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:S})),d)},mI=({children:n,...e})=>{const[t,r]=Ge(!1);return ee.createElement(Sy.Provider,{value:{visible:t,setVisible:r}},n,t&&ee.createElement(gI,{...e}))},yI={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function _I(n){return ee.createElement(hI,{...n,labels:yI})}const wI={localnet:"http://localhost:8899",devnet:"https://api.devnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com"};function bI(n){return wI[n]||n}const vI=[{value:"localnet",label:"Localnet"},{value:"devnet",label:"Devnet"},{value:"mainnet-beta",label:"Mainnet"},{value:"custom",label:"Custom"}];var EI=Symbol.for("preact-signals");function Of(){if(Oo>1)Oo--;else{for(var n,e=!1;Is!==void 0;){var t=Is;for(Is=void 0,bd++;t!==void 0;){var r=t.o;if(t.o=void 0,t.f&=-3,!(8&t.f)&&Cy(t))try{t.c()}catch(i){e||(n=i,e=!0)}t=r}}if(bd=0,Oo--,e)throw n}}var Ue=void 0;function Ny(n){var e=Ue;Ue=void 0;try{return n()}finally{Ue=e}}var Is=void 0,Oo=0,bd=0,kc=0;function Oy(n){if(Ue!==void 0){var e=n.n;if(e===void 0||e.t!==Ue)return e={i:0,S:n,p:Ue.s,n:void 0,t:Ue,e:void 0,x:void 0,r:e},Ue.s!==void 0&&(Ue.s.n=e),Ue.s=e,n.n=e,32&Ue.f&&n.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=Ue.s,e.n=void 0,Ue.s.n=e,Ue.s=e),e}}function an(n,e){this.v=n,this.i=0,this.n=void 0,this.t=void 0,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}an.prototype.brand=EI;an.prototype.h=function(){return!0};an.prototype.S=function(n){var e=this,t=this.t;t!==n&&n.e===void 0&&(n.x=t,this.t=n,t!==void 0?t.e=n:Ny(function(){var r;(r=e.W)==null||r.call(e)}))};an.prototype.U=function(n){var e=this;if(this.t!==void 0){var t=n.e,r=n.x;t!==void 0&&(t.x=r,n.e=void 0),r!==void 0&&(r.e=t,n.x=void 0),n===this.t&&(this.t=r,r===void 0&&Ny(function(){var i;(i=e.Z)==null||i.call(e)}))}};an.prototype.subscribe=function(n){var e=this;return xf(function(){var t=e.value,r=Ue;Ue=void 0;try{n(t)}finally{Ue=r}},{name:"sub"})};an.prototype.valueOf=function(){return this.value};an.prototype.toString=function(){return this.value+""};an.prototype.toJSON=function(){return this.value};an.prototype.peek=function(){var n=Ue;Ue=void 0;try{return this.value}finally{Ue=n}};Object.defineProperty(an.prototype,"value",{get:function(){var n=Oy(this);return n!==void 0&&(n.i=this.i),this.v},set:function(n){if(n!==this.v){if(bd>100)throw new Error("Cycle detected");this.v=n,this.i++,kc++,Oo++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{Of()}}}});function rt(n,e){return new an(n,e)}function Cy(n){for(var e=n.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function xy(n){for(var e=n.s;e!==void 0;e=e.n){var t=e.S.n;if(t!==void 0&&(e.r=t),e.S.n=e,e.i=-1,e.n===void 0){n.s=e;break}}}function By(n){for(var e=n.s,t=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):t=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}n.s=t}function eo(n,e){an.call(this,void 0),this.x=n,this.s=void 0,this.g=kc-1,this.f=4,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}eo.prototype=new an;eo.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===kc))return!0;if(this.g=kc,this.f|=1,this.i>0&&!Cy(this))return this.f&=-2,!0;var n=Ue;try{xy(this),Ue=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return Ue=n,By(this),this.f&=-2,!0};eo.prototype.S=function(n){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}an.prototype.S.call(this,n)};eo.prototype.U=function(n){if(this.t!==void 0&&(an.prototype.U.call(this,n),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};eo.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var n=this.t;n!==void 0;n=n.x)n.t.N()}};Object.defineProperty(eo.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var n=Oy(this);if(this.h(),n!==void 0&&(n.i=this.i),16&this.f)throw this.v;return this.v}});function Gn(n,e){return new eo(n,e)}function My(n){var e=n.u;if(n.u=void 0,typeof e=="function"){Oo++;var t=Ue;Ue=void 0;try{e()}catch(r){throw n.f&=-2,n.f|=8,Cf(n),r}finally{Ue=t,Of()}}}function Cf(n){for(var e=n.s;e!==void 0;e=e.n)e.S.U(e);n.x=void 0,n.s=void 0,My(n)}function AI(n){if(Ue!==this)throw new Error("Out-of-order effect");By(this),Ue=n,this.f&=-2,8&this.f&&Cf(this),Of()}function rs(n,e){this.x=n,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e==null?void 0:e.name}rs.prototype.c=function(){var n=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{n()}};rs.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,My(this),xy(this),Oo++;var n=Ue;return Ue=this,AI.bind(this,n)};rs.prototype.N=function(){2&this.f||(this.f|=2,this.o=Is,Is=this)};rs.prototype.d=function(){this.f|=8,1&this.f||Cf(this)};rs.prototype.dispose=function(){this.d()};function xf(n,e){var t=new rs(n,e);try{t.c()}catch(i){throw t.d(),i}var r=t.d.bind(t);return r[Symbol.dispose]=r,r}var Na;function is(n,e){Ee[n]=e.bind(null,Ee[n]||function(){})}function Ic(n){if(Na){var e=Na;Na=void 0,e()}Na=n&&n.S()}function Py(n){var e=this,t=n.data,r=SI(t);r.value=t;var i=bt(function(){for(var o=e.__v;o=o.__;)if(o.__c){o.__c.__$f|=4;break}return e.__$u.c=function(){var s,a=e.__$u.S(),c=i.value;a(),v0(c)||((s=e.base)==null?void 0:s.nodeType)!==3?(e.__$f|=1,e.setState({})):e.base.data=c},Gn(function(){var s=r.value.value;return s===0?0:s===!0?"":s||""})},[]);return i.value}Py.displayName="_st";Object.defineProperties(an.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Py},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});is("__b",function(n,e){if(typeof e.type=="string"){var t,r=e.props;for(var i in r)if(i!=="children"){var o=r[i];o instanceof an&&(t||(e.__np=t={}),t[i]=o,r[i]=o.peek())}}n(e)});is("__r",function(n,e){n(e),Ic();var t,r=e.__c;r&&(r.__$f&=-2,(t=r.__$u)===void 0&&(r.__$u=t=function(i){var o;return xf(function(){o=this}),o.c=function(){r.__$f|=1,r.setState({})},o}())),Ic(t)});is("__e",function(n,e,t,r){Ic(),n(e,t,r)});is("diffed",function(n,e){Ic();var t;if(typeof e.type=="string"&&(t=e.__e)){var r=e.__np,i=e.props;if(r){var o=t.U;if(o)for(var s in o){var a=o[s];a!==void 0&&!(s in r)&&(a.d(),o[s]=void 0)}else t.U=o={};for(var c in r){var u=o[c],d=r[c];u===void 0?(u=RI(t,c,d,i),o[c]=u):u.o(d,i)}}}n(e)});function RI(n,e,t,r){var i=e in n&&n.ownerSVGElement===void 0,o=rt(t);return{o:function(s,a){o.value=s,r=a},d:xf(function(){var s=o.value.value;r[e]!==s&&(r[e]=s,i?n[e]=s:s?n.setAttribute(e,s):n.removeAttribute(e))})}}is("unmount",function(n,e){if(typeof e.type=="string"){var t=e.__e;if(t){var r=t.U;if(r){t.U=void 0;for(var i in r){var o=r[i];o&&o.d()}}}}else{var s=e.__c;if(s){var a=s.__$u;a&&(s.__$u=void 0,a.d())}}n(e)});is("__h",function(n,e,t,r){(r<3||r===9)&&(e.__$f|=2),n(e,t,r)});Qn.prototype.shouldComponentUpdate=function(n,e){if(this.__R)return!0;var t=this.__$u,r=t&&t.s!==void 0;for(var i in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){if(!(r||2&this.__$f||4&this.__$f)||1&this.__$f)return!0}else if(!(r||4&this.__$f)||3&this.__$f)return!0;for(var o in n)if(o!=="__source"&&n[o]!==this.props[o])return!0;for(var s in this.props)if(!(s in n))return!0;return!1};function SI(n){return bt(function(){return rt(n)},[])}const Dr=rt("localnet"),qo=rt(""),vp=rt(!1),Go=rt(!1),_n=rt(null),Zn=rt(null),kn=rt(null),br=rt(null),vr=rt(null),jo=rt([]),mi=rt(!1),di=rt(!1),zs=rt(0),Hs=rt(0),Ts=rt(0),Co=rt(0),rc=rt(0),Ks=rt(0),Tc=rt(!1),vd=rt([]),Ep=rt(null),kI=rt(null),os=Gn(()=>mi.value&&di.value),II=Gn(()=>os.value&&[0,1,2].includes(kn.value)),TI=Gn(()=>os.value&&kn.value===0),NI=Gn(()=>os.value&&kn.value===0),OI=Gn(()=>{if(!os.value||![0,1,2].includes(kn.value))return!1;const n=Zn.value;return n&&n.userDebt>0}),CI=Gn(()=>os.value&&[0,1,3].includes(kn.value)),xI=Gn(()=>kn.value===0&&_n.value!==null),BI=Gn(()=>kn.value===0&&jo.value.some(n=>n.role!==0)),MI=Gn(()=>kn.value===0&&_n.value!==null&&!os.value),PI=Gn(()=>!Go.value),LI=Gn(()=>Go.value&&_n.value===null);function Vt(n,e=!1){const t={text:String(n),isError:e,ts:Date.now()},r=[...vd.value,t];r.length>100&&r.shift(),vd.value=r}function UI(){const n=Zn.value;return n?{depositedNav:n.depositedNav,userDebt:n.userDebt,protocolDebt:n.protocolDebt,borrowCapacity:Ks.value,wsolBalance:zs.value,navSolBalance:Hs.value}:null}function Ed(){_n.value=null,Zn.value=null,kn.value=null,br.value=null,vr.value=null,jo.value=[],mi.value=!1,di.value=!1,zs.value=0,Hs.value=0,Ts.value=0,Co.value=0,rc.value=0,Ks.value=0}const oa=new X("4U2Pgjdq51NXUEDVX4yyFNMdg6PuLHs9ikn9JThkn21p"),qr=new X("AVMmmRzwc2kETQNhPiFVnyu62HrgsQXTD6D7SnSfEz7v"),sa=new X("81JEJdJSZbaXixpD8WQSBWBfkDa6m6KpXpSErzYUHq6z"),aa=new X("Lmdgb4NE4T3ubmQZQZQZ7t4UP6A98NdVbmZPcoEdkdC"),to=new X("DotD4dZAyr4Kb6AD3RHid8VgmsHUzWF6LRd4WvAMezRj"),ss=new X("A5M1nWfi6ATSamEJ1ASr2FC87BMwijthTbNRYG7BhYSc"),ca=new X("43vPhZeow3pgYa6zrPXASVQhdXTMfowyfNK87BYizhnL"),ua=new X("BCYzijbWwmqRnsTWjGhHbneST2emQY36WcRAkbkhsQMt"),la=new X("B8jccpiKZjapgfw1ay6EH3pPnxqTmimsm2KsTZ9LSmjf");new X("EKVkmuwDKRKHw85NPTbKSKuS75EY4NLcxe1qzSPixLdy");const gr=new X("navSnrYJkCxMiyhM3F7K889X1u8JFLVHHLxiyo6Jjqo"),Un=new X("So11111111111111111111111111111111111111112"),Nc=new X("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),DI=new X("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new X("11111111111111111111111111111111");const FI=ce.Buffer.from("personal_position"),WI=ce.Buffer.from("personal_position_escrow"),zI=ce.Buffer.from("log"),HI=104,Ap=112,yl=104,Rp=74;function Er(){return X.findProgramAddressSync([ce.Buffer.from("authority")],oa)}function Ly(){return X.findProgramAddressSync([ce.Buffer.from("config")],oa)}function KI(n){return X.findProgramAddressSync([ce.Buffer.from("position"),n.toBuffer()],oa)}function Uy(n,e){return X.findProgramAddressSync([ce.Buffer.from("key_auth"),n.toBuffer(),e.toBuffer()],oa)}function no(n){return X.findProgramAddressSync([FI,to.toBuffer(),n.toBuffer()],qr)}function au(n){return X.findProgramAddressSync([WI,n.toBuffer()],qr)}function as(){return X.findProgramAddressSync([zI],qr)}function nt(n,e){return X.findProgramAddressSync([n.toBuffer(),Nc.toBuffer(),e.toBuffer()],DI)[0]}function Xt(n){typeof n=="bigint"&&(n=Number(n));const e=n/1e9;return e===0?"0":e<.001?e.toFixed(9):e.toFixed(4)}function Oa(n){const e=parseFloat(n.trim());if(isNaN(e)||e<0)return null;const t=Math.round(e*1e9);return t===0&&e>0?null:t}function pn(n){const e=n.toString();return e.length>12?e.slice(0,4)+".."+e.slice(-4):e}function $I(n,e){return e>n?"+"+Xt(e-n):n>e?"-"+Xt(n-e):"0"}function $r(n){switch(n){case 0:return"Admin";case 1:return"Operator";case 2:return"Depositor";case 3:return"Keeper";default:return"Unknown"}}function VI(n){switch(n){case 0:return"badge-admin";case 1:return"badge-operator";case 2:return"badge-depositor";case 3:return"badge-keeper";default:return""}}function qI(n,e){const t="https://explorer.solana.com/tx/"+n;return e==="mainnet-beta"?t:e==="devnet"?t+"?cluster=devnet":t+"?cluster=custom&customUrl="+encodeURIComponent(e)}async function GI(n){try{const[e]=Ly(),t=await n.getAccountInfo(e);Go.value=t!==null}catch{Go.value=!1}}function Sp(n,e,t){const r=nt(e,t);return n.get(r.toString())===1}async function jI(n,e){Ed();const t=await n.getProgramAccounts(oa,{filters:[{dataSize:Rp}],commitment:"confirmed"});if(t.length===0){Vt("No positions found on-chain.");return}const r=[];for(const{pubkey:u,account:d}of t){const p=d.data;if(p.length<Rp)continue;const w=new X(p.slice(8,40)),h=new X(p.slice(40,72)),b=p[72];r.push({pubkey:u,position:w,nftMint:h,role:b})}const i=r.map(u=>nt(e,u.nftMint)),o=new Map;for(let u=0;u<i.length;u+=100){const d=i.slice(u,u+100),p=await n.getMultipleAccountsInfo(d);for(let w=0;w<d.length;w++){const h=p[w];if(h&&h.data.length>=72){const b=new DataView(h.data.buffer,h.data.byteOffset);o.set(d[w].toString(),Number(b.getBigUint64(64,!0)))}}}let s=null,a=null;for(const u of r)Sp(o,e,u.nftMint)&&(!a||u.role<a.role)&&(s=u.position,a={role:u.role,pubkey:u.pubkey,nftMint:u.nftMint});if(!s||!a){Vt("No position found for this wallet.");return}_n.value=s,kn.value=a.role,br.value=a.pubkey,vr.value=a.nftMint;try{const u=await n.getAccountInfo(s);if(u){const d=u.data,p=new DataView(d.buffer,d.byteOffset),w=new X(d.slice(8,40)),h=new X(d.slice(40,72)),b=Number(p.getBigUint64(72,!0)),S=Number(p.getBigUint64(80,!0)),A=Number(p.getBigUint64(88,!0)),I=p.getUint16(96,!0),x=Number(p.getBigInt64(98,!0)),k=d[106],B={adminNftMint:w,positionPda:h,depositedNav:b,userDebt:S,protocolDebt:A,maxReinvestSpreadBps:I,lastAdminActivity:x,bump:k};Zn.value=B,mi.value=!h.equals(X.default)}}catch(u){Vt("Failed to load position: "+u.message)}const c=[];for(const u of r)u.position.equals(s)&&c.push({pda:u.pubkey,mint:u.nftMint,role:u.role,heldBySigner:Sp(o,e,u.nftMint)});jo.value=c,Vt(`Found position ${pn(s)} (role: ${$r(a.role)}${mi.value?", Mayflower OK":""})`)}function kp(n,e){const t=new DataView(n.buffer,n.byteOffset);return Number(t.getBigUint64(e,!0))}function Ip(n){if(!n||n.length<72)return null;const e=new DataView(n.buffer,n.byteOffset);return Number(e.getBigUint64(64,!0))}function YI(n){const e=n[2];let t=BigInt(0);for(let o=4;o<16;o++)t|=BigInt(n[o])<<BigInt(8*(o-4));const r=t*BigInt(1e9),i=BigInt(10)**BigInt(e);return Number(r/i)}function ZI(n,e,t){const i=BigInt(n)*BigInt(e)/BigInt(1e9)-BigInt(t);return i>BigInt(0)?Number(i):0}async function XI(n){if(zs.value=0,Hs.value=0,di.value=!1,Ts.value=0,Co.value=0,rc.value=0,Ks.value=0,!mi.value)return;const[e]=Er(),[t]=no(e),r=nt(e,Un),i=nt(e,gr),o=await n.getMultipleAccountsInfo([r,i,t,ss]),[s,a,c,u]=o,d=s?Ip(s.data):null,p=a?Ip(a.data):null;if(d!==null&&p!==null&&(zs.value=d,Hs.value=p,di.value=!0),c&&c.data.length>=Ap+8){const w=kp(c.data,HI),h=kp(c.data,Ap);Ts.value=w,Co.value=h}if(u&&u.data.length>yl+16){const w=u.data.slice(yl,yl+16),h=YI(w);rc.value=h}Ks.value=ZI(Ts.value,rc.value,Co.value)}function JI(){return F(_I,{})}function QI(){const n=t=>{Dr.value=t.target.value},e=t=>{qo.value=t.target.value};return F("div",{class:"cluster-selector",children:[F("select",{value:Dr.value,onChange:n,children:vI.map(t=>F("option",{value:t.value,children:t.label},t.value))}),Dr.value==="custom"&&F("input",{type:"text",placeholder:"https://...",value:qo.value,onInput:e})]})}function eT(){const n=Zn.value;return n?F("div",{class:"card",children:[F("h2",{children:"Position"}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"Deposited (local)"}),F("span",{class:"value",children:[Xt(n.depositedNav)," SOL"]})]}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"Deposited (Mayflower)"}),F("span",{class:"value",children:[Xt(Ts.value)," shares"]})]}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"User Debt"}),F("span",{class:`value ${n.userDebt>0?"negative":""}`,children:[Xt(n.userDebt)," SOL"]})]}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"Protocol Debt"}),F("span",{class:`value ${n.protocolDebt>0?"negative":""}`,children:[Xt(n.protocolDebt)," SOL"]})]}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"Mayflower Debt"}),F("span",{class:`value ${Co.value>0?"negative":""}`,children:[Xt(Co.value)," SOL"]})]}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"Borrow Capacity"}),F("span",{class:"value positive",children:[Xt(Ks.value)," SOL"]})]}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"Max Reinvest Spread"}),F("span",{class:"value",children:[n.maxReinvestSpreadBps," bps"]})]})]}):null}function tT(){return F("div",{class:"card",children:[F("h2",{children:"Mayflower"}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"Position Init"}),F("span",{class:`value ${mi.value?"positive":"negative"}`,children:mi.value?"Yes":"No"})]}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"ATAs Created"}),F("span",{class:`value ${di.value?"positive":"negative"}`,children:di.value?"Yes":"No"})]}),di.value&&F(Ln,{children:[F("div",{class:"data-row",children:[F("span",{class:"label",children:"wSOL Balance"}),F("span",{class:"value",children:[Xt(zs.value)," SOL"]})]}),F("div",{class:"data-row",children:[F("span",{class:"label",children:"navSOL Balance"}),F("span",{class:"value",children:Xt(Hs.value)})]})]})]})}function nT(){const n=jo.value;return n.length===0?null:F("div",{class:"card",children:[F("h2",{children:"Keyring"}),F("table",{class:"keyring-table",children:[F("thead",{children:F("tr",{children:[F("th",{children:"Role"}),F("th",{children:"Mint"}),F("th",{children:"Status"})]})}),F("tbody",{children:n.map((e,t)=>F("tr",{children:[F("td",{children:F("span",{class:`badge ${VI(e.role)}`,children:$r(e.role)})}),F("td",{children:pn(e.mint)}),F("td",{children:e.heldBySigner?F("span",{class:"badge badge-held",children:"HELD"}):F("span",{style:{color:"var(--text-dim)"},children:"--"})})]},t))})]})]})}function _l({onAction:n}){const e=_n.value!==null;return F("div",{class:"action-bar",children:[PI.value&&F("button",{class:"primary",onClick:()=>n("initProtocol"),children:"Init Protocol"}),LI.value&&F("button",{class:"primary",onClick:()=>n("createPosition"),children:"New Position"}),MI.value&&F("button",{class:"primary",onClick:()=>n("setup"),children:"Setup Mayflower"}),e&&F(Ln,{children:[F("button",{disabled:!II.value,onClick:()=>n("buy"),children:"Buy"}),F("button",{disabled:!TI.value,onClick:()=>n("sell"),children:"Sell"}),F("button",{disabled:!NI.value,onClick:()=>n("borrow"),children:"Borrow"}),F("button",{disabled:!OI.value,onClick:()=>n("repay"),children:"Repay"}),F("button",{disabled:!CI.value,onClick:()=>n("reinvest"),children:"Reinvest"}),F("button",{disabled:!xI.value,onClick:()=>n("authorize"),children:"Auth Key"}),F("button",{disabled:!BI.value,onClick:()=>n("revoke"),children:"Revoke Key"})]}),F("button",{disabled:Tc.value,onClick:()=>n("refresh"),style:{marginLeft:"auto"},children:Tc.value?"Refreshing...":"Refresh"})]})}function wl(){const n=nn(null),e=vd.value;return qt(()=>{n.current&&(n.current.scrollTop=n.current.scrollHeight)},[e.length]),F("div",{class:"log-panel",ref:n,children:e.map((t,r)=>F("div",{class:`log-entry ${t.isError?"error":""}`,children:t.text},r))})}function rT({onAction:n}){return ra().connected?Go.value?_n.value===null?F("div",{children:[F("div",{class:"status-msg",children:[F("h2",{children:"No Position Found"}),F("p",{children:"No position NFT found in your wallet. Create a new position to get started."})]}),F(_l,{onAction:n}),F(wl,{})]}):F("div",{children:[F("div",{class:"card",style:{marginBottom:"12px"},children:F("div",{class:"data-row",children:[F("span",{class:"label",children:"Your Role"}),F("span",{class:"value",children:F("span",{class:`badge badge-${$r(kn.value).toLowerCase()}`,children:$r(kn.value)})})]})}),F(_l,{onAction:n}),F(eT,{}),F(tT,{}),F(nT,{}),F(wl,{})]}):F("div",{children:[F("div",{class:"status-msg",children:[F("h2",{children:"Protocol Not Initialized"}),F("p",{children:"The Hardig protocol config hasn't been created on this cluster yet."})]}),F(_l,{onAction:n}),F(wl,{})]}):F("div",{class:"status-msg",children:[F("h2",{children:"Connect Wallet"}),F("p",{children:"Connect a wallet to view your positions."})]})}var Bf={exports:{}};const iT=/[\p{Lu}]/u,oT=/[\p{Ll}]/u,Tp=/^[\p{Lu}](?![\p{Lu}])/gu,Dy=/([\p{Alpha}\p{N}_]|$)/u,Fy=/[_.\- ]+/,sT=new RegExp("^"+Fy.source),Np=new RegExp(Fy.source+Dy.source,"gu"),Op=new RegExp("\\d+"+Dy.source,"gu"),aT=(n,e,t)=>{let r=!1,i=!1,o=!1;for(let s=0;s<n.length;s++){const a=n[s];r&&iT.test(a)?(n=n.slice(0,s)+"-"+n.slice(s),r=!1,o=i,i=!0,s++):i&&o&&oT.test(a)?(n=n.slice(0,s-1)+"-"+n.slice(s-1),o=i,i=!1,r=!0):(r=e(a)===a&&t(a)!==a,o=i,i=t(a)===a&&e(a)!==a)}return n},cT=(n,e)=>(Tp.lastIndex=0,n.replace(Tp,t=>e(t))),uT=(n,e)=>(Np.lastIndex=0,Op.lastIndex=0,n.replace(Np,(t,r)=>e(r)).replace(Op,t=>e(t))),Wy=(n,e)=>{if(!(typeof n=="string"||Array.isArray(n)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(n)?n=n.map(o=>o.trim()).filter(o=>o.length).join("-"):n=n.trim(),n.length===0)return"";const t=e.locale===!1?o=>o.toLowerCase():o=>o.toLocaleLowerCase(e.locale),r=e.locale===!1?o=>o.toUpperCase():o=>o.toLocaleUpperCase(e.locale);return n.length===1?e.pascalCase?r(n):t(n):(n!==t(n)&&(n=aT(n,t,r)),n=n.replace(sT,""),e.preserveConsecutiveUppercase?n=cT(n,t):n=t(n),e.pascalCase&&(n=r(n.charAt(0))+n.slice(1)),uT(n,r))};Bf.exports=Wy;Bf.exports.default=Wy;var lT=Bf.exports;const dT=_i(lT);var Ae={},le={};let We=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};le.Layout=We;function Mf(n,e){return e.property?n+"["+e.property+"]":n}le.nameWithProperty=Mf;function fT(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(n.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof We))throw new TypeError("layout must be a Layout");if(e.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value:function(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value:function(t,r){return e.decode(t,r)},writable:!0})}le.bindConstructorLayout=fT;let Rn=class extends We{isCount(){throw new Error("ExternalLayout is abstract")}};class zy extends Rn{constructor(e,t){if(e===void 0&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t){t===void 0&&(t=0);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}let Pf=class extends Rn{constructor(e,t,r){if(!(e instanceof We))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Ar||this.layout instanceof Gr}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return r===void 0&&(r=0),this.layout.encode(e,t,r+this.offset)}},Ar=class extends We{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeUIntLE(e,r,this.span),this.span}},Gr=class extends We{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeUIntBE(e,r,this.span),this.span}};class ro extends We{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readIntLE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeIntLE(e,r,this.span),this.span}}class cs extends We{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readIntBE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeIntBE(e,r,this.span),this.span}}const Ad=Math.pow(2,32);function cu(n){const e=Math.floor(n/Ad),t=n-e*Ad;return{hi32:e,lo32:t}}function uu(n,e){return n*Ad+e}let hT=class extends We{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const r=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return uu(i,r)}encode(e,t,r){r===void 0&&(r=0);const i=cu(e);return t.writeUInt32LE(i.lo32,r),t.writeUInt32LE(i.hi32,r+4),8}};class pT extends We{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const r=e.readUInt32BE(t),i=e.readUInt32BE(t+4);return uu(r,i)}encode(e,t,r){r===void 0&&(r=0);const i=cu(e);return t.writeUInt32BE(i.hi32,r),t.writeUInt32BE(i.lo32,r+4),8}}let gT=class extends We{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const r=e.readUInt32LE(t),i=e.readInt32LE(t+4);return uu(i,r)}encode(e,t,r){r===void 0&&(r=0);const i=cu(e);return t.writeUInt32LE(i.lo32,r),t.writeInt32LE(i.hi32,r+4),8}};class mT extends We{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const r=e.readInt32BE(t),i=e.readUInt32BE(t+4);return uu(r,i)}encode(e,t,r){r===void 0&&(r=0);const i=cu(e);return t.writeInt32BE(i.hi32,r),t.writeUInt32BE(i.lo32,r+4),8}}class Hy extends We{constructor(e){super(4,e)}decode(e,t){return t===void 0&&(t=0),e.readFloatLE(t)}encode(e,t,r){return r===void 0&&(r=0),t.writeFloatLE(e,r),4}}class Ky extends We{constructor(e){super(4,e)}decode(e,t){return t===void 0&&(t=0),e.readFloatBE(t)}encode(e,t,r){return r===void 0&&(r=0),t.writeFloatBE(e,r),4}}class $y extends We{constructor(e){super(8,e)}decode(e,t){return t===void 0&&(t=0),e.readDoubleLE(t)}encode(e,t,r){return r===void 0&&(r=0),t.writeDoubleLE(e,r),8}}class Vy extends We{constructor(e){super(8,e)}decode(e,t){return t===void 0&&(t=0),e.readDoubleBE(t)}encode(e,t,r){return r===void 0&&(r=0),t.writeDoubleBE(e,r),8}}class qy extends We{constructor(e,t,r){if(!(e instanceof We))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Rn&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof Rn)&&0<e.span&&(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0,i=this.count;if(i instanceof Rn&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let o=0;for(;o<i;)r+=this.elementLayout.getSpan(e,t+r),++o}return r}decode(e,t){t===void 0&&(t=0);const r=[];let i=0,o=this.count;for(o instanceof Rn&&(o=o.decode(e,t));i<o;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r){r===void 0&&(r=0);const i=this.elementLayout,o=e.reduce((s,a)=>s+i.encode(a,t,r+s),0);return this.count instanceof Rn&&this.count.encode(e.length,t,r),o}}let Gy=class extends We{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((o,s)=>o&&s instanceof We,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;try{r=this.fields.reduce((i,o)=>{const s=o.getSpan(e,t);return t+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t){t===void 0&&(t=0);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){r===void 0&&(r=0);const i=r;let o=0,s=0;for(const a of this.fields){let c=a.span;if(s=0<c?c:0,a.property!==void 0){const u=e[a.property];u!==void 0&&(s=a.encode(u,t,r),0>c&&(c=a.getSpan(t,r)))}o=r,r+=c}return o+s-i}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}},Lf=class{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}},Oc=class extends Lf{constructor(e,t){if(!(e instanceof Rn&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}},Uf=class extends We{constructor(e,t,r){const i=e instanceof Ar||e instanceof Gr;if(i)e=new Oc(new Pf(e));else if(e instanceof Rn&&e.isCount())e=new Oc(e);else if(!(e instanceof Lf))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof We))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&i&&(o+=e.layout.span)),super(o,r),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return s(a)},this.configGetSourceVariant=function(a){s=a.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let r;const i=this.discriminator,o=i.decode(e,t);let s=this.registry[o];if(s===void 0){let a=0;s=this.defaultLayout,this.usesPrefixDiscriminator&&(a=i.layout.span),r=this.makeDestinationObject(),r[i.property]=o,r[s.property]=this.defaultLayout.decode(e,t+a)}else r=s.decode(e,t);return r}encode(e,t,r){r===void 0&&(r=0);const i=this.getSourceVariant(e);if(i===void 0){const o=this.discriminator,s=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=o.layout.span),o.encode(e[o.property],t,r),a+s.encode(e[s.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){const i=new jy(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(t===void 0&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}},jy=class extends We{constructor(e,t,r,i){if(!(e instanceof Uf))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof We))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=r?r.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){const r=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let o=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),o+=this.layout.getSpan(t,r+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};function _o(n){return 0>n&&(n+=4294967296),n}class Df extends We{constructor(e,t,r){if(!(e instanceof Ar||e instanceof Gr))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(o){return i=_o(o),this},this._packedGetValue=function(){return i}}decode(e,t){const r=this.makeDestinationObject();t===void 0&&(t=0);const i=this.word.decode(e,t);this._packedSetValue(i);for(const o of this.fields)o.property!==void 0&&(r[o.property]=o.decode(i));return r}encode(e,t,r){r===void 0&&(r=0);const i=this.word.decode(t,r);this._packedSetValue(i);for(const o of this.fields)if(o.property!==void 0){const s=e[o.property];s!==void 0&&o.encode(s)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new Ns(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new Yy(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class Ns{constructor(e,t,r){if(!(e instanceof Df))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const i=8*e.span,o=e.fields.reduce((s,a)=>s+a.bits,0);if(t+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-t),this.wordMask=_o(this.valueMask<<this.start),this.property=r}decode(){const e=this.container._packedGetValue();return _o(e&this.wordMask)>>>this.start}encode(e){if(!Number.isInteger(e)||e!==_o(e&this.valueMask))throw new TypeError(Mf("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=_o(e<<this.start);this.container._packedSetValue(_o(t&~this.wordMask)|r)}}let Yy=class extends Ns{constructor(e,t){super(e,1,t)}decode(e,t){return!!Ns.prototype.decode.call(this,e,t)}encode(e){return typeof e=="boolean"&&(e=+e),Ns.prototype.encode.call(this,e)}},Zy=class extends We{constructor(e,t){if(!(e instanceof Rn&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Rn||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){t===void 0&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof Rn&&(i=e.length),!(Buffer.isBuffer(e)&&i===e.length))throw new TypeError(Mf("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,i,"hex"),this.length instanceof Rn&&this.length.encode(i,t,r),i}};class Xy extends We{constructor(e){super(-1,e)}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");t===void 0&&(t=0);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t,r){t===void 0&&(t=0);let i=this.getSpan(e,t);return e.slice(t,t+i-1).toString("utf-8")}encode(e,t,r){r===void 0&&(r=0),typeof e!="string"&&(e=e.toString());const i=new Buffer(e,"utf8"),o=i.length;if(r+o>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(t,r),t[r+o]=0,o+1}}class Jy extends We{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t){if(!Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return t===void 0&&(t=0),e.length-t}decode(e,t,r){t===void 0&&(t=0);let i=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+i).toString("utf-8")}encode(e,t,r){r===void 0&&(r=0),typeof e!="string"&&(e=e.toString());const i=new Buffer(e,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(t,r),o}}class Qy extends We{constructor(e,t){super(0,t),this.value=e}decode(e,t,r){return this.value}encode(e,t,r){return 0}}le.ExternalLayout=Rn;le.GreedyCount=zy;le.OffsetLayout=Pf;le.UInt=Ar;le.UIntBE=Gr;le.Int=ro;le.IntBE=cs;le.Float=Hy;le.FloatBE=Ky;le.Double=$y;le.DoubleBE=Vy;le.Sequence=qy;le.Structure=Gy;le.UnionDiscriminator=Lf;le.UnionLayoutDiscriminator=Oc;le.Union=Uf;le.VariantLayout=jy;le.BitStructure=Df;le.BitField=Ns;le.Boolean=Yy;le.Blob=Zy;le.CString=Xy;le.UTF8=Jy;le.Constant=Qy;le.greedy=(n,e)=>new zy(n,e);le.offset=(n,e,t)=>new Pf(n,e,t);le.u8=n=>new Ar(1,n);le.u16=n=>new Ar(2,n);le.u24=n=>new Ar(3,n);le.u32=n=>new Ar(4,n);le.u40=n=>new Ar(5,n);le.u48=n=>new Ar(6,n);le.nu64=n=>new hT(n);le.u16be=n=>new Gr(2,n);le.u24be=n=>new Gr(3,n);le.u32be=n=>new Gr(4,n);le.u40be=n=>new Gr(5,n);le.u48be=n=>new Gr(6,n);le.nu64be=n=>new pT(n);le.s8=n=>new ro(1,n);le.s16=n=>new ro(2,n);le.s24=n=>new ro(3,n);le.s32=n=>new ro(4,n);le.s40=n=>new ro(5,n);le.s48=n=>new ro(6,n);le.ns64=n=>new gT(n);le.s16be=n=>new cs(2,n);le.s24be=n=>new cs(3,n);le.s32be=n=>new cs(4,n);le.s40be=n=>new cs(5,n);le.s48be=n=>new cs(6,n);le.ns64be=n=>new mT(n);le.f32=n=>new Hy(n);le.f32be=n=>new Ky(n);le.f64=n=>new $y(n);le.f64be=n=>new Vy(n);le.struct=(n,e,t)=>new Gy(n,e,t);le.bits=(n,e,t)=>new Df(n,e,t);le.seq=(n,e,t)=>new qy(n,e,t);le.union=(n,e,t)=>new Uf(n,e,t);le.unionLayoutDiscriminator=(n,e)=>new Oc(n,e);le.blob=(n,e)=>new Zy(n,e);le.cstr=n=>new Xy(n);le.utf8=(n,e)=>new Jy(n,e);le.const=(n,e)=>new Qy(n,e);const yT=Mc(KR);(function(n){var e=Pn&&Pn.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(n,"__esModule",{value:!0}),n.map=n.array=n.rustEnum=n.str=n.vecU8=n.tagged=n.vec=n.bool=n.option=n.publicKey=n.i256=n.u256=n.i128=n.u128=n.i64=n.u64=n.struct=n.f64=n.f32=n.i32=n.u32=n.i16=n.u16=n.i8=n.u8=void 0;const t=le,r=yT,i=e(Gd);var o=le;Object.defineProperty(n,"u8",{enumerable:!0,get:function(){return o.u8}}),Object.defineProperty(n,"i8",{enumerable:!0,get:function(){return o.s8}}),Object.defineProperty(n,"u16",{enumerable:!0,get:function(){return o.u16}}),Object.defineProperty(n,"i16",{enumerable:!0,get:function(){return o.s16}}),Object.defineProperty(n,"u32",{enumerable:!0,get:function(){return o.u32}}),Object.defineProperty(n,"i32",{enumerable:!0,get:function(){return o.s32}}),Object.defineProperty(n,"f32",{enumerable:!0,get:function(){return o.f32}}),Object.defineProperty(n,"f64",{enumerable:!0,get:function(){return o.f64}}),Object.defineProperty(n,"struct",{enumerable:!0,get:function(){return o.struct}});class s extends t.Layout{constructor(v,l,f){super(v,f),this.blob=(0,t.blob)(v),this.signed=l}decode(v,l=0){const f=new i.default(this.blob.decode(v,l),10,"le");return this.signed?f.fromTwos(this.span*8).clone():f}encode(v,l,f=0){return this.signed&&(v=v.toTwos(this.span*8)),this.blob.encode(v.toArrayLike(Buffer,"le",this.span),l,f)}}function a(V){return new s(8,!1,V)}n.u64=a;function c(V){return new s(8,!0,V)}n.i64=c;function u(V){return new s(16,!1,V)}n.u128=u;function d(V){return new s(16,!0,V)}n.i128=d;function p(V){return new s(32,!1,V)}n.u256=p;function w(V){return new s(32,!0,V)}n.i256=w;class h extends t.Layout{constructor(v,l,f,_){super(v.span,_),this.layout=v,this.decoder=l,this.encoder=f}decode(v,l){return this.decoder(this.layout.decode(v,l))}encode(v,l,f){return this.layout.encode(this.encoder(v),l,f)}getSpan(v,l){return this.layout.getSpan(v,l)}}function b(V){return new h((0,t.blob)(32),v=>new r.PublicKey(v),v=>v.toBuffer(),V)}n.publicKey=b;class S extends t.Layout{constructor(v,l){super(-1,l),this.layout=v,this.discriminator=(0,t.u8)()}encode(v,l,f=0){return v==null?this.discriminator.encode(0,l,f):(this.discriminator.encode(1,l,f),this.layout.encode(v,l,f+1)+1)}decode(v,l=0){const f=this.discriminator.decode(v,l);if(f===0)return null;if(f===1)return this.layout.decode(v,l+1);throw new Error("Invalid option "+this.property)}getSpan(v,l=0){const f=this.discriminator.decode(v,l);if(f===0)return 1;if(f===1)return this.layout.getSpan(v,l+1)+1;throw new Error("Invalid option "+this.property)}}function A(V,v){return new S(V,v)}n.option=A;function I(V){return new h((0,t.u8)(),x,k,V)}n.bool=I;function x(V){if(V===0)return!1;if(V===1)return!0;throw new Error("Invalid bool: "+V)}function k(V){return V?1:0}function B(V,v){const l=(0,t.u32)("length"),f=(0,t.struct)([l,(0,t.seq)(V,(0,t.offset)(l,-l.span),"values")]);return new h(f,({values:_})=>_,_=>({values:_}),v)}n.vec=B;function L(V,v,l){const f=(0,t.struct)([a("tag"),v.replicate("data")]);function _({tag:E,data:N}){if(!E.eq(V))throw new Error("Invalid tag, expected: "+V.toString("hex")+", got: "+E.toString("hex"));return N}return new h(f,_,E=>({tag:V,data:E}),l)}n.tagged=L;function $(V){const v=(0,t.u32)("length"),l=(0,t.struct)([v,(0,t.blob)((0,t.offset)(v,-v.span),"data")]);return new h(l,({data:f})=>f,f=>({data:f}),V)}n.vecU8=$;function W(V){return new h($(),v=>v.toString("utf-8"),v=>Buffer.from(v,"utf-8"),V)}n.str=W;function Y(V,v,l){const f=(0,t.union)(l??(0,t.u8)(),v);return V.forEach((_,E)=>f.addVariant(E,_,_.property)),f}n.rustEnum=Y;function D(V,v,l){const f=(0,t.struct)([(0,t.seq)(V,v,"values")]);return new h(f,({values:_})=>_,_=>({values:_}),l)}n.array=D;class j extends t.Layout{constructor(v,l,f){super(v.span+l.span,f),this.keyLayout=v,this.valueLayout=l}decode(v,l){l=l||0;const f=this.keyLayout.decode(v,l),_=this.valueLayout.decode(v,l+this.keyLayout.getSpan(v,l));return[f,_]}encode(v,l,f){f=f||0;const _=this.keyLayout.encode(v[0],l,f),E=this.valueLayout.encode(v[1],l,f+_);return _+E}getSpan(v,l){return this.keyLayout.getSpan(v,l)+this.valueLayout.getSpan(v,l)}}function G(V,v,l){const f=(0,t.u32)("length"),_=(0,t.struct)([f,(0,t.seq)(new j(V,v),(0,t.offset)(f,-f.span),"values")]);return new h(_,({values:E})=>new Map(E),E=>({values:Array.from(E.entries())}),l)}n.map=G})(Ae);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function us(n){let e=n.length;for(;--e>=0;)n[e]=0}const _T=3,wT=258,e_=29,bT=256,vT=bT+1+e_,t_=30,ET=512,AT=new Array((vT+2)*2);us(AT);const RT=new Array(t_*2);us(RT);const ST=new Array(ET);us(ST);const kT=new Array(wT-_T+1);us(kT);const IT=new Array(e_);us(IT);const TT=new Array(t_);us(TT);const NT=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0};var Rd=NT;const OT=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},CT=new Uint32Array(OT()),xT=(n,e,t,r)=>{const i=CT,o=r+t;n^=-1;for(let s=r;s<o;s++)n=n>>>8^i[(n^e[s])&255];return n^-1};var ir=xT,Sd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},n_={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const BT=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var MT=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)BT(t,r)&&(n[r]=t[r])}}return n},PT=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let s=n[r];t.set(s,i),i+=s.length}return t},r_={assign:MT,flattenChunks:PT};let i_=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i_=!1}const $s=new Uint8Array(256);for(let n=0;n<256;n++)$s[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;$s[254]=$s[254]=1;var LT=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,s=n.length,a=0;for(i=0;i<s;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(a),o=0,i=0;o<a;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<s&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const UT=(n,e)=>{if(e<65534&&n.subarray&&i_)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var DT=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i;const o=new Array(t*2);for(i=0,r=0;r<t;){let s=n[r++];if(s<128){o[i++]=s;continue}let a=$s[s];if(a>4){o[i++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<t;)s=s<<6|n[r++]&63,a--;if(a>1){o[i++]=65533;continue}s<65536?o[i++]=s:(s-=65536,o[i++]=55296|s>>10&1023,o[i++]=56320|s&1023)}return UT(o,i)},FT=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+$s[n[t]]>e?t:e},kd={string2buf:LT,buf2string:DT,utf8border:FT};function WT(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zT=WT;const Ca=16209,HT=16191;var KT=function(e,t){let r,i,o,s,a,c,u,d,p,w,h,b,S,A,I,x,k,B,L,$,W,Y,D,j;const G=e.state;r=e.next_in,D=e.input,i=r+(e.avail_in-5),o=e.next_out,j=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),c=G.dmax,u=G.wsize,d=G.whave,p=G.wnext,w=G.window,h=G.hold,b=G.bits,S=G.lencode,A=G.distcode,I=(1<<G.lenbits)-1,x=(1<<G.distbits)-1;e:do{b<15&&(h+=D[r++]<<b,b+=8,h+=D[r++]<<b,b+=8),k=S[h&I];t:for(;;){if(B=k>>>24,h>>>=B,b-=B,B=k>>>16&255,B===0)j[o++]=k&65535;else if(B&16){L=k&65535,B&=15,B&&(b<B&&(h+=D[r++]<<b,b+=8),L+=h&(1<<B)-1,h>>>=B,b-=B),b<15&&(h+=D[r++]<<b,b+=8,h+=D[r++]<<b,b+=8),k=A[h&x];n:for(;;){if(B=k>>>24,h>>>=B,b-=B,B=k>>>16&255,B&16){if($=k&65535,B&=15,b<B&&(h+=D[r++]<<b,b+=8,b<B&&(h+=D[r++]<<b,b+=8)),$+=h&(1<<B)-1,$>c){e.msg="invalid distance too far back",G.mode=Ca;break e}if(h>>>=B,b-=B,B=o-s,$>B){if(B=$-B,B>d&&G.sane){e.msg="invalid distance too far back",G.mode=Ca;break e}if(W=0,Y=w,p===0){if(W+=u-B,B<L){L-=B;do j[o++]=w[W++];while(--B);W=o-$,Y=j}}else if(p<B){if(W+=u+p-B,B-=p,B<L){L-=B;do j[o++]=w[W++];while(--B);if(W=0,p<L){B=p,L-=B;do j[o++]=w[W++];while(--B);W=o-$,Y=j}}}else if(W+=p-B,B<L){L-=B;do j[o++]=w[W++];while(--B);W=o-$,Y=j}for(;L>2;)j[o++]=Y[W++],j[o++]=Y[W++],j[o++]=Y[W++],L-=3;L&&(j[o++]=Y[W++],L>1&&(j[o++]=Y[W++]))}else{W=o-$;do j[o++]=j[W++],j[o++]=j[W++],j[o++]=j[W++],L-=3;while(L>2);L&&(j[o++]=j[W++],L>1&&(j[o++]=j[W++]))}}else if(B&64){e.msg="invalid distance code",G.mode=Ca;break e}else{k=A[(k&65535)+(h&(1<<B)-1)];continue n}break}}else if(B&64)if(B&32){G.mode=HT;break e}else{e.msg="invalid literal/length code",G.mode=Ca;break e}else{k=S[(k&65535)+(h&(1<<B)-1)];continue t}break}}while(r<i&&o<a);L=b>>3,r-=L,b-=L<<3,h&=(1<<b)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<a?257+(a-o):257-(o-a),G.hold=h,G.bits=b};const lo=15,Cp=852,xp=592,Bp=0,bl=1,Mp=2,$T=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),VT=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),qT=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),GT=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),jT=(n,e,t,r,i,o,s,a)=>{const c=a.bits;let u=0,d=0,p=0,w=0,h=0,b=0,S=0,A=0,I=0,x=0,k,B,L,$,W,Y=null,D;const j=new Uint16Array(lo+1),G=new Uint16Array(lo+1);let V=null,v,l,f;for(u=0;u<=lo;u++)j[u]=0;for(d=0;d<r;d++)j[e[t+d]]++;for(h=c,w=lo;w>=1&&j[w]===0;w--);if(h>w&&(h=w),w===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<w&&j[p]===0;p++);for(h<p&&(h=p),A=1,u=1;u<=lo;u++)if(A<<=1,A-=j[u],A<0)return-1;if(A>0&&(n===Bp||w!==1))return-1;for(G[1]=0,u=1;u<lo;u++)G[u+1]=G[u]+j[u];for(d=0;d<r;d++)e[t+d]!==0&&(s[G[e[t+d]]++]=d);if(n===Bp?(Y=V=s,D=20):n===bl?(Y=$T,V=VT,D=257):(Y=qT,V=GT,D=0),x=0,d=0,u=p,W=o,b=h,S=0,L=-1,I=1<<h,$=I-1,n===bl&&I>Cp||n===Mp&&I>xp)return 1;for(;;){v=u-S,s[d]+1<D?(l=0,f=s[d]):s[d]>=D?(l=V[s[d]-D],f=Y[s[d]-D]):(l=96,f=0),k=1<<u-S,B=1<<b,p=B;do B-=k,i[W+(x>>S)+B]=v<<24|l<<16|f|0;while(B!==0);for(k=1<<u-1;x&k;)k>>=1;if(k!==0?(x&=k-1,x+=k):x=0,d++,--j[u]===0){if(u===w)break;u=e[t+s[d]]}if(u>h&&(x&$)!==L){for(S===0&&(S=h),W+=p,b=u-S,A=1<<b;b+S<w&&(A-=j[b+S],!(A<=0));)b++,A<<=1;if(I+=1<<b,n===bl&&I>Cp||n===Mp&&I>xp)return 1;L=x&$,i[L]=h<<24|b<<16|W-o|0}}return x!==0&&(i[W+x]=u-S<<24|64<<16|0),a.bits=h,0};var Os=jT;const YT=0,o_=1,s_=2,{Z_FINISH:Pp,Z_BLOCK:ZT,Z_TREES:xa,Z_OK:ji,Z_STREAM_END:XT,Z_NEED_DICT:JT,Z_STREAM_ERROR:Vn,Z_DATA_ERROR:a_,Z_MEM_ERROR:c_,Z_BUF_ERROR:QT,Z_DEFLATED:Lp}=n_,lu=16180,Up=16181,Dp=16182,Fp=16183,Wp=16184,zp=16185,Hp=16186,Kp=16187,$p=16188,Vp=16189,Cc=16190,kr=16191,vl=16192,qp=16193,El=16194,Gp=16195,jp=16196,Yp=16197,Zp=16198,Ba=16199,Ma=16200,Xp=16201,Jp=16202,Qp=16203,e0=16204,t0=16205,Al=16206,n0=16207,r0=16208,et=16209,u_=16210,l_=16211,eN=852,tN=592,nN=15,rN=nN,i0=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function iN(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const io=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<lu||e.mode>l_?1:0},d_=n=>{if(io(n))return Vn;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=lu,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(eN),e.distcode=e.distdyn=new Int32Array(tN),e.sane=1,e.back=-1,ji},f_=n=>{if(io(n))return Vn;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,d_(n)},h_=(n,e)=>{let t;if(io(n))return Vn;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Vn:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,f_(n))},p_=(n,e)=>{if(!n)return Vn;const t=new iN;n.state=t,t.strm=n,t.window=null,t.mode=lu;const r=h_(n,e);return r!==ji&&(n.state=null),r},oN=n=>p_(n,rN);let o0=!0,Rl,Sl;const sN=n=>{if(o0){Rl=new Int32Array(512),Sl=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Os(o_,n.lens,0,288,Rl,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Os(s_,n.lens,0,32,Sl,0,n.work,{bits:5}),o0=!1}n.lencode=Rl,n.lenbits=9,n.distcode=Sl,n.distbits=5},g_=(n,e,t,r)=>{let i;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},aN=(n,e)=>{let t,r,i,o,s,a,c,u,d,p,w,h,b,S,A=0,I,x,k,B,L,$,W,Y;const D=new Uint8Array(4);let j,G;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(io(n)||!n.output||!n.input&&n.avail_in!==0)return Vn;t=n.state,t.mode===kr&&(t.mode=vl),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,u=t.hold,d=t.bits,p=a,w=c,Y=ji;e:for(;;)switch(t.mode){case lu:if(t.wrap===0){t.mode=vl;break}for(;d<16;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if(t.wrap&2&&u===35615){t.wbits===0&&(t.wbits=15),t.check=0,D[0]=u&255,D[1]=u>>>8&255,t.check=ir(t.check,D,2,0),u=0,d=0,t.mode=Up;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((u&255)<<8)+(u>>8))%31){n.msg="incorrect header check",t.mode=et;break}if((u&15)!==Lp){n.msg="unknown compression method",t.mode=et;break}if(u>>>=4,d-=4,W=(u&15)+8,t.wbits===0&&(t.wbits=W),W>15||W>t.wbits){n.msg="invalid window size",t.mode=et;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=u&512?Vp:kr,u=0,d=0;break;case Up:for(;d<16;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if(t.flags=u,(t.flags&255)!==Lp){n.msg="unknown compression method",t.mode=et;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=et;break}t.head&&(t.head.text=u>>8&1),t.flags&512&&t.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,t.check=ir(t.check,D,2,0)),u=0,d=0,t.mode=Dp;case Dp:for(;d<32;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}t.head&&(t.head.time=u),t.flags&512&&t.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,D[2]=u>>>16&255,D[3]=u>>>24&255,t.check=ir(t.check,D,4,0)),u=0,d=0,t.mode=Fp;case Fp:for(;d<16;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}t.head&&(t.head.xflags=u&255,t.head.os=u>>8),t.flags&512&&t.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,t.check=ir(t.check,D,2,0)),u=0,d=0,t.mode=Wp;case Wp:if(t.flags&1024){for(;d<16;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}t.length=u,t.head&&(t.head.extra_len=u),t.flags&512&&t.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,t.check=ir(t.check,D,2,0)),u=0,d=0}else t.head&&(t.head.extra=null);t.mode=zp;case zp:if(t.flags&1024&&(h=t.length,h>a&&(h=a),h&&(t.head&&(W=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+h),W)),t.flags&512&&t.wrap&4&&(t.check=ir(t.check,r,h,o)),a-=h,o+=h,t.length-=h),t.length))break e;t.length=0,t.mode=Hp;case Hp:if(t.flags&2048){if(a===0)break e;h=0;do W=r[o+h++],t.head&&W&&t.length<65536&&(t.head.name+=String.fromCharCode(W));while(W&&h<a);if(t.flags&512&&t.wrap&4&&(t.check=ir(t.check,r,h,o)),a-=h,o+=h,W)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Kp;case Kp:if(t.flags&4096){if(a===0)break e;h=0;do W=r[o+h++],t.head&&W&&t.length<65536&&(t.head.comment+=String.fromCharCode(W));while(W&&h<a);if(t.flags&512&&t.wrap&4&&(t.check=ir(t.check,r,h,o)),a-=h,o+=h,W)break e}else t.head&&(t.head.comment=null);t.mode=$p;case $p:if(t.flags&512){for(;d<16;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if(t.wrap&4&&u!==(t.check&65535)){n.msg="header crc mismatch",t.mode=et;break}u=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=kr;break;case Vp:for(;d<32;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}n.adler=t.check=i0(u),u=0,d=0,t.mode=Cc;case Cc:if(t.havedict===0)return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=u,t.bits=d,JT;n.adler=t.check=1,t.mode=kr;case kr:if(e===ZT||e===xa)break e;case vl:if(t.last){u>>>=d&7,d-=d&7,t.mode=Al;break}for(;d<3;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}switch(t.last=u&1,u>>>=1,d-=1,u&3){case 0:t.mode=qp;break;case 1:if(sN(t),t.mode=Ba,e===xa){u>>>=2,d-=2;break e}break;case 2:t.mode=jp;break;case 3:n.msg="invalid block type",t.mode=et}u>>>=2,d-=2;break;case qp:for(u>>>=d&7,d-=d&7;d<32;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){n.msg="invalid stored block lengths",t.mode=et;break}if(t.length=u&65535,u=0,d=0,t.mode=El,e===xa)break e;case El:t.mode=Gp;case Gp:if(h=t.length,h){if(h>a&&(h=a),h>c&&(h=c),h===0)break e;i.set(r.subarray(o,o+h),s),a-=h,o+=h,c-=h,s+=h,t.length-=h;break}t.mode=kr;break;case jp:for(;d<14;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if(t.nlen=(u&31)+257,u>>>=5,d-=5,t.ndist=(u&31)+1,u>>>=5,d-=5,t.ncode=(u&15)+4,u>>>=4,d-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=et;break}t.have=0,t.mode=Yp;case Yp:for(;t.have<t.ncode;){for(;d<3;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}t.lens[V[t.have++]]=u&7,u>>>=3,d-=3}for(;t.have<19;)t.lens[V[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,j={bits:t.lenbits},Y=Os(YT,t.lens,0,19,t.lencode,0,t.work,j),t.lenbits=j.bits,Y){n.msg="invalid code lengths set",t.mode=et;break}t.have=0,t.mode=Zp;case Zp:for(;t.have<t.nlen+t.ndist;){for(;A=t.lencode[u&(1<<t.lenbits)-1],I=A>>>24,x=A>>>16&255,k=A&65535,!(I<=d);){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if(k<16)u>>>=I,d-=I,t.lens[t.have++]=k;else{if(k===16){for(G=I+2;d<G;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if(u>>>=I,d-=I,t.have===0){n.msg="invalid bit length repeat",t.mode=et;break}W=t.lens[t.have-1],h=3+(u&3),u>>>=2,d-=2}else if(k===17){for(G=I+3;d<G;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}u>>>=I,d-=I,W=0,h=3+(u&7),u>>>=3,d-=3}else{for(G=I+7;d<G;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}u>>>=I,d-=I,W=0,h=11+(u&127),u>>>=7,d-=7}if(t.have+h>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=et;break}for(;h--;)t.lens[t.have++]=W}}if(t.mode===et)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=et;break}if(t.lenbits=9,j={bits:t.lenbits},Y=Os(o_,t.lens,0,t.nlen,t.lencode,0,t.work,j),t.lenbits=j.bits,Y){n.msg="invalid literal/lengths set",t.mode=et;break}if(t.distbits=6,t.distcode=t.distdyn,j={bits:t.distbits},Y=Os(s_,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,j),t.distbits=j.bits,Y){n.msg="invalid distances set",t.mode=et;break}if(t.mode=Ba,e===xa)break e;case Ba:t.mode=Ma;case Ma:if(a>=6&&c>=258){n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=u,t.bits=d,KT(n,w),s=n.next_out,i=n.output,c=n.avail_out,o=n.next_in,r=n.input,a=n.avail_in,u=t.hold,d=t.bits,t.mode===kr&&(t.back=-1);break}for(t.back=0;A=t.lencode[u&(1<<t.lenbits)-1],I=A>>>24,x=A>>>16&255,k=A&65535,!(I<=d);){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if(x&&!(x&240)){for(B=I,L=x,$=k;A=t.lencode[$+((u&(1<<B+L)-1)>>B)],I=A>>>24,x=A>>>16&255,k=A&65535,!(B+I<=d);){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}u>>>=B,d-=B,t.back+=B}if(u>>>=I,d-=I,t.back+=I,t.length=k,x===0){t.mode=t0;break}if(x&32){t.back=-1,t.mode=kr;break}if(x&64){n.msg="invalid literal/length code",t.mode=et;break}t.extra=x&15,t.mode=Xp;case Xp:if(t.extra){for(G=t.extra;d<G;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Jp;case Jp:for(;A=t.distcode[u&(1<<t.distbits)-1],I=A>>>24,x=A>>>16&255,k=A&65535,!(I<=d);){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if(!(x&240)){for(B=I,L=x,$=k;A=t.distcode[$+((u&(1<<B+L)-1)>>B)],I=A>>>24,x=A>>>16&255,k=A&65535,!(B+I<=d);){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}u>>>=B,d-=B,t.back+=B}if(u>>>=I,d-=I,t.back+=I,x&64){n.msg="invalid distance code",t.mode=et;break}t.offset=k,t.extra=x&15,t.mode=Qp;case Qp:if(t.extra){for(G=t.extra;d<G;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=et;break}t.mode=e0;case e0:if(c===0)break e;if(h=w-c,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=et;break}h>t.wnext?(h-=t.wnext,b=t.wsize-h):b=t.wnext-h,h>t.length&&(h=t.length),S=t.window}else S=i,b=s-t.offset,h=t.length;h>c&&(h=c),c-=h,t.length-=h;do i[s++]=S[b++];while(--h);t.length===0&&(t.mode=Ma);break;case t0:if(c===0)break e;i[s++]=t.length,c--,t.mode=Ma;break;case Al:if(t.wrap){for(;d<32;){if(a===0)break e;a--,u|=r[o++]<<d,d+=8}if(w-=c,n.total_out+=w,t.total+=w,t.wrap&4&&w&&(n.adler=t.check=t.flags?ir(t.check,i,w,s-w):Rd(t.check,i,w,s-w)),w=c,t.wrap&4&&(t.flags?u:i0(u))!==t.check){n.msg="incorrect data check",t.mode=et;break}u=0,d=0}t.mode=n0;case n0:if(t.wrap&&t.flags){for(;d<32;){if(a===0)break e;a--,u+=r[o++]<<d,d+=8}if(t.wrap&4&&u!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=et;break}u=0,d=0}t.mode=r0;case r0:Y=XT;break e;case et:Y=a_;break e;case u_:return c_;case l_:default:return Vn}return n.next_out=s,n.avail_out=c,n.next_in=o,n.avail_in=a,t.hold=u,t.bits=d,(t.wsize||w!==n.avail_out&&t.mode<et&&(t.mode<Al||e!==Pp))&&g_(n,n.output,n.next_out,w-n.avail_out),p-=n.avail_in,w-=n.avail_out,n.total_in+=p,n.total_out+=w,t.total+=w,t.wrap&4&&w&&(n.adler=t.check=t.flags?ir(t.check,i,w,n.next_out-w):Rd(t.check,i,w,n.next_out-w)),n.data_type=t.bits+(t.last?64:0)+(t.mode===kr?128:0)+(t.mode===Ba||t.mode===El?256:0),(p===0&&w===0||e===Pp)&&Y===ji&&(Y=QT),Y},cN=n=>{if(io(n))return Vn;let e=n.state;return e.window&&(e.window=null),n.state=null,ji},uN=(n,e)=>{if(io(n))return Vn;const t=n.state;return t.wrap&2?(t.head=e,e.done=!1,ji):Vn},lN=(n,e)=>{const t=e.length;let r,i,o;return io(n)||(r=n.state,r.wrap!==0&&r.mode!==Cc)?Vn:r.mode===Cc&&(i=1,i=Rd(i,e,t,0),i!==r.check)?a_:(o=g_(n,e,t,t),o?(r.mode=u_,c_):(r.havedict=1,ji))};var dN=f_,fN=h_,hN=d_,pN=oN,gN=p_,mN=aN,yN=cN,_N=uN,wN=lN,bN="pako inflate (from Nodeca project)",Cr={inflateReset:dN,inflateReset2:fN,inflateResetKeep:hN,inflateInit:pN,inflateInit2:gN,inflate:mN,inflateEnd:yN,inflateGetHeader:_N,inflateSetDictionary:wN,inflateInfo:bN};function vN(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var EN=vN;const m_=Object.prototype.toString,{Z_NO_FLUSH:AN,Z_FINISH:RN,Z_OK:Vs,Z_STREAM_END:kl,Z_NEED_DICT:Il,Z_STREAM_ERROR:SN,Z_DATA_ERROR:s0,Z_MEM_ERROR:kN}=n_;function du(n){this.options=r_.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zT,this.strm.avail_out=0;let t=Cr.inflateInit2(this.strm,e.windowBits);if(t!==Vs)throw new Error(Sd[t]);if(this.header=new EN,Cr.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=kd.string2buf(e.dictionary):m_.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Cr.inflateSetDictionary(this.strm,e.dictionary),t!==Vs)))throw new Error(Sd[t])}du.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?RN:AN,m_.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=Cr.inflate(t,s),o===Il&&i&&(o=Cr.inflateSetDictionary(t,i),o===Vs?o=Cr.inflate(t,s):o===s0&&(o=Il));t.avail_in>0&&o===kl&&t.state.wrap>0&&n[t.next_in]!==0;)Cr.inflateReset(t),o=Cr.inflate(t,s);switch(o){case SN:case s0:case Il:case kN:return this.onEnd(o),this.ended=!0,!1}if(a=t.avail_out,t.next_out&&(t.avail_out===0||o===kl))if(this.options.to==="string"){let c=kd.utf8border(t.output,t.next_out),u=t.next_out-c,d=kd.buf2string(t.output,c);t.next_out=u,t.avail_out=r-u,u&&t.output.set(t.output.subarray(c,c+u),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Vs&&a===0)){if(o===kl)return o=Cr.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};du.prototype.onData=function(n){this.chunks.push(n)};du.prototype.onEnd=function(n){n===Vs&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r_.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function IN(n,e){const t=new du(e);if(t.push(n),t.err)throw t.msg||Sd[t.err];return t.result}var TN=IN,NN={inflate:TN};const{inflate:ON}=NN;var CN=ON,y_={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function o(c,u,d,p,w){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new i(d,p||c,w),b=t?t+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],h]:c._events[b].push(h):(c._events[b]=h,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,p;if(this._eventsCount===0)return u;for(p in d=this._events)e.call(d,p)&&u.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=t?t+u:u,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var w=0,h=p.length,b=new Array(h);w<h;w++)b[w]=p[w].fn;return b},a.prototype.listenerCount=function(u){var d=t?t+u:u,p=this._events[d];return p?p.fn?1:p.length:0},a.prototype.emit=function(u,d,p,w,h,b){var S=t?t+u:u;if(!this._events[S])return!1;var A=this._events[S],I=arguments.length,x,k;if(A.fn){switch(A.once&&this.removeListener(u,A.fn,void 0,!0),I){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,d),!0;case 3:return A.fn.call(A.context,d,p),!0;case 4:return A.fn.call(A.context,d,p,w),!0;case 5:return A.fn.call(A.context,d,p,w,h),!0;case 6:return A.fn.call(A.context,d,p,w,h,b),!0}for(k=1,x=new Array(I-1);k<I;k++)x[k-1]=arguments[k];A.fn.apply(A.context,x)}else{var B=A.length,L;for(k=0;k<B;k++)switch(A[k].once&&this.removeListener(u,A[k].fn,void 0,!0),I){case 1:A[k].fn.call(A[k].context);break;case 2:A[k].fn.call(A[k].context,d);break;case 3:A[k].fn.call(A[k].context,d,p);break;case 4:A[k].fn.call(A[k].context,d,p,w);break;default:if(!x)for(L=1,x=new Array(I-1);L<I;L++)x[L-1]=arguments[L];A[k].fn.apply(A[k].context,x)}}return!0},a.prototype.on=function(u,d,p){return o(this,u,d,p,!1)},a.prototype.once=function(u,d,p){return o(this,u,d,p,!0)},a.prototype.removeListener=function(u,d,p,w){var h=t?t+u:u;if(!this._events[h])return this;if(!d)return s(this,h),this;var b=this._events[h];if(b.fn)b.fn===d&&(!w||b.once)&&(!p||b.context===p)&&s(this,h);else{for(var S=0,A=[],I=b.length;S<I;S++)(b[S].fn!==d||w&&!b[S].once||p&&b[S].context!==p)&&A.push(b[S]);A.length?this._events[h]=A.length===1?A[0]:A:s(this,h)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=t?t+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(y_);var xN=y_.exports;const BN=_i(xN);function MN(n,e){return Array.apply(0,new Array(Math.ceil(n.length/e))).map((t,r)=>n.slice(r*e,(r+1)*e))}const vi=n=>"version"in n;function PN(n){return new TextDecoder("utf-8").decode(n)}function a0(n){return _t.encode(n)}function c0(n){return n.toString("base64")}function __(n){return ce.Buffer.from(n,"base64")}function Ao(n){return"accounts"in n}async function LN(n){const e=(await X.findProgramAddress([],n))[0];return await X.createWithSeed(e,UN(),n)}function UN(){return"anchor:idl"}const DN=Ae.struct([Ae.publicKey("authority"),Ae.vecU8("data")]);function FN(n){return DN.decode(n)}function WN(n){const e=["name","path","account","relations","generic"],t=o=>o.split(".").map(dT).join("."),r=o=>{for(const s in o){const a=o[s];e.includes(s)?o[s]=Array.isArray(a)?a.map(t):t(a):typeof a=="object"&&r(a)}},i=structuredClone(n);return r(i),i}function Ro(n,e,t,r){return n!=null&&n.length?n[0].name?t(n):r(n):e()}function zN(n){const e=new Map;return n.errors&&n.errors.forEach(t=>{var r;let i=(r=t.msg)!==null&&r!==void 0?r:t.name;e.set(t.code,i)}),e}function HN(n,...e){if(n.args.length!=e.length)throw new Error("Invalid argument length");const t={};let r=0;return n.args.forEach(i=>{t[i.name]=e[r],r+=1}),t}function w_(n,e={}){n.forEach(t=>{if(Ao(t))w_(t.accounts,e[t.name]);else if(!e[t.name])throw new Error(`Account \`${t.name}\` not provided.`)})}function Jn(n){return n instanceof X?n:new X(n)}class KN extends TypeError{constructor(e,t){let r;const{message:i,...o}=e,{path:s}=e,a=s.length===0?i:"At path: "+s.join(".")+" -- "+i;super(a),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var c;return(c=r)!=null?c:r=[e,...t()]}}}function $N(n){return xo(n)&&typeof n[Symbol.iterator]=="function"}function xo(n){return typeof n=="object"&&n!=null}function yi(n){return typeof n=="string"?JSON.stringify(n):""+n}function VN(n){const{done:e,value:t}=n.next();return e?void 0:t}function qN(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:o}=e,{type:s}=t,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+yi(r)+"`"}=n;return{value:r,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...n,message:c}}function*u0(n,e,t,r){$N(n)||(n=[n]);for(const i of n){const o=qN(i,e,t,r);o&&(yield o)}}function*Ff(n,e,t){t===void 0&&(t={});const{path:r=[],branch:i=[n],coerce:o=!1,mask:s=!1}=t,a={path:r,branch:i};if(o&&(n=e.coercer(n,a),s&&e.type!=="type"&&xo(e.schema)&&xo(n)&&!Array.isArray(n)))for(const u in n)e.schema[u]===void 0&&delete n[u];let c=!0;for(const u of e.validator(n,a))c=!1,yield[u,void 0];for(let[u,d,p]of e.entries(n,a)){const w=Ff(d,p,{path:u===void 0?r:[...r,u],branch:u===void 0?i:[...i,d],coerce:o,mask:s});for(const h of w)h[0]?(c=!1,yield[h[0],void 0]):o&&(d=h[1],u===void 0?n=d:n instanceof Map?n.set(u,d):n instanceof Set?n.add(d):xo(n)&&(n[u]=d))}if(c)for(const u of e.refiner(n,a))c=!1,yield[u,void 0];c&&(yield[void 0,n])}class bi{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:r,validator:i,refiner:o,coercer:s=c=>c,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=s,i?this.validator=(c,u)=>{const d=i(c,u);return u0(d,u,this,c)}:this.validator=()=>[],o?this.refiner=(c,u)=>{const d=o(c,u);return u0(d,u,this,c)}:this.refiner=()=>[]}assert(e){return GN(e,this)}create(e){return Wf(e,this)}is(e){return b_(e,this)}mask(e){return jN(e,this)}validate(e,t){return t===void 0&&(t={}),da(e,this,t)}}function GN(n,e){const t=da(n,e);if(t[0])throw t[0]}function Wf(n,e){const t=da(n,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function jN(n,e){const t=da(n,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function b_(n,e){return!da(n,e)[0]}function da(n,e,t){t===void 0&&(t={});const r=Ff(n,e,t),i=VN(r);return i[0]?[new KN(i[0],function*(){for(const s of r)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function fa(n,e){return new bi({type:n,schema:null,validator:e})}function YN(){return fa("any",()=>!0)}function Tl(n){return new bi({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+yi(e)}})}function ZN(){return fa("boolean",n=>typeof n=="boolean")}function l0(n){const e=yi(n);return new bi({type:"literal",schema:n,validator(t){return t===n||"Expected the literal `"+e+"`, but received: "+yi(t)}})}function Pa(n){return new bi({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function ic(){return fa("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+yi(n))}function oc(n){return new bi({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function zi(){return fa("string",n=>typeof n=="string"||"Expected a string, but received: "+yi(n))}function fi(n){const e=Object.keys(n);return new bi({type:"type",schema:n,*entries(t){if(xo(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return xo(t)||"Expected an object, but received: "+yi(t)}})}function v_(n){const e=n.map(t=>t.type).join(" | ");return new bi({type:"union",schema:null,coercer(t,r){return(n.find(o=>{const[s]=o.validate(t,{coerce:!0});return!s})||zf()).coercer(t,r)},validator(t,r){const i=[];for(const o of n){const[...s]=Ff(t,o,r),[a]=s;if(a[0])for(const[c]of s)c&&i.push(c);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+yi(t),...i]}})}function zf(){return fa("unknown",()=>!0)}function XN(n,e,t){return new bi({...n,coercer:(r,i)=>b_(r,e)?n.coercer(t(r,i),i):n.coercer(r,i)})}const d0=99;async function JN(n,e,t){if(e.length<=d0)return await f0(n,e,t);{const r=MN(e,d0);return(await Promise.all(r.map(o=>f0(n,o,t)))).flat()}}async function f0(n,e,t){const r=t??n.commitment,{value:i,context:o}=await n.getMultipleAccountsInfoAndContext(e,r);return i.map((a,c)=>a===null?null:{publicKey:e[c],account:a,context:o})}async function QN(n,e,t,r,i){var o;t&&t.length>0&&e.sign(...t);const s=e._compile(),a=s.serialize(),u=e._serialize(a).toString("base64"),d={encoding:"base64",commitment:r??n.commitment};if(i){const b=(Array.isArray(i)?i:s.nonProgramIds()).map(S=>S.toBase58());d.accounts={encoding:"base64",addresses:b}}t&&t.length>0&&(d.sigVerify=!0);const p=[u,d],w=await n._rpcRequest("simulateTransaction",p),h=Wf(w,rO);if("error"in h){let b;if("data"in h.error&&(b=(o=h.error.data)===null||o===void 0?void 0:o.logs,b&&Array.isArray(b))){const S=`
    `,A=S+b.join(S);console.error(h.error.message,A)}throw new gi("failed to simulate transaction: "+h.error.message,b)}return h.result}function eO(n){return XN(E_(n),tO,e=>"error"in e?e:{...e,result:Wf(e.result,n)})}const tO=E_(zf());function E_(n){return v_([fi({jsonrpc:l0("2.0"),id:zi(),result:n}),fi({jsonrpc:l0("2.0"),id:zi(),error:fi({code:zf(),message:zi(),data:oc(YN())})})])}function nO(n){return eO(fi({context:fi({slot:ic()}),value:n}))}const rO=nO(fi({err:Pa(v_([fi({}),zi()])),logs:Pa(Tl(zi())),accounts:oc(Pa(Tl(Pa(fi({executable:ZN(),owner:zi(),lamports:ic(),data:Tl(zi()),rentEpoch:oc(ic())}))))),unitsConsumed:oc(ic())}));class qs{constructor(e,t,r=qs.defaultOptions()){this.connection=e,this.wallet=t,this.opts=r,this.publicKey=t==null?void 0:t.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(e,t=qs.defaultOptions()){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(e,t,r){var i,o,s,a;if(r===void 0&&(r=this.opts),vi(e))t&&e.sign(t);else if(e.feePayer=(i=e.feePayer)!==null&&i!==void 0?i:this.wallet.publicKey,e.recentBlockhash=(await this.connection.getLatestBlockhash(r.preflightCommitment)).blockhash,t)for(const u of t)e.partialSign(u);e=await this.wallet.signTransaction(e);const c=e.serialize();try{return await h0(this.connection,c,r)}catch(u){if(u instanceof Id){const d=a0(vi(e)?((o=e.signatures)===null||o===void 0?void 0:o[0])||new Uint8Array:(s=e.signature)!==null&&s!==void 0?s:new Uint8Array),p=vi(e)?0:void 0,w=await this.connection.getTransaction(d,{commitment:"confirmed",maxSupportedTransactionVersion:p});if(w){const h=(a=w.meta)===null||a===void 0?void 0:a.logMessages;throw h?new gi(u.message,h):u}else throw u}else throw u}}async sendAll(e,t){var r,i,o;t===void 0&&(t=this.opts);const s=(await this.connection.getLatestBlockhash(t.preflightCommitment)).blockhash;let a=e.map(d=>{var p,w;if(vi(d.tx)){let h=d.tx;return d.signers&&h.sign(d.signers),h}else{let h=d.tx,b=(p=d.signers)!==null&&p!==void 0?p:[];return h.feePayer=(w=h.feePayer)!==null&&w!==void 0?w:this.wallet.publicKey,h.recentBlockhash=s,b.forEach(S=>{h.partialSign(S)}),h}});const c=await this.wallet.signAllTransactions(a),u=[];for(let d=0;d<a.length;d+=1){const p=c[d],w=p.serialize();try{u.push(await h0(this.connection,w,t))}catch(h){if(h instanceof Id){const b=a0(vi(p)?((r=p.signatures)===null||r===void 0?void 0:r[0])||new Uint8Array:(i=p.signature)!==null&&i!==void 0?i:new Uint8Array),S=vi(p)?0:void 0,A=await this.connection.getTransaction(b,{commitment:"confirmed",maxSupportedTransactionVersion:S});if(A){const I=(o=A.meta)===null||o===void 0?void 0:o.logMessages;throw I?new gi(h.message,I):h}else throw h}else throw h}}return u}async simulate(e,t,r,i){let o=(await this.connection.getLatestBlockhash(r??this.connection.commitment)).blockhash,s;if(vi(e)?(t&&t.length>0&&(e.sign(t),e=await this.wallet.signTransaction(e)),s=await this.connection.simulateTransaction(e,{commitment:r})):(e.feePayer=e.feePayer||this.wallet.publicKey,e.recentBlockhash=o,t&&t.length>0&&(e=await this.wallet.signTransaction(e)),s=await QN(this.connection,e,t,r,i)),s.value.err)throw new iO(s.value);return s.value}}class iO extends Error{constructor(e,t){super(t),this.simulationResponse=e}}async function h0(n,e,t){const r=t&&{skipPreflight:t.skipPreflight,preflightCommitment:t.preflightCommitment||t.commitment},i=await n.sendRawTransaction(e,r),o=(await n.confirmTransaction(i,t&&t.commitment)).value;if(o.err)throw new Id(`Raw transaction ${i} failed (${JSON.stringify(o)})`);return i}class Id extends Error{constructor(e){super(e)}}function Td(){return qs.local()}var oO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},K={};Object.defineProperty(K,"__esModule",{value:!0});var A_=K.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=ww=K.ANCHOR_ERROR__REQUIRE_VIOLATED=_w=K.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=yw=K.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=mw=K.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=gw=K.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=pw=K.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=hw=K.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=fw=K.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=dw=K.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=lw=K.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=uw=K.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=cw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=aw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=sw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=ow=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=iw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=rw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=nw=K.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=tw=K.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=ew=K.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=Q_=K.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=J_=K.ANCHOR_ERROR__CONSTRAINT_SPACE=X_=K.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=Z_=K.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=Y_=K.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=j_=K.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=G_=K.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=q_=K.ANCHOR_ERROR__CONSTRAINT_ZERO=V_=K.ANCHOR_ERROR__CONSTRAINT_ADDRESS=$_=K.ANCHOR_ERROR__CONSTRAINT_CLOSE=K_=K.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=H_=K.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=z_=K.ANCHOR_ERROR__CONSTRAINT_STATE=W_=K.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=F_=K.ANCHOR_ERROR__CONSTRAINT_SEEDS=D_=K.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=U_=K.ANCHOR_ERROR__CONSTRAINT_OWNER=L_=K.ANCHOR_ERROR__CONSTRAINT_RAW=P_=K.ANCHOR_ERROR__CONSTRAINT_SIGNER=M_=K.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=B_=K.ANCHOR_ERROR__CONSTRAINT_MUT=x_=K.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=C_=K.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=O_=K.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=N_=K.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=T_=K.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=I_=K.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=k_=K.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=S_=K.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0,R_=K.ANCHOR_ERROR__DEPRECATED=Vw=K.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=$w=K.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=Kw=K.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=Hw=K.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=zw=K.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=Ww=K.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=Fw=K.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=Dw=K.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=Uw=K.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=Lw=K.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=Pw=K.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=Mw=K.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=Bw=K.ANCHOR_ERROR__INVALID_PROGRAM_ID=xw=K.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=Cw=K.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=Ow=K.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=Nw=K.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=Tw=K.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=Iw=K.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=kw=K.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=Sw=K.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=Rw=K.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=Aw=K.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=Ew=K.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=vw=K.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=bw=K.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0,S_=K.ANCHOR_ERROR__INSTRUCTION_MISSING=100,k_=K.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101,I_=K.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102,T_=K.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103,N_=K.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3,O_=K.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001,C_=K.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002,x_=K.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500,B_=K.ANCHOR_ERROR__CONSTRAINT_MUT=2e3,M_=K.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001,P_=K.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002,L_=K.ANCHOR_ERROR__CONSTRAINT_RAW=2003,U_=K.ANCHOR_ERROR__CONSTRAINT_OWNER=2004,D_=K.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005,F_=K.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006,W_=K.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007,z_=K.ANCHOR_ERROR__CONSTRAINT_STATE=2008,H_=K.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009,K_=K.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010,$_=K.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011,V_=K.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012,q_=K.ANCHOR_ERROR__CONSTRAINT_ZERO=2013,G_=K.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014,j_=K.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015,Y_=K.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016,Z_=K.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017,X_=K.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018,J_=K.ANCHOR_ERROR__CONSTRAINT_SPACE=2019,Q_=K.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020,ew=K.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021,tw=K.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022,nw=K.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023,rw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024,iw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025,ow=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026,sw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027,aw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028,cw=K.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029,uw=K.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030,lw=K.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031,dw=K.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032,fw=K.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033,hw=K.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034,pw=K.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035,gw=K.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036,mw=K.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037,yw=K.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038,_w=K.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039,ww=K.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;A_=K.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;var bw=K.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502,vw=K.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503,Ew=K.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504,Aw=K.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505,Rw=K.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506,Sw=K.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3,kw=K.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001,Iw=K.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002,Tw=K.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003,Nw=K.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004,Ow=K.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005,Cw=K.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006,xw=K.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007,Bw=K.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008,Mw=K.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009,Pw=K.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010,Lw=K.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011,Uw=K.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012,Dw=K.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013,Fw=K.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014,Ww=K.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015,zw=K.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016,Hw=K.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017,Kw=K.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100,$w=K.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101,Vw=K.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;R_=K.ANCHOR_ERROR__DEPRECATED=5e3;const sO=new Map;function qw(n){return sO.get(n)!==void 0}class ti extends Error{constructor(e){super(e),this.name="IdlError"}}class ha{constructor(e){this.stack=e}static parse(e){var t;const r=/^Program (\w*) invoke/,i=/^Program \w* success/,o=[];for(let s=0;s<e.length;s++){if(i.exec(e[s])){o.pop();continue}const a=(t=r.exec(e[s]))===null||t===void 0?void 0:t[1];a&&o.push(new X(a))}return new ha(o)}}class Cs extends Error{constructor(e,t,r,i,o,s){super(r.join(`
`).replace("Program log: ","")),this.errorLogs=r,this.logs=i,this.error={errorCode:e,errorMessage:t,comparedValues:s,origin:o},this._programErrorStack=ha.parse(i)}static parse(e){if(!e)return null;const t=e.findIndex(w=>w.startsWith("Program log: AnchorError"));if(t===-1)return null;const r=e[t],i=[r];let o;if(t+1<e.length){if(e[t+1]==="Program log: Left:"){const w=/^Program log: (.*)$/,h=w.exec(e[t+2])[1],b=w.exec(e[t+4])[1];o=[new X(h),new X(b)],i.push(...e.slice(t+1,t+5))}else if(e[t+1].startsWith("Program log: Left:")){const w=/^Program log: (Left|Right): (.*)$/,h=w.exec(e[t+1])[2],b=w.exec(e[t+2])[2];i.push(...e.slice(t+1,t+3)),o=[h,b]}}const a=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),u=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),p=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(a){const[w,h,b]=a.slice(1,4),S={code:w,number:parseInt(h)};return new Cs(S,b,i,e,void 0,o)}else if(u){const[w,h,b,S,A]=u.slice(1,6),I={code:b,number:parseInt(S)},x={file:w,line:parseInt(h)};return new Cs(I,A,i,e,x,o)}else if(p){const[w,h,b,S]=p.slice(1,5),A=w,I={code:h,number:parseInt(b)};return new Cs(I,S,i,e,A,o)}else return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class xc extends Error{constructor(e,t,r){super(),this.code=e,this.msg=t,this.logs=r,r&&(this._programErrorStack=ha.parse(r))}static parse(e,t){const r=e.toString();let i;if(r.includes("custom program error:")){let a=r.split("custom program error: ");if(a.length!==2)return null;i=a[1]}else{const a=r.match(/"Custom":([0-9]+)}/g);if(!a||a.length>1)return null;i=a[0].match(/([0-9]+)/g)[0]}let o;try{o=parseInt(i)}catch{return null}let s=t.get(o);return s!==void 0?new xc(o,s,e.logs):(s=aO.get(o),s!==void 0?new xc(o,s,e.logs):null)}get program(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var e;return(e=this._programErrorStack)===null||e===void 0?void 0:e.stack}toString(){return this.msg}}function Gw(n,e){qw("debug-logs")&&console.log("Translating error:",n);const t=Cs.parse(n.logs);if(t)return t;const r=xc.parse(n,e);if(r)return r;if(n.logs){const i={get:function(o,s){return s==="programErrorStack"?o.programErrorStack.stack:s==="program"?o.programErrorStack.stack[n.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return n.programErrorStack=ha.parse(n.logs),new Proxy(n,i)}return n}const ie={InstructionMissing:S_,InstructionFallbackNotFound:k_,InstructionDidNotDeserialize:I_,InstructionDidNotSerialize:T_,IdlInstructionStub:N_,IdlInstructionInvalidProgram:O_,IdlAccountNotEmpty:C_,EventInstructionStub:x_,ConstraintMut:B_,ConstraintHasOne:M_,ConstraintSigner:P_,ConstraintRaw:L_,ConstraintOwner:U_,ConstraintRentExempt:D_,ConstraintSeeds:F_,ConstraintExecutable:W_,ConstraintState:z_,ConstraintAssociated:H_,ConstraintAssociatedInit:K_,ConstraintClose:$_,ConstraintAddress:V_,ConstraintZero:q_,ConstraintTokenMint:G_,ConstraintTokenOwner:j_,ConstraintMintMintAuthority:Y_,ConstraintMintFreezeAuthority:Z_,ConstraintMintDecimals:X_,ConstraintSpace:J_,ConstraintAccountIsNone:Q_,ConstraintTokenTokenProgram:ew,ConstraintMintTokenProgram:tw,ConstraintAssociatedTokenTokenProgram:nw,ConstraintMintGroupPointerExtension:rw,ConstraintMintGroupPointerExtensionAuthority:iw,ConstraintMintGroupPointerExtensionGroupAddress:ow,ConstraintMintGroupMemberPointerExtension:sw,ConstraintMintGroupMemberPointerExtensionAuthority:aw,ConstraintMintGroupMemberPointerExtensionMemberAddress:cw,ConstraintMintMetadataPointerExtension:uw,ConstraintMintMetadataPointerExtensionAuthority:lw,ConstraintMintMetadataPointerExtensionMetadataAddress:dw,ConstraintMintCloseAuthorityExtension:fw,ConstraintMintCloseAuthorityExtensionAuthority:hw,ConstraintMintPermanentDelegateExtension:pw,ConstraintMintPermanentDelegateExtensionDelegate:gw,ConstraintMintTransferHookExtension:mw,ConstraintMintTransferHookExtensionAuthority:yw,ConstraintMintTransferHookExtensionProgramId:_w,RequireViolated:ww,RequireEqViolated:A_,RequireKeysEqViolated:bw,RequireNeqViolated:vw,RequireKeysNeqViolated:Ew,RequireGtViolated:Aw,RequireGteViolated:Rw,AccountDiscriminatorAlreadySet:Sw,AccountDiscriminatorNotFound:kw,AccountDiscriminatorMismatch:Iw,AccountDidNotDeserialize:Tw,AccountDidNotSerialize:Nw,AccountNotEnoughKeys:Ow,AccountNotMutable:Cw,AccountOwnedByWrongProgram:xw,InvalidProgramId:Bw,InvalidProgramExecutable:Mw,AccountNotSigner:Pw,AccountNotSystemOwned:Lw,AccountNotInitialized:Uw,AccountNotProgramData:Dw,AccountNotAssociatedTokenAccount:Fw,AccountSysvarMismatch:Ww,AccountReallocExceedsLimit:zw,AccountDuplicateReallocs:Hw,DeclaredProgramIdMismatch:Kw,TryingToInitPayerAsProgramAccount:$w,InvalidNumericConversion:Vw,Deprecated:R_},aO=new Map([[ie.InstructionMissing,"8 byte instruction identifier not provided"],[ie.InstructionFallbackNotFound,"Fallback functions are not supported"],[ie.InstructionDidNotDeserialize,"The program could not deserialize the given instruction"],[ie.InstructionDidNotSerialize,"The program could not serialize the given instruction"],[ie.IdlInstructionStub,"The program was compiled without idl instructions"],[ie.IdlInstructionInvalidProgram,"The transaction was given an invalid program for the IDL instruction"],[ie.IdlAccountNotEmpty,"IDL account must be empty in order to resize, try closing first"],[ie.EventInstructionStub,"The program was compiled without `event-cpi` feature"],[ie.ConstraintMut,"A mut constraint was violated"],[ie.ConstraintHasOne,"A has one constraint was violated"],[ie.ConstraintSigner,"A signer constraint was violated"],[ie.ConstraintRaw,"A raw constraint was violated"],[ie.ConstraintOwner,"An owner constraint was violated"],[ie.ConstraintRentExempt,"A rent exemption constraint was violated"],[ie.ConstraintSeeds,"A seeds constraint was violated"],[ie.ConstraintExecutable,"An executable constraint was violated"],[ie.ConstraintState,"Deprecated Error, feel free to replace with something else"],[ie.ConstraintAssociated,"An associated constraint was violated"],[ie.ConstraintAssociatedInit,"An associated init constraint was violated"],[ie.ConstraintClose,"A close constraint was violated"],[ie.ConstraintAddress,"An address constraint was violated"],[ie.ConstraintZero,"Expected zero account discriminant"],[ie.ConstraintTokenMint,"A token mint constraint was violated"],[ie.ConstraintTokenOwner,"A token owner constraint was violated"],[ie.ConstraintMintMintAuthority,"A mint mint authority constraint was violated"],[ie.ConstraintMintFreezeAuthority,"A mint freeze authority constraint was violated"],[ie.ConstraintMintDecimals,"A mint decimals constraint was violated"],[ie.ConstraintSpace,"A space constraint was violated"],[ie.ConstraintAccountIsNone,"A required account for the constraint is None"],[ie.ConstraintTokenTokenProgram,"A token account token program constraint was violated"],[ie.ConstraintMintTokenProgram,"A mint token program constraint was violated"],[ie.ConstraintAssociatedTokenTokenProgram,"An associated token account token program constraint was violated"],[ie.ConstraintMintGroupPointerExtension,"A group pointer extension constraint was violated"],[ie.ConstraintMintGroupPointerExtensionAuthority,"A group pointer extension authority constraint was violated"],[ie.ConstraintMintGroupPointerExtensionGroupAddress,"A group pointer extension group address constraint was violated"],[ie.ConstraintMintGroupMemberPointerExtension,"A group member pointer extension constraint was violated"],[ie.ConstraintMintGroupMemberPointerExtensionAuthority,"A group member pointer extension authority constraint was violated"],[ie.ConstraintMintGroupMemberPointerExtensionMemberAddress,"A group member pointer extension group address constraint was violated"],[ie.ConstraintMintMetadataPointerExtension,"A metadata pointer extension constraint was violated"],[ie.ConstraintMintMetadataPointerExtensionAuthority,"A metadata pointer extension authority constraint was violated"],[ie.ConstraintMintMetadataPointerExtensionMetadataAddress,"A metadata pointer extension metadata address constraint was violated"],[ie.ConstraintMintCloseAuthorityExtension,"A close authority constraint was violated"],[ie.ConstraintMintCloseAuthorityExtensionAuthority,"A close authority extension authority constraint was violated"],[ie.ConstraintMintPermanentDelegateExtension,"A permanent delegate extension constraint was violated"],[ie.ConstraintMintPermanentDelegateExtensionDelegate,"A permanent delegate extension delegate constraint was violated"],[ie.ConstraintMintTransferHookExtension,"A transfer hook extension constraint was violated"],[ie.ConstraintMintTransferHookExtensionAuthority,"A transfer hook extension authority constraint was violated"],[ie.ConstraintMintTransferHookExtensionProgramId,"A transfer hook extension transfer hook program id constraint was violated"],[ie.RequireViolated,"A require expression was violated"],[ie.RequireEqViolated,"A require_eq expression was violated"],[ie.RequireKeysEqViolated,"A require_keys_eq expression was violated"],[ie.RequireNeqViolated,"A require_neq expression was violated"],[ie.RequireKeysNeqViolated,"A require_keys_neq expression was violated"],[ie.RequireGtViolated,"A require_gt expression was violated"],[ie.RequireGteViolated,"A require_gte expression was violated"],[ie.AccountDiscriminatorAlreadySet,"The account discriminator was already set on this account"],[ie.AccountDiscriminatorNotFound,"No 8 byte discriminator was found on the account"],[ie.AccountDiscriminatorMismatch,"8 byte discriminator did not match what was expected"],[ie.AccountDidNotDeserialize,"Failed to deserialize the account"],[ie.AccountDidNotSerialize,"Failed to serialize the account"],[ie.AccountNotEnoughKeys,"Not enough account keys given to the instruction"],[ie.AccountNotMutable,"The given account is not mutable"],[ie.AccountOwnedByWrongProgram,"The given account is owned by a different program than expected"],[ie.InvalidProgramId,"Program ID was not as expected"],[ie.InvalidProgramExecutable,"Program account is not executable"],[ie.AccountNotSigner,"The given account did not sign"],[ie.AccountNotSystemOwned,"The given account is not owned by the system program"],[ie.AccountNotInitialized,"The program expected this account to be already initialized"],[ie.AccountNotProgramData,"The given account is not a program data account"],[ie.AccountNotAssociatedTokenAccount,"The given account is not the associated token account"],[ie.AccountSysvarMismatch,"The given public key does not match the required sysvar"],[ie.AccountReallocExceedsLimit,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[ie.AccountDuplicateReallocs,"The account was duplicated for more than one reallocation"],[ie.DeclaredProgramIdMismatch,"The declared program id does not match the actual program id"],[ie.TryingToInitPayerAsProgramAccount,"You cannot/should not initialize the payer account as a program account"],[ie.InvalidNumericConversion,"The program could not perform the numeric conversion, out of range integral type conversion attempted"],[ie.Deprecated,"The API being used is deprecated and should no longer be used"]]);class Oe{static fieldLayout(e,t=[],r){const i=e.name;switch(e.type){case"bool":return Ae.bool(i);case"u8":return Ae.u8(i);case"i8":return Ae.i8(i);case"u16":return Ae.u16(i);case"i16":return Ae.i16(i);case"u32":return Ae.u32(i);case"i32":return Ae.i32(i);case"f32":return Ae.f32(i);case"u64":return Ae.u64(i);case"i64":return Ae.i64(i);case"f64":return Ae.f64(i);case"u128":return Ae.u128(i);case"i128":return Ae.i128(i);case"u256":return Ae.u256(i);case"i256":return Ae.i256(i);case"bytes":return Ae.vecU8(i);case"string":return Ae.str(i);case"pubkey":return Ae.publicKey(i);default:{if("option"in e.type)return Ae.option(Oe.fieldLayout({type:e.type.option},t,r),i);if("vec"in e.type)return Ae.vec(Oe.fieldLayout({type:e.type.vec},t,r),i);if("array"in e.type){let[o,s]=e.type.array;return s=Oe.resolveArrayLen(s,r),Ae.array(Oe.fieldLayout({type:o},t,r),s,i)}if("defined"in e.type){if(!t)throw new ti("User defined types not provided");const o=e.type.defined.name,s=t.find(a=>a.name===o);if(!s)throw new ti(`Type not found: ${e.name}`);return Oe.typeDefLayout({typeDef:s,types:t,genericArgs:r??e.type.defined.generics,name:i})}if("generic"in e.type){const o=r==null?void 0:r.at(0);if((o==null?void 0:o.kind)!=="type")throw new ti(`Invalid generic field: ${e.name}`);return Oe.fieldLayout({...e,type:o.type},t)}throw new ti(`Not yet implemented: ${JSON.stringify(e.type)}`)}}}static typeDefLayout({typeDef:e,types:t,name:r,genericArgs:i}){switch(e.type.kind){case"struct":{const o=Ro(e.type.fields,()=>[],s=>s.map(a=>{const c=i&&Oe.resolveGenericArgs({type:a.type,typeDef:e,genericArgs:i});return Oe.fieldLayout(a,t,c)}),s=>s.map((a,c)=>{const u=i&&Oe.resolveGenericArgs({type:a,typeDef:e,genericArgs:i});return Oe.fieldLayout({name:c.toString(),type:a},t,u)}));return Ae.struct(o,r)}case"enum":{const o=e.type.variants.map(s=>{const a=Ro(s.fields,()=>[],c=>c.map(u=>{const d=i&&Oe.resolveGenericArgs({type:u.type,typeDef:e,genericArgs:i});return Oe.fieldLayout(u,t,d)}),c=>c.map((u,d)=>{const p=i&&Oe.resolveGenericArgs({type:u,typeDef:e,genericArgs:i});return Oe.fieldLayout({name:d.toString(),type:u},t,p)}));return Ae.struct(a,s.name)});return r!==void 0?Ae.rustEnum(o).replicate(r):Ae.rustEnum(o,r)}case"type":return Oe.fieldLayout({type:e.type.alias,name:r},t)}}static typeSize(e,t,r){var i;switch(e){case"bool":return 1;case"u8":return 1;case"i8":return 1;case"i16":return 2;case"u16":return 2;case"u32":return 4;case"i32":return 4;case"f32":return 4;case"u64":return 8;case"i64":return 8;case"f64":return 8;case"u128":return 16;case"i128":return 16;case"u256":return 32;case"i256":return 32;case"bytes":return 1;case"string":return 1;case"pubkey":return 32;default:if("option"in e)return 1+Oe.typeSize(e.option,t,r);if("coption"in e)return 4+Oe.typeSize(e.coption,t,r);if("vec"in e)return 1;if("array"in e){let[o,s]=e.array;return s=Oe.resolveArrayLen(s,r),Oe.typeSize(o,t,r)*s}if("defined"in e){const o=(i=t.types)===null||i===void 0?void 0:i.find(a=>a.name===e.defined.name);if(!o)throw new ti(`Type not found: ${JSON.stringify(e)}`);const s=a=>{const c=r??e.defined.generics,u=c&&Oe.resolveGenericArgs({type:a,typeDef:o,genericArgs:c});return Oe.typeSize(a,t,u)};switch(o.type.kind){case"struct":return Ro(o.type.fields,()=>[0],a=>a.map(c=>s(c.type)),a=>a.map(c=>s(c))).reduce((a,c)=>a+c,0);case"enum":{const a=o.type.variants.map(c=>Ro(c.fields,()=>[0],u=>u.map(d=>s(d.type)),u=>u.map(d=>s(d))).reduce((u,d)=>u+d,0));return Math.max(...a)+1}case"type":return Oe.typeSize(o.type.alias,t,r)}}if("generic"in e){const o=r==null?void 0:r.at(0);if((o==null?void 0:o.kind)!=="type")throw new ti(`Invalid generic: ${e.generic}`);return Oe.typeSize(o.type,t,r)}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}static resolveArrayLen(e,t){if(typeof e=="number")return e;if(t){const r=t.find(i=>i.kind==="const");(r==null?void 0:r.kind)==="const"&&(e=+r.value)}if(typeof e!="number")throw new ti("Generic array length did not resolve");return e}static resolveGenericArgs({type:e,typeDef:t,genericArgs:r,isDefined:i}){if(typeof e!="object")return null;for(const o in t.generics){const s=t.generics[o];if("generic"in e&&s.name===e.generic)return[r[o]];if("option"in e){const a=Oe.resolveGenericArgs({type:e.option,typeDef:t,genericArgs:r,isDefined:i});if(!a||!i)return a;if(a[0].kind==="type")return[{kind:"type",type:{option:a[0].type}}]}if("vec"in e){const a=Oe.resolveGenericArgs({type:e.vec,typeDef:t,genericArgs:r,isDefined:i});if(!a||!i)return a;if(a[0].kind==="type")return[{kind:"type",type:{vec:a[0].type}}]}if("array"in e){const[a,c]=e.array,u=typeof c=="object",d=Oe.resolveGenericArgs({type:a,typeDef:t,genericArgs:r,isDefined:i});if(d){for(const p in t.generics.slice(+o)){const w=+o+ +p;u&&t.generics[w].name===c.generic&&d.push(r[w])}if(!i)return d;if(d[0].kind==="type"&&d[1].kind==="const")return[{kind:"type",type:{array:[d[0].type,+d[1].value]}}]}if(u&&s.name===c.generic){const p=r[o];return i?[{kind:"type",type:{array:[a,+p.value]}}]:[p]}return null}if("defined"in e)return e.defined.generics?e.defined.generics.flatMap(a=>{switch(a.kind){case"type":return Oe.resolveGenericArgs({type:a.type,typeDef:t,genericArgs:r,isDefined:!0});case"const":return[a]}}).filter(a=>a!==null):null}return null}}class cO{constructor(e){this.idl=e;const t=e.instructions.map(i=>{const o=i.name,s=i.args.map(c=>Oe.fieldLayout(c,e.types)),a=Ae.struct(s,o);return[o,{discriminator:i.discriminator,layout:a}]});this.ixLayouts=new Map(t);const r=t.map(([i,{discriminator:o,layout:s}])=>[_t.encode(o),{name:i,layout:s}]);this.sighashLayouts=new Map(r)}encode(e,t){const r=ce.Buffer.alloc(1e3),i=this.ixLayouts.get(e);if(!i)throw new Error(`Unknown method: ${e}`);const o=i.layout.encode(t,r),s=r.slice(0,o);return ce.Buffer.concat([ce.Buffer.from(i.discriminator),s])}decode(e,t="hex"){typeof e=="string"&&(e=t==="hex"?ce.Buffer.from(e,"hex"):_t.decode(e));const r=e.slice(0,So),i=e.slice(So),o=this.sighashLayouts.get(_t.encode(r));return o?{name:o.name,data:o.layout.decode(i)}:null}format(e,t){return Nn.format(e,t,this.idl)}}class Nn{static format(e,t,r){const i=r.instructions.find(c=>e.name===c.name);if(!i)return console.error("Invalid instruction given"),null;const o=i.args.map(c=>({name:c.name,type:Nn.formatIdlType(c.type),data:Nn.formatIdlData(c,e.data[c.name],r.types)})),s=Nn.flattenIdlAccounts(i.accounts),a=t.map((c,u)=>u<s.length?{name:s[u].name,...c}:{name:void 0,...c});return{args:o,accounts:a}}static formatIdlType(e){if(typeof e=="string")return e;if("option"in e)return`Option<${this.formatIdlType(e.option)}>`;if("coption"in e)return`COption<${this.formatIdlType(e.coption)}>`;if("vec"in e)return`Vec<${this.formatIdlType(e.vec)}>`;if("array"in e)return`Array<${e.array[0]}; ${e.array[1]}>`;if("defined"in e){const t=e.defined.name;if(e.defined.generics){const r=e.defined.generics.map(i=>{switch(i.kind){case"type":return Nn.formatIdlType(i.type);case"const":return i.value}}).join(", ");return`${t}<${r}>`}return t}throw new Error(`Unknown IDL type: ${e}`)}static formatIdlData(e,t,r){if(typeof e.type=="string")return t.toString();if("vec"in e.type)return"["+t.map(i=>this.formatIdlData({name:"",type:e.type.vec},i,r)).join(", ")+"]";if("option"in e.type)return t===null?"null":this.formatIdlData({name:"",type:e.type.option},t,r);if("defined"in e.type){if(!r)throw new Error("User defined types not provided");const i=e.type.defined.name,o=r.find(s=>s.name===i);if(!o)throw new Error(`Type not found: ${i}`);return Nn.formatIdlDataDefined(o,t,r)}return"unknown"}static formatIdlDataDefined(e,t,r){switch(e.type.kind){case"struct":return"{ "+Ro(e.type.fields,()=>"",i=>Object.entries(t).map(([o,s])=>{const a=i.find(c=>c.name===o);if(!a)throw new Error(`Field not found: ${o}`);return o+": "+Nn.formatIdlData(a,s,r)}).join(", "),i=>Object.entries(t).map(([o,s])=>o+": "+Nn.formatIdlData({name:"",type:i[o]},s,r)).join(", "))+" }";case"enum":{const i=Object.keys(t)[0],o=e.type.variants.find(a=>a.name===i);if(!o)throw new Error(`Unable to find variant: ${i}`);const s=t[i];return Ro(o.fields,()=>i,a=>{const c=Object.keys(s).map(u=>{const d=s[u],p=a.find(w=>w.name===u);if(!p)throw new Error(`Field not found: ${u}`);return u+": "+Nn.formatIdlData(p,d,r)}).join(", ");return`${i} { ${c} }`},a=>{const c=Object.entries(s).map(([u,d])=>u+": "+Nn.formatIdlData({name:"",type:a[u]},d,r)).join(", ");return`${i} { ${c} }`})}case"type":return Nn.formatIdlType(e.type.alias)}}static flattenIdlAccounts(e,t){return e.map(r=>{const i=uO(r.name);if(r.hasOwnProperty("accounts")){const o=t?`${t} > ${i}`:i;return Nn.flattenIdlAccounts(r.accounts,o)}else return{...r,name:t?`${t} > ${i}`:i}}).flat()}}function uO(n){const e=n.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}const So=8;class lO{constructor(e){if(this.idl=e,!e.accounts){this.accountLayouts=new Map;return}const t=e.types;if(!t)throw new Error("Accounts require `idl.types`");const r=e.accounts.map(i=>{const o=t.find(s=>s.name===i.name);if(!o)throw new Error(`Account not found: ${i.name}`);return[i.name,Oe.typeDefLayout({typeDef:o,types:t})]});this.accountLayouts=new Map(r)}async encode(e,t){const r=ce.Buffer.alloc(1e3),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);const o=i.encode(t,r),s=r.slice(0,o),a=this.accountDiscriminator(e);return ce.Buffer.concat([a,s])}decode(e,t){if(this.accountDiscriminator(e).compare(t.slice(0,So)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(e,t)}decodeAny(e){const t=e.slice(0,So),r=Array.from(this.accountLayouts.keys()).find(i=>this.accountDiscriminator(i).equals(t));if(!r)throw new Error("Account not found");return this.decodeUnchecked(r,e)}decodeUnchecked(e,t){const r=t.subarray(So),i=this.accountLayouts.get(e);if(!i)throw new Error(`Unknown account: ${e}`);return i.decode(r)}memcmp(e,t){const r=this.accountDiscriminator(e);return{offset:0,bytes:_t.encode(t?ce.Buffer.concat([r,t]):r)}}size(e){return So+Oe.typeSize({defined:{name:e}},this.idl)}accountDiscriminator(e){var t;const r=(t=this.idl.accounts)===null||t===void 0?void 0:t.find(i=>i.name===e);if(!r)throw new Error(`Account not found: ${e}`);return ce.Buffer.from(r.discriminator)}}class dO{constructor(e){var t;if(!e.events){this.layouts=new Map;return}const r=e.types;if(!r)throw new Error("Events require `idl.types`");const i=e.events.map(o=>{const s=r.find(a=>a.name===o.name);if(!s)throw new Error(`Event not found: ${o.name}`);return[o.name,Oe.typeDefLayout({typeDef:s,types:r})]});this.layouts=new Map(i),this.discriminators=new Map(((t=e.events)!==null&&t!==void 0?t:[]).map(o=>[c0(ce.Buffer.from(o.discriminator)),o.name]))}decode(e){let t;try{t=__(e)}catch{return null}const r=c0(t.slice(0,8)),i=this.discriminators.get(r);if(!i)return null;const o=this.layouts.get(i);if(!o)throw new Error(`Unknown event: ${i}`);return{data:o.decode(t.slice(8)),name:i}}}class fO{constructor(e){const t=e.types;if(!t){this.typeLayouts=new Map;return}const r=t.filter(i=>!i.generics).map(i=>[i.name,Oe.typeDefLayout({typeDef:i,types:t})]);this.typeLayouts=new Map(r)}encode(e,t){const r=ce.Buffer.alloc(1e3),i=this.typeLayouts.get(e);if(!i)throw new Error(`Unknown type: ${e}`);const o=i.encode(t,r);return r.slice(0,o)}decode(e,t){const r=this.typeLayouts.get(e);if(!r)throw new Error(`Unknown type: ${e}`);return r.decode(t)}}class jw{constructor(e){this.instruction=new cO(e),this.accounts=new lO(e),this.events=new dO(e),this.types=new fO(e)}}class In{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,r){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var fu=In;function hO(n,e){return e.property?n+"["+e.property+"]":n}class Hi extends In{isCount(){throw new Error("ExternalLayout is abstract")}}class Yw extends Hi{constructor(e,t,r){if(!(e instanceof In))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof hu||this.layout instanceof Zw}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,r){return r===void 0&&(r=0),this.layout.encode(e,t,r+this.offset)}}class hu extends In{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeUIntLE(e,r,this.span),this.span}}class Zw extends In{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,r){return r===void 0&&(r=0),t.writeUIntBE(e,r,this.span),this.span}}const Nd=Math.pow(2,32);function Xw(n){const e=Math.floor(n/Nd),t=n-e*Nd;return{hi32:e,lo32:t}}function Jw(n,e){return n*Nd+e}class pO extends In{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const r=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return Jw(i,r)}encode(e,t,r){r===void 0&&(r=0);const i=Xw(e);return t.writeUInt32LE(i.lo32,r),t.writeUInt32LE(i.hi32,r+4),8}}class gO extends In{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const r=e.readUInt32LE(t),i=e.readInt32LE(t+4);return Jw(i,r)}encode(e,t,r){r===void 0&&(r=0);const i=Xw(e);return t.writeUInt32LE(i.lo32,r),t.writeInt32LE(i.hi32,r+4),8}}class mO extends In{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((o,s)=>o&&s instanceof In,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;try{r=this.fields.reduce((i,o)=>{const s=o.getSpan(e,t);return t+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t){t===void 0&&(t=0);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r){r===void 0&&(r=0);const i=r;let o=0,s=0;for(const a of this.fields){let c=a.span;if(s=0<c?c:0,a.property!==void 0){const u=e[a.property];u!==void 0&&(s=a.encode(u,t,r),0>c&&(c=a.getSpan(t,r)))}o=r,r+=c}return o+s-i}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class Qw{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class p0 extends Qw{constructor(e,t){if(!(e instanceof Hi&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class e1 extends In{constructor(e,t,r){const i=e instanceof hu||e instanceof Zw;if(i)e=new p0(new Yw(e));else if(e instanceof Hi&&e.isCount())e=new p0(e);else if(!(e instanceof Qw))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof In))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&i&&(o+=e.layout.span)),super(o,r),this.discriminator=e,this.usesPrefixDiscriminator=i,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return s(a)},this.configGetSourceVariant=function(a){s=a.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let r;const i=this.discriminator,o=i.decode(e,t);let s=this.registry[o];if(s===void 0){let a=0;s=this.defaultLayout,this.usesPrefixDiscriminator&&(a=i.layout.span),r=this.makeDestinationObject(),r[i.property]=o,r[s.property]=this.defaultLayout.decode(e,t+a)}else r=s.decode(e,t);return r}encode(e,t,r){r===void 0&&(r=0);const i=this.getSourceVariant(e);if(i===void 0){const o=this.discriminator,s=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=o.layout.span),o.encode(e[o.property],t,r),a+s.encode(e[s.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){const i=new yO(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t){let r=e;return Buffer.isBuffer(e)&&(t===void 0&&(t=0),r=this.discriminator.decode(e,t)),this.registry[r]}}class yO extends In{constructor(e,t,r,i){if(!(e instanceof e1))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof In))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=r?r.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(e,t+r)}decode(e,t){const r=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r){r===void 0&&(r=0);let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let o=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),o+=this.layout.getSpan(t,r+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class _O extends In{constructor(e,t){if(!(e instanceof Hi&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Hi||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t){t===void 0&&(t=0);let r=this.span;return 0>r&&(r=this.length.decode(e,t)),e.slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof Hi&&(i=e.length),!(Buffer.isBuffer(e)&&i===e.length))throw new TypeError(hO("Blob.encode",this)+" requires (length "+i+") Buffer as src");if(r+i>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),r,i,"hex"),this.length instanceof Hi&&this.length.encode(i,t,r),i}}var wO=(n,e,t)=>new Yw(n,e,t),bO=n=>new hu(1,n),Pr=n=>new hu(4,n),vO=n=>new pO(n),Vr=n=>new gO(n),Gt=(n,e,t)=>new mO(n,e,t),t1=(n,e,t)=>new e1(n,e,t),pa=(n,e)=>new _O(n,e);class EO extends fu{constructor(e){super(-1,e),this.property=e,this.layout=Gt([Pr("length"),Pr("lengthPadding"),pa(wO(Pr(),-8),"chars")],this.property)}encode(e,t,r=0){if(e==null)return this.layout.span;const i={chars:Buffer.from(e,"utf8")};return this.layout.encode(i,t,r)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return Pr().span+Pr().span+new Mn(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function pu(n){return new EO(n)}function qn(n){return pa(32,n)}const Wn=t1(Pr("instruction"));Wn.addVariant(0,Gt([Vr("lamports"),Vr("space"),qn("owner")]),"createAccount");Wn.addVariant(1,Gt([qn("owner")]),"assign");Wn.addVariant(2,Gt([Vr("lamports")]),"transfer");Wn.addVariant(3,Gt([qn("base"),pu("seed"),Vr("lamports"),Vr("space"),qn("owner")]),"createAccountWithSeed");Wn.addVariant(4,Gt([qn("authorized")]),"advanceNonceAccount");Wn.addVariant(5,Gt([Vr("lamports")]),"withdrawNonceAccount");Wn.addVariant(6,Gt([qn("authorized")]),"initializeNonceAccount");Wn.addVariant(7,Gt([qn("authorized")]),"authorizeNonceAccount");Wn.addVariant(8,Gt([Vr("space")]),"allocate");Wn.addVariant(9,Gt([qn("base"),pu("seed"),Vr("space"),qn("owner")]),"allocateWithSeed");Wn.addVariant(10,Gt([qn("base"),pu("seed"),qn("owner")]),"assignWithSeed");Wn.addVariant(11,Gt([Vr("lamports"),pu("seed"),qn("owner")]),"transferWithSeed");Math.max(...Object.values(Wn.registry).map(n=>n.span));class AO extends fu{constructor(e,t,r,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}function g0(n){return new AO(pa(32),e=>new X(e),e=>e.toBuffer(),n)}Gt([Pr("version"),Pr("state"),g0("authorizedPubkey"),g0("nonce"),Gt([vO("lamportsPerSignature")],"feeCalculator")]);new X("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new X("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var m0={exports:{}};(function(n,e){var t=typeof self<"u"?self:oO,r=function(){function o(){this.fetch=!1,this.DOMException=t.DOMException}return o.prototype=t,new o}();(function(o){(function(s){var a={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function c(l){return l&&DataView.prototype.isPrototypeOf(l)}if(a.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(l){return l&&u.indexOf(Object.prototype.toString.call(l))>-1};function p(l){if(typeof l!="string"&&(l=String(l)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(l))throw new TypeError("Invalid character in header field name");return l.toLowerCase()}function w(l){return typeof l!="string"&&(l=String(l)),l}function h(l){var f={next:function(){var _=l.shift();return{done:_===void 0,value:_}}};return a.iterable&&(f[Symbol.iterator]=function(){return f}),f}function b(l){this.map={},l instanceof b?l.forEach(function(f,_){this.append(_,f)},this):Array.isArray(l)?l.forEach(function(f){this.append(f[0],f[1])},this):l&&Object.getOwnPropertyNames(l).forEach(function(f){this.append(f,l[f])},this)}b.prototype.append=function(l,f){l=p(l),f=w(f);var _=this.map[l];this.map[l]=_?_+", "+f:f},b.prototype.delete=function(l){delete this.map[p(l)]},b.prototype.get=function(l){return l=p(l),this.has(l)?this.map[l]:null},b.prototype.has=function(l){return this.map.hasOwnProperty(p(l))},b.prototype.set=function(l,f){this.map[p(l)]=w(f)},b.prototype.forEach=function(l,f){for(var _ in this.map)this.map.hasOwnProperty(_)&&l.call(f,this.map[_],_,this)},b.prototype.keys=function(){var l=[];return this.forEach(function(f,_){l.push(_)}),h(l)},b.prototype.values=function(){var l=[];return this.forEach(function(f){l.push(f)}),h(l)},b.prototype.entries=function(){var l=[];return this.forEach(function(f,_){l.push([_,f])}),h(l)},a.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function S(l){if(l.bodyUsed)return Promise.reject(new TypeError("Already read"));l.bodyUsed=!0}function A(l){return new Promise(function(f,_){l.onload=function(){f(l.result)},l.onerror=function(){_(l.error)}})}function I(l){var f=new FileReader,_=A(f);return f.readAsArrayBuffer(l),_}function x(l){var f=new FileReader,_=A(f);return f.readAsText(l),_}function k(l){for(var f=new Uint8Array(l),_=new Array(f.length),E=0;E<f.length;E++)_[E]=String.fromCharCode(f[E]);return _.join("")}function B(l){if(l.slice)return l.slice(0);var f=new Uint8Array(l.byteLength);return f.set(new Uint8Array(l)),f.buffer}function L(){return this.bodyUsed=!1,this._initBody=function(l){this._bodyInit=l,l?typeof l=="string"?this._bodyText=l:a.blob&&Blob.prototype.isPrototypeOf(l)?this._bodyBlob=l:a.formData&&FormData.prototype.isPrototypeOf(l)?this._bodyFormData=l:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)?this._bodyText=l.toString():a.arrayBuffer&&a.blob&&c(l)?(this._bodyArrayBuffer=B(l.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(l)||d(l))?this._bodyArrayBuffer=B(l):this._bodyText=l=Object.prototype.toString.call(l):this._bodyText="",this.headers.get("content-type")||(typeof l=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var l=S(this);if(l)return l;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?S(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(I)}),this.text=function(){var l=S(this);if(l)return l;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function W(l){var f=l.toUpperCase();return $.indexOf(f)>-1?f:l}function Y(l,f){f=f||{};var _=f.body;if(l instanceof Y){if(l.bodyUsed)throw new TypeError("Already read");this.url=l.url,this.credentials=l.credentials,f.headers||(this.headers=new b(l.headers)),this.method=l.method,this.mode=l.mode,this.signal=l.signal,!_&&l._bodyInit!=null&&(_=l._bodyInit,l.bodyUsed=!0)}else this.url=String(l);if(this.credentials=f.credentials||this.credentials||"same-origin",(f.headers||!this.headers)&&(this.headers=new b(f.headers)),this.method=W(f.method||this.method||"GET"),this.mode=f.mode||this.mode||null,this.signal=f.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&_)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(_)}Y.prototype.clone=function(){return new Y(this,{body:this._bodyInit})};function D(l){var f=new FormData;return l.trim().split("&").forEach(function(_){if(_){var E=_.split("="),N=E.shift().replace(/\+/g," "),C=E.join("=").replace(/\+/g," ");f.append(decodeURIComponent(N),decodeURIComponent(C))}}),f}function j(l){var f=new b,_=l.replace(/\r?\n[\t ]+/g," ");return _.split(/\r?\n/).forEach(function(E){var N=E.split(":"),C=N.shift().trim();if(C){var P=N.join(":").trim();f.append(C,P)}}),f}L.call(Y.prototype);function G(l,f){f||(f={}),this.type="default",this.status=f.status===void 0?200:f.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in f?f.statusText:"OK",this.headers=new b(f.headers),this.url=f.url||"",this._initBody(l)}L.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},G.error=function(){var l=new G(null,{status:0,statusText:""});return l.type="error",l};var V=[301,302,303,307,308];G.redirect=function(l,f){if(V.indexOf(f)===-1)throw new RangeError("Invalid status code");return new G(null,{status:f,headers:{location:l}})},s.DOMException=o.DOMException;try{new s.DOMException}catch{s.DOMException=function(f,_){this.message=f,this.name=_;var E=Error(f);this.stack=E.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function v(l,f){return new Promise(function(_,E){var N=new Y(l,f);if(N.signal&&N.signal.aborted)return E(new s.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function P(){C.abort()}C.onload=function(){var T={status:C.status,statusText:C.statusText,headers:j(C.getAllResponseHeaders()||"")};T.url="responseURL"in C?C.responseURL:T.headers.get("X-Request-URL");var m="response"in C?C.response:C.responseText;_(new G(m,T))},C.onerror=function(){E(new TypeError("Network request failed"))},C.ontimeout=function(){E(new TypeError("Network request failed"))},C.onabort=function(){E(new s.DOMException("Aborted","AbortError"))},C.open(N.method,N.url,!0),N.credentials==="include"?C.withCredentials=!0:N.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&a.blob&&(C.responseType="blob"),N.headers.forEach(function(T,m){C.setRequestHeader(m,T)}),N.signal&&(N.signal.addEventListener("abort",P),C.onreadystatechange=function(){C.readyState===4&&N.signal.removeEventListener("abort",P)}),C.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}return v.polyfill=!0,o.fetch||(o.fetch=v,o.Headers=b,o.Request=Y,o.Response=G),s.Headers=b,s.Request=Y,s.Response=G,s.fetch=v,Object.defineProperty(s,"__esModule",{value:!0}),s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(m0,m0.exports);Ae.rustEnum([Ae.struct([],"uninitialized"),Ae.struct([Ae.option(Ae.publicKey(),"authorityAddress")],"buffer"),Ae.struct([Ae.publicKey("programdataAddress")],"program"),Ae.struct([Ae.u64("slot"),Ae.option(Ae.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Ae.u32());function gu(n,e){var t,r;let i={};const o=n.args?n.args.length:0;if(e.length>o){if(e.length!==o+1)throw new Error(`provided too many arguments ${e} to instruction ${n==null?void 0:n.name} expecting: ${(r=(t=n.args)===null||t===void 0?void 0:t.map(s=>s.name))!==null&&r!==void 0?r:[]}`);i=e.pop()}return[e,i]}class Bc{static build(e,t,r){if(e.name==="_inner")throw new ti("the _inner name is reserved");const i=(...o)=>{const[s,a]=gu(e,[...o]);w_(e.accounts,a.accounts),RO(e,...o);const c=i.accounts(a.accounts);return a.remainingAccounts!==void 0&&c.push(...a.remainingAccounts),qw("debug-logs")&&console.log("Outgoing account metas:",c),new De({keys:c,programId:r,data:t(e.name,HN(e,...s))})};return i.accounts=o=>Bc.accountsArray(o,e.accounts,r,e.name),i}static accountsArray(e,t,r,i){return e?t.map(o=>{if(Ao(o)){const d=e[o.name];return Bc.accountsArray(d,o.accounts,r,i).flat()}let s;try{s=Jn(e[o.name])}catch{throw new Error(`Wrong input type for account "${o.name}" in the instruction accounts object${i!==void 0?' for instruction "'+i+'"':""}. Expected PublicKey or string.`)}const a=o.optional&&s.equals(r),c=!!(o.writable&&!a),u=!!(o.signer&&!a);return{pubkey:s,isWritable:c,isSigner:u}}).flat():[]}}function RO(n,...e){}class SO{static build(e,t){return(...i)=>{var o,s,a;const[,c]=gu(e,[...i]),u=new Ne;if(c.preInstructions&&c.instructions)throw new Error("instructions is deprecated, use preInstructions");return(o=c.preInstructions)===null||o===void 0||o.forEach(d=>u.add(d)),(s=c.instructions)===null||s===void 0||s.forEach(d=>u.add(d)),u.add(t(...i)),(a=c.postInstructions)===null||a===void 0||a.forEach(d=>u.add(d)),u}}}class kO{static build(e,t,r,i){return async(...s)=>{var a;const c=t(...s),[,u]=gu(e,[...s]);if(i.sendAndConfirm===void 0)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await i.sendAndConfirm(c,(a=u.signers)!==null&&a!==void 0?a:[],u.options)}catch(d){throw Gw(d,r)}}}}class IO{static build(e,t,r,i){var o;return((o=e.accounts)!==null&&o!==void 0?o:[]).reduce((s,a)=>(s[a.name]=new TO(e,a,r,i,t),s),{})}}class TO{get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}constructor(e,t,r,i,o){this._idlAccount=t,this._programId=r,this._provider=i??Td(),this._coder=o??new jw(e),this._size=this._coder.accounts.size(t.name)}async fetchNullable(e,t){const{data:r}=await this.fetchNullableAndContext(e,t);return r}async fetchNullableAndContext(e,t){const r=await this.getAccountInfoAndContext(e,t),{value:i,context:o}=r;return{data:i&&i.data.length!==0?this._coder.accounts.decode(this._idlAccount.name,i.data):null,context:o}}async fetch(e,t){const{data:r}=await this.fetchNullableAndContext(e,t);if(r===null)throw new Error(`Account does not exist or has no data ${e.toString()}`);return r}async fetchAndContext(e,t){const{data:r,context:i}=await this.fetchNullableAndContext(e,t);if(r===null)throw new Error(`Account does not exist ${e.toString()}`);return{data:r,context:i}}async fetchMultiple(e,t){return(await this.fetchMultipleAndContext(e,t)).map(i=>i?i.data:null)}async fetchMultipleAndContext(e,t){return(await JN(this._provider.connection,e.map(i=>Jn(i)),t)).map(i=>{if(i==null)return null;const{account:o,context:s}=i;return{data:this._coder.accounts.decode(this._idlAccount.name,o.data),context:s}})}async all(e){const t=this.coder.accounts.memcmp(this._idlAccount.name,e instanceof Buffer?e:void 0),r=[];return(t==null?void 0:t.offset)!=null&&(t==null?void 0:t.bytes)!=null&&r.push({memcmp:{offset:t.offset,bytes:t.bytes}}),(t==null?void 0:t.dataSize)!=null&&r.push({dataSize:t.dataSize}),(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[...r,...Array.isArray(e)?e:[]]})).map(({pubkey:o,account:s})=>({publicKey:o,account:this._coder.accounts.decode(this._idlAccount.name,s.data)}))}subscribe(e,t){const r=hs.get(e.toString());if(r)return r.ee;const i=new BN;e=Jn(e);const o=this._provider.connection.onAccountChange(e,s=>{const a=this._coder.accounts.decode(this._idlAccount.name,s.data);i.emit("change",a)},t);return hs.set(e.toString(),{ee:i,listener:o}),i}async unsubscribe(e){let t=hs.get(e.toString());if(!t){console.warn("Address is not subscribed");return}hs&&await this._provider.connection.removeAccountChangeListener(t.listener).then(()=>{hs.delete(e.toString())}).catch(console.error)}async createInstruction(e,t){const r=this.size;if(this._provider.publicKey===void 0)throw new Error("This function requires the Provider interface implementor to have a 'publicKey' field.");return vt.createAccount({fromPubkey:this._provider.publicKey,newAccountPubkey:e.publicKey,space:t??r,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(t??r),programId:this._programId})}async getAccountInfo(e,t){return await this._provider.connection.getAccountInfo(Jn(e),t)}async getAccountInfoAndContext(e,t){return await this._provider.connection.getAccountInfoAndContext(Jn(e),t)}}const hs=new Map,Od="Program log: ",n1="Program data: ",NO=Od.length,OO=n1.length;class CO{constructor(e,t,r){this._programId=e,this._provider=t,this._eventParser=new r1(e,r),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(e,t){var r;let i=this._listenerIdCount;return this._listenerIdCount+=1,this._eventListeners.has(e)||this._eventListeners.set(e,[]),this._eventListeners.set(e,((r=this._eventListeners.get(e))!==null&&r!==void 0?r:[]).concat(i)),this._eventCallbacks.set(i,[e,t]),this._onLogsSubscriptionId!==void 0||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,(o,s)=>{if(!o.err)for(const a of this._eventParser.parseLogs(o.logs)){const c=this._eventListeners.get(a.name);c&&c.forEach(u=>{const d=this._eventCallbacks.get(u);if(d){const[,p]=d;p(a.data,s.slot,o.signature)}})}})),i}async removeEventListener(e){const t=this._eventCallbacks.get(e);if(!t)throw new Error(`Event listener ${e} doesn't exist!`);const[r]=t;let i=this._eventListeners.get(r);if(!i)throw new Error(`Event listeners don't exist for ${r}!`);if(this._eventCallbacks.delete(e),i=i.filter(o=>o!==e),this._eventListeners.set(r,i),i.length===0&&this._eventListeners.delete(r),this._eventCallbacks.size===0){if(this._eventListeners.size!==0)throw new Error(`Expected event listeners size to be 0 but got ${this._eventListeners.size}`);this._onLogsSubscriptionId!==void 0&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0)}}}class r1{constructor(e,t){this.coder=t,this.programId=e}*parseLogs(e,t=!1){const r=new BO(e),i=new xO;let o=r.next();for(;o!==null;){let[s,a,c]=this.handleLog(i,o,t);s&&(yield s),a&&i.push(a),c&&i.pop(),o=r.next()}}handleLog(e,t,r){return e.stack.length>0&&e.program()===this.programId.toString()?this.handleProgramLog(t,r):[null,...this.handleSystemLog(t)]}handleProgramLog(e,t){if(e.startsWith(Od)||e.startsWith(n1)){const r=e.startsWith(Od)?e.slice(NO):e.slice(OO),i=this.coder.events.decode(r);if(t&&i===null)throw new Error(`Unable to decode event ${r}`);return[i,null,!1]}else return[null,...this.handleSystemLog(e)]}handleSystemLog(e){const t=e.split(":")[0];return t.match(/^Program (.*) success/g)!==null?[null,!0]:t.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:t.includes("invoke")?["cpi",!1]:[null,!1]}}class xO{constructor(){this.stack=[]}program(){if(!this.stack.length)throw new Error("Expected the stack to have elements");return this.stack[this.stack.length-1]}push(e){this.stack.push(e)}pop(){if(!this.stack.length)throw new Error("Expected the stack to have elements");this.stack.pop()}}class BO{constructor(e){this.logs=e}next(){if(this.logs.length===0)return null;let e=this.logs[0];return this.logs=this.logs.slice(1),e}}class MO{static build(e,t,r,i,o,s,a){return async(...u)=>{var d;const p=t(...u),[,w]=gu(e,[...u]);let h;if(i.simulate===void 0)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{h=await i.simulate(p,w.signers,(d=w.options)===null||d===void 0?void 0:d.commitment)}catch(A){throw Gw(A,r)}if(h===void 0)throw new Error("Unable to simulate transaction");const b=h.logs;if(!b)throw new Error("Simulated logs not found");const S=[];if(a.events){let A=new r1(s,o);for(const I of A.parseLogs(b))S.push(I)}return{events:S,raw:b}}}}function Nl(n){return new i1(pa(8),e=>Hf.fromBuffer(e),e=>e.toBuffer(),n)}function La(n){return new i1(pa(32),e=>new X(e),e=>e.toBuffer(),n)}function Ol(n,e){return new PO(n,e)}class i1 extends fu{constructor(e,t,r,i){super(e.span,i),this.layout=e,this.decoder=t,this.encoder=r}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,r){return this.layout.encode(this.encoder(e),t,r)}getSpan(e,t){return this.layout.getSpan(e,t)}}class PO extends fu{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=Pr()}encode(e,t,r=0){return e==null?this.layout.span+this.discriminator.encode(0,t,r):(this.discriminator.encode(1,t,r),this.layout.encode(e,t,r+4)+4)}decode(e,t=0){const r=this.discriminator.decode(e,t);if(r===0)return null;if(r===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class Hf extends Mn{toBuffer(){const e=super.toArray().reverse(),t=Buffer.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const r=Buffer.alloc(8);return t.copy(r),r}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new Hf([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}const LO=Gt([La("mint"),La("owner"),Nl("amount"),Ol(La(),"delegate"),(n=>{const e=t1(bO("discriminator"),null,n);return e.addVariant(0,Gt([]),"uninitialized"),e.addVariant(1,Gt([]),"initialized"),e.addVariant(2,Gt([]),"frozen"),e})("state"),Ol(Nl(),"isNative"),Nl("delegatedAmount"),Ol(La(),"closeAuthority")]);function UO(n){return LO.decode(n)}class DO{constructor(e,t,r,i,o,s,a,c){this._args=e,this._accounts=t,this._provider=r,this._programId=i,this._idlIx=o,this._idlTypes=a,this._customResolver=c,this._accountStore=new FO(r,s,i)}args(e){this._args=e}async resolve(){this.resolveEventCpi(this._idlIx.accounts),this.resolveConst(this._idlIx.accounts);let e=0;for(;await this.resolvePdasAndRelations(this._idlIx.accounts)+await this.resolveCustom()>0;)if(e++,e===16)throw new Error("Reached maximum depth for account resolution")}resolveOptionals(e){Object.assign(this._accounts,this.resolveOptionalsHelper(e,this._idlIx.accounts))}get(e){const t=e.reduce((r,i)=>r&&r[i],this._accounts);if(t&&t.toBase58)return t}set(e,t){let r=this._accounts;e.forEach((i,o)=>{var s;o===e.length-1&&(r[i]=t),r[i]=(s=r[i])!==null&&s!==void 0?s:{},r=r[i]})}resolveOptionalsHelper(e,t){const r={};for(const i of t){const o=i.name,s=e[o];s!==void 0&&(o1(s)?Ao(i)?r[o]=this.resolveOptionalsHelper(s,i.accounts):r[o]=s1(s):s!==null?r[o]=Jn(s):i.optional&&(r[o]=this._programId))}return r}async resolveCustom(){if(this._customResolver){const{accounts:e,resolved:t}=await this._customResolver({args:this._args,accounts:this._accounts,provider:this._provider,programId:this._programId,idlIx:this._idlIx});return this._accounts=e,t}return 0}resolveEventCpi(e,t=[]){for(const r in e){const i=e[r];Ao(i)&&this.resolveEventCpi(i.accounts,[...t,i.name]);const o=+r+1;if(o===e.length)return;const s=e[r].name,a=e[o].name;if(s==="eventAuthority"&&a==="program"){const c=[...t,s],u=[...t,a];this.get(c)||this.set(c,X.findProgramAddressSync([Buffer.from("__event_authority")],this._programId)[0]),this.get(u)||this.set(u,this._programId);return}}}resolveConst(e,t=[]){for(const r of e){const i=r.name;if(Ao(r))this.resolveConst(r.accounts,[...t,i]);else{const o=r;if((o.signer||o.address)&&!this.get([...t,i])){if(o.signer){if(!this._provider.wallet)throw new Error("This function requires the `Provider` interface implementor to have a `wallet` field.");this.set([...t,i],this._provider.wallet.publicKey)}o.address&&this.set([...t,i],Jn(o.address))}}}}async resolvePdasAndRelations(e,t=[]){let r=0;for(const i of e){const o=i.name;if(Ao(i))r+=await this.resolvePdasAndRelations(i.accounts,[...t,o]);else{const s=i;if((s.pda||s.relations)&&!this.get([...t,o])){r++;try{if(s.pda){const a=await Promise.all(s.pda.seeds.map(d=>this.toBuffer(d,t)));if(a.some(d=>!d))continue;const c=await this.parseProgramId(s,t),[u]=X.findProgramAddressSync(a,c);this.set([...t,o],u)}}catch{}try{if(s.relations){const a=this.get([...t,s.relations[0]]);if(a){const c=await this._accountStore.fetchAccount({publicKey:a});this.set([...t,o],c[o])}}}catch{}}}}return r}async parseProgramId(e,t=[]){var r;if(!(!((r=e.pda)===null||r===void 0)&&r.program))return this._programId;const i=await this.toBuffer(e.pda.program,t);if(!i)throw new Error(`Program seed not resolved: ${e.name}`);return new X(i)}async toBuffer(e,t=[]){switch(e.kind){case"const":return this.toBufferConst(e);case"arg":return await this.toBufferArg(e);case"account":return await this.toBufferAccount(e,t);default:throw new Error(`Unexpected seed: ${e}`)}}toBufferConst(e){return this.toBufferValue("bytes",e.value)}async toBufferArg(e){const[t,...r]=e.path.split("."),i=this._idlIx.args.findIndex(a=>a.name===t);if(i===-1)throw new Error(`Unable to find argument for seed: ${t}`);const o=r.reduce((a,c)=>(a??{})[c],this._args[i]);if(o===void 0)return;const s=this.getType(this._idlIx.args[i].type,r);return this.toBufferValue(s,o)}async toBufferAccount(e,t=[]){const[r,...i]=e.path.split("."),o=this.get([...t,r]);if(!o)return;if(!i.length)return this.toBufferValue("pubkey",o);if(!e.account)throw new Error(`Seed account is required in order to resolve type: ${e.path}`);let a=await this._accountStore.fetchAccount({publicKey:o,name:e.account}),c=i;for(;c.length>0;)a=a[c[0]],c=c.slice(1);if(a===void 0)return;const u=this.getType({defined:{name:e.account}},i);return this.toBufferValue(u,a)}toBufferValue(e,t){switch(e){case"u8":case"i8":return Buffer.from([t]);case"u16":case"i16":return new Mn(t).toArrayLike(Buffer,"le",2);case"u32":case"i32":return new Mn(t).toArrayLike(Buffer,"le",4);case"u64":case"i64":return new Mn(t).toArrayLike(Buffer,"le",8);case"u128":case"i128":return new Mn(t).toArrayLike(Buffer,"le",16);case"u256":case"i256":return new Mn(t).toArrayLike(Buffer,"le",32);case"string":return Buffer.from(t);case"pubkey":return t.toBuffer();case"bytes":return Buffer.from(t);default:if(e!=null&&e.array)return Buffer.from(t);throw new Error(`Unexpected seed type: ${e}`)}}getType(e,t=[]){var r;const i=(r=e==null?void 0:e.defined)===null||r===void 0?void 0:r.name;if(i){if(i==="tokenAccount")switch(t.at(0)){case"mint":case"owner":return"pubkey";case"amount":case"delagatedAmount":return"u64";default:throw new Error(`Unknown token account path: ${t}`)}const o=this._idlTypes.find(d=>d.name===i);if(!o)throw new Error(`Type not found: ${i}`);const[s,...a]=t,u=o.type.fields.find(d=>d.name===s);if(!u)throw new Error(`Field not found: ${s}`);return this.getType(u.type,a)}return e}}class FO{constructor(e,t,r){this._provider=e,this._cache=new Map,this._idls={},this._idls[r.toBase58()]=t}async fetchAccount({publicKey:e,name:t}){const r=e.toBase58();if(!this._cache.has(r)){const i=await this._provider.connection.getAccountInfo(e);if(i===null)throw new Error(`Account not found: ${r}`);if(t==="tokenAccount"){const o=UO(i.data);this._cache.set(r,o)}else{const o=await this.getAccountsNs(i.owner);if(o){const s=Object.values(o)[0];if(s){const a=s.coder.accounts.decodeAny(i.data);this._cache.set(r,a)}}}}return this._cache.get(r)}async getAccountsNs(e){const t=e.toBase58();if(!this._idls[t]){const r=await Yo.fetchIdl(e,this._provider);if(r){const i=new Yo(r,this._provider);this._idls[t]=i.account}}return this._idls[t]}}class WO{static build(e,t,r,i,o,s,a,c,u,d,p){return(...w)=>new zO(w,i,o,s,a,c,e,t,r,u,d,p)}}function o1(n){return typeof n=="object"&&n!==null&&!("_bn"in n)}function s1(n,e){const t={};for(const r in n){const i=n[r];if(i===null)throw new Error("Failed to resolve optionals due to IDL type mismatch with input accounts!");t[r]=o1(i)?s1(i):Jn(i)}return t}class zO{constructor(e,t,r,i,o,s,a,c,u,d,p,w){this._args=e,this._ixFn=t,this._txFn=r,this._rpcFn=i,this._simulateFn=o,this._viewFn=s,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._resolveAccounts=!0,this._accountsResolver=new DO(e,this._accounts,a,c,u,d,p,w)}args(e){this._args=e,this._accountsResolver.args(e)}accounts(e){return this.accountsPartial(e)}accountsPartial(e){return this._resolveAccounts=!0,this._accountsResolver.resolveOptionals(e),this}accountsStrict(e){return this._resolveAccounts=!1,this._accountsResolver.resolveOptionals(e),this}signers(e){return this._signers=this._signers.concat(e),this}remainingAccounts(e){return this._remainingAccounts=this._remainingAccounts.concat(e),this}preInstructions(e,t=!1){return t?this._preInstructions=e.concat(this._preInstructions):this._preInstructions=this._preInstructions.concat(e),this}postInstructions(e){return this._postInstructions=this._postInstructions.concat(e),this}async pubkeys(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._accounts}async rpc(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async rpcAndKeys(e){return{pubkeys:await this.pubkeys(),signature:await this.rpc(e)}}async view(e){if(this._resolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async simulate(e){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:e})}async instruction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async prepare(){return{instruction:await this.instruction(),pubkeys:await this.pubkeys(),signers:this._signers}}async transaction(){return this._resolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class HO{static build(e,t,r,i){const o=t.accounts.find(c=>c.writable),s=!!t.returns;return o||!s?void 0:async(...c)=>{let u=await r(...c);const d=`Program return: ${e} `;let p=u.raw.find(S=>S.startsWith(d));if(!p)throw new Error("View expected return log");let w=__(p.slice(d.length)),h=t.returns;if(!h)throw new Error("View expected return type");return Oe.fieldLayout({type:h},i.types).decode(w)}}}class KO{static build(e,t,r,i,o){const s={},a={},c={},u={},d={},p={},w=zN(e),h=e.accounts?IO.build(e,t,r,i):{};return e.instructions.forEach(b=>{const S=Bc.build(b,($,W)=>t.instruction.encode($,W),r),A=SO.build(b,S),I=kO.build(b,A,w,i),x=MO.build(b,A,w,i,t,r,e),k=HO.build(r,b,x,e),B=WO.build(i,r,b,S,A,I,x,k,h,e.types||[],o==null?void 0:o(b)),L=b.name;a[L]=S,c[L]=A,s[L]=I,u[L]=x,d[L]=B,k&&(p[L]=k)}),[s,a,c,h,u,d,p]}}class Yo{get programId(){return this._programId}get idl(){return this._idl}get rawIdl(){return this._rawIdl}get coder(){return this._coder}get provider(){return this._provider}constructor(e,t=Td(),r,i){const o=WN(e);this._idl=o,this._rawIdl=e,this._provider=t,this._programId=Jn(e.address),this._coder=r??new jw(o),this._events=new CO(this._programId,t,this._coder);const[s,a,c,u,d,p,w]=KO.build(o,this._coder,this._programId,t,i);this.rpc=s,this.instruction=a,this.transaction=c,this.account=u,this.simulate=d,this.methods=p,this.views=w}static async at(e,t){const r=Jn(e),i=await Yo.fetchIdl(r,t);if(!i)throw new Error(`IDL not found for program: ${e.toString()}`);return new Yo(i,t)}static async fetchIdl(e,t){t=t??Td();const r=Jn(e),i=await LN(r),o=await t.connection.getAccountInfo(i);if(!o)return null;let s=FN(o.data.slice(8));const a=CN(s.data);return JSON.parse(PN(a))}addEventListener(e,t){return this._events.addEventListener(e,t)}async removeEventListener(e){return await this._events.removeEventListener(e)}}new X("11111111111111111111111111111111");const $O="4U2Pgjdq51NXUEDVX4yyFNMdg6PuLHs9ikn9JThkn21p",VO={name:"hardig",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},qO=[{name:"authorize_key",docs:["Authorize a new key NFT for a position (admin only)."],discriminator:[152,133,99,67,84,208,76,131],accounts:[{name:"admin",writable:!0,signer:!0},{name:"admin_nft_ata",docs:["The admin's key NFT token account (proves admin holds the key)."]},{name:"admin_key_auth",docs:["The admin's KeyAuthorization."]},{name:"position",docs:["The position to authorize a key for."]},{name:"new_key_mint",docs:["The mint for the new key NFT. Created fresh by the client, passed in as a signer."],writable:!0,signer:!0},{name:"target_nft_ata",docs:["The target wallet's ATA for the new key NFT."],writable:!0,pda:{seeds:[{kind:"account",path:"target_wallet"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"new_key_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"target_wallet",docs:["The wallet that will receive the new key NFT."]},{name:"new_key_auth",docs:["The KeyAuthorization for the new key."],writable:!0,pda:{seeds:[{kind:"const",value:[107,101,121,95,97,117,116,104]},{kind:"account",path:"position"},{kind:"account",path:"new_key_mint"}]}},{name:"program_pda",docs:["Program PDA used as mint authority."],pda:{seeds:[{kind:"const",value:[97,117,116,104,111,114,105,116,121]}]}},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"role",type:"u8"}]},{name:"borrow",docs:["Borrow SOL against the navSOL floor (admin only)."],discriminator:[228,253,131,202,207,116,89,18],accounts:[{name:"admin",writable:!0,signer:!0},{name:"key_nft_ata",docs:["The admin's key NFT token account."]},{name:"key_auth",docs:["The admin's KeyAuthorization."]},{name:"position",docs:["The position to borrow against."],writable:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"program_pda",docs:["Mutable because Mayflower CPI marks user_wallet as writable."],writable:!0,pda:{seeds:[{kind:"const",value:[97,117,116,104,111,114,105,116,121]}]}},{name:"personal_position",writable:!0},{name:"user_base_token_ata",docs:["Program PDA's wSOL ATA (receives borrowed funds)."],writable:!0},{name:"tenant"},{name:"market_group"},{name:"market_meta"},{name:"market_base_vault",writable:!0},{name:"market_nav_vault",writable:!0},{name:"fee_vault",writable:!0},{name:"wsol_mint"},{name:"mayflower_market",writable:!0},{name:"mayflower_program"},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"log_account",writable:!0}],args:[{name:"amount",type:"u64"}]},{name:"buy",docs:["Buy navSOL by depositing SOL (admin, operator, or depositor)."],discriminator:[102,6,61,18,1,218,235,234],accounts:[{name:"signer",writable:!0,signer:!0},{name:"key_nft_ata",docs:["The signer's key NFT token account."]},{name:"key_auth",docs:["The signer's KeyAuthorization."]},{name:"position",docs:["The position to buy navSOL for."],writable:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"program_pda",docs:["Program PDA (authority) that owns the Mayflower PersonalPosition.","Mutable because Mayflower CPI marks user_wallet as writable."],writable:!0,pda:{seeds:[{kind:"const",value:[97,117,116,104,111,114,105,116,121]}]}},{name:"personal_position",docs:["Mayflower PersonalPosition PDA."],writable:!0},{name:"user_shares",docs:["Mayflower user shares escrow."],writable:!0},{name:"user_nav_sol_ata",docs:["Program PDA's navSOL ATA."],writable:!0},{name:"user_wsol_ata",docs:["Program PDA's wSOL ATA."],writable:!0},{name:"tenant",docs:["Mayflower tenant."]},{name:"market_group",docs:["Mayflower market group."]},{name:"market_meta",docs:["Mayflower market metadata."]},{name:"mayflower_market",docs:["Mayflower market."],writable:!0},{name:"nav_sol_mint",docs:["navSOL mint."],writable:!0},{name:"market_base_vault",docs:["Mayflower market base vault."],writable:!0},{name:"market_nav_vault",docs:["Mayflower market nav vault."],writable:!0},{name:"fee_vault",docs:["Mayflower fee vault."],writable:!0},{name:"wsol_mint",docs:["wSOL mint (baseMint for Mayflower CPI)."]},{name:"mayflower_program",docs:["Mayflower program."]},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"log_account",docs:["Mayflower log account."],writable:!0}],args:[{name:"amount",type:"u64"}]},{name:"create_position",docs:["Create a new position with an admin key NFT."],discriminator:[48,215,197,153,96,203,180,133],accounts:[{name:"admin",writable:!0,signer:!0},{name:"admin_nft_mint",docs:["The mint for the admin key NFT. Created fresh by the client, passed in as a signer."],writable:!0,signer:!0},{name:"admin_nft_ata",docs:["The admin's ATA for the admin key NFT."],writable:!0,pda:{seeds:[{kind:"account",path:"admin"},{kind:"const",value:[6,221,246,225,215,101,161,147,217,203,225,70,206,235,121,172,28,180,133,237,95,91,55,145,58,140,245,133,126,255,0,169]},{kind:"account",path:"admin_nft_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"position",docs:["The position account."],writable:!0,pda:{seeds:[{kind:"const",value:[112,111,115,105,116,105,111,110]},{kind:"account",path:"admin_nft_mint"}]}},{name:"admin_key_auth",docs:["The KeyAuthorization for the admin key."],writable:!0,pda:{seeds:[{kind:"const",value:[107,101,121,95,97,117,116,104]},{kind:"account",path:"position"},{kind:"account",path:"admin_nft_mint"}]}},{name:"program_pda",docs:["Program PDA used as mint authority."],pda:{seeds:[{kind:"const",value:[97,117,116,104,111,114,105,116,121]}]}},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"max_reinvest_spread_bps",type:"u16"}]},{name:"init_mayflower_position",docs:["Initialize a Mayflower PersonalPosition owned by this program's PDA.","Called once after create_position (admin only)."],discriminator:[182,3,228,23,79,67,116,234],accounts:[{name:"admin",writable:!0,signer:!0},{name:"admin_nft_ata",docs:["The admin's key NFT token account."]},{name:"admin_key_auth",docs:["The admin's KeyAuthorization."]},{name:"position",docs:["The position (mutated to store Mayflower PersonalPosition PDA)."],writable:!0},{name:"program_pda",docs:["Program PDA that will own the Mayflower PersonalPosition."],pda:{seeds:[{kind:"const",value:[97,117,116,104,111,114,105,116,121]}]}},{name:"mayflower_personal_position",docs:["The Mayflower PersonalPosition PDA."],writable:!0},{name:"mayflower_user_shares",docs:["The Mayflower PersonalPosition escrow (user shares)."],writable:!0},{name:"mayflower_market_meta",docs:["The Mayflower market metadata."]},{name:"nav_sol_mint",docs:["The navSOL mint."]},{name:"mayflower_log",docs:["The Mayflower log account."],writable:!0},{name:"mayflower_program",docs:["The Mayflower program."]},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"initialize_protocol",docs:["Initialize the global protocol config. Called once by the deployer."],discriminator:[188,233,252,106,134,146,202,91],accounts:[{name:"admin",writable:!0,signer:!0},{name:"config",writable:!0,pda:{seeds:[{kind:"const",value:[99,111,110,102,105,103]}]}},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"reinvest",docs:["Reinvest new borrow capacity into more navSOL (admin, operator, or keeper)."],discriminator:[107,29,95,200,217,52,155,76],accounts:[{name:"signer",writable:!0,signer:!0},{name:"key_nft_ata",docs:["The signer's key NFT token account."]},{name:"key_auth",docs:["The signer's KeyAuthorization."]},{name:"position",docs:["The position to reinvest for."],writable:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"program_pda",docs:["Mutable because Mayflower CPI marks user_wallet as writable."],writable:!0,pda:{seeds:[{kind:"const",value:[97,117,116,104,111,114,105,116,121]}]}},{name:"personal_position",writable:!0},{name:"user_shares",writable:!0},{name:"user_nav_sol_ata",writable:!0},{name:"user_wsol_ata",docs:["Program PDA's wSOL ATA (used for buy CPI input)."],writable:!0},{name:"user_base_token_ata",docs:["Program PDA's wSOL ATA (used for borrow CPI output).","In practice this is the same address as user_wsol_ata."],writable:!0},{name:"tenant"},{name:"market_group"},{name:"market_meta"},{name:"mayflower_market",writable:!0},{name:"nav_sol_mint",writable:!0},{name:"market_base_vault",writable:!0},{name:"market_nav_vault",writable:!0},{name:"fee_vault",writable:!0},{name:"wsol_mint"},{name:"mayflower_program"},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"log_account",writable:!0}],args:[]},{name:"repay",docs:["Repay borrowed SOL (admin, operator, or depositor)."],discriminator:[234,103,67,82,208,234,219,166],accounts:[{name:"signer",writable:!0,signer:!0},{name:"key_nft_ata",docs:["The signer's key NFT token account."]},{name:"key_auth",docs:["The signer's KeyAuthorization."]},{name:"position",docs:["The position to repay debt for."],writable:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"program_pda",docs:["Mutable because Mayflower CPI marks user_wallet as writable."],writable:!0,pda:{seeds:[{kind:"const",value:[97,117,116,104,111,114,105,116,121]}]}},{name:"personal_position",writable:!0},{name:"user_base_token_ata",docs:["Program PDA's wSOL ATA (repays from this account)."],writable:!0},{name:"tenant"},{name:"market_group"},{name:"market_meta"},{name:"market_base_vault",writable:!0},{name:"market_nav_vault",writable:!0},{name:"fee_vault",writable:!0},{name:"wsol_mint"},{name:"mayflower_market",writable:!0},{name:"mayflower_program"},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"log_account",writable:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke_key",docs:["Revoke a key by closing its KeyAuthorization (admin only)."],discriminator:[162,44,180,118,135,106,115,232],accounts:[{name:"admin",writable:!0,signer:!0},{name:"admin_nft_ata",docs:["The admin's key NFT token account."]},{name:"admin_key_auth",docs:["The admin's KeyAuthorization."]},{name:"position",docs:["The position."]},{name:"target_key_auth",docs:["The KeyAuthorization to revoke. Closed, rent refunded to admin."],writable:!0},{name:"system_program",address:"11111111111111111111111111111111"}],args:[]},{name:"withdraw",docs:["Withdraw SOL/navSOL from the position (admin only)."],discriminator:[183,18,70,156,148,109,161,34],accounts:[{name:"admin",writable:!0,signer:!0},{name:"key_nft_ata",docs:["The admin's key NFT token account."]},{name:"key_auth",docs:["The admin's KeyAuthorization."]},{name:"position",docs:["The position to withdraw from."],writable:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"program_pda",docs:["Mutable because Mayflower CPI marks user_wallet as writable."],writable:!0,pda:{seeds:[{kind:"const",value:[97,117,116,104,111,114,105,116,121]}]}},{name:"personal_position",writable:!0},{name:"user_shares",writable:!0},{name:"user_nav_sol_ata",writable:!0},{name:"user_wsol_ata",writable:!0},{name:"tenant"},{name:"market_group"},{name:"market_meta"},{name:"mayflower_market",writable:!0},{name:"nav_sol_mint",writable:!0},{name:"market_base_vault",writable:!0},{name:"market_nav_vault",writable:!0},{name:"fee_vault",writable:!0},{name:"wsol_mint"},{name:"mayflower_program"},{name:"token_program",address:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},{name:"log_account",writable:!0}],args:[{name:"amount",type:"u64"}]}],GO=[{name:"KeyAuthorization",discriminator:[224,196,58,181,100,86,61,163]},{name:"PositionNFT",discriminator:[110,231,174,81,107,90,24,208]},{name:"ProtocolConfig",discriminator:[207,91,250,28,152,179,215,209]}],jO=[{code:6e3,name:"Unauthorized",msg:"Signer is not authorized for this action"},{code:6001,name:"AdminOnly",msg:"This action requires admin key"},{code:6002,name:"InsufficientPermission",msg:"Key role does not have permission for this instruction"},{code:6003,name:"KeyNotHeld",msg:"Signer does not hold the key NFT"},{code:6004,name:"InvalidKey",msg:"Key NFT mint does not match KeyAuthorization"},{code:6005,name:"WrongPosition",msg:"KeyAuthorization is for a different position"},{code:6006,name:"CannotCreateSecondAdmin",msg:"Cannot create a second admin key"},{code:6007,name:"CannotRevokeAdminKey",msg:"Cannot revoke the admin key"},{code:6008,name:"KeyAlreadyAuthorized",msg:"Key is already authorized for this position"},{code:6009,name:"InvalidKeyRole",msg:"Invalid key role value"},{code:6010,name:"InsufficientFunds",msg:"Insufficient funds for this operation"},{code:6011,name:"BorrowCapacityExceeded",msg:"Borrow amount exceeds available capacity"},{code:6012,name:"ReinvestSpreadTooHigh",msg:"Market/floor spread exceeds max_reinvest_spread_bps"},{code:6013,name:"InvalidMayflowerAccount",msg:"Invalid Mayflower account address or derivation"},{code:6014,name:"InvalidNftMint",msg:"Invalid NFT mint"},{code:6015,name:"InvalidPositionPda",msg:"Invalid position PDA"},{code:6016,name:"PositionAlreadyExists",msg:"Position already exists for this admin key"}],YO=[{name:"KeyAuthorization",docs:["Links a key NFT to a position with a specific role.",'PDA seeds = [b"key_auth", position, key_nft_mint].'],type:{kind:"struct",fields:[{name:"position",docs:["The position this key unlocks."],type:"pubkey"},{name:"key_nft_mint",docs:["The NFT mint that serves as the key."],type:"pubkey"},{name:"role",docs:["The role/permissions this key grants."],type:{defined:{name:"KeyRole"}}},{name:"bump",docs:["Bump seed for this PDA."],type:"u8"}]}},{name:"KeyRole",docs:["Role assigned to a key NFT."],repr:{kind:"rust"},type:{kind:"enum",variants:[{name:"Admin"},{name:"Operator"},{name:"Depositor"},{name:"Keeper"}]}},{name:"PositionNFT",docs:["A navSOL position controlled by an NFT keyring.",'PDA seeds = [b"position", admin_nft_mint].'],type:{kind:"struct",fields:[{name:"admin_nft_mint",docs:["The admin key NFT mint (master key, only one per position)."],type:"pubkey"},{name:"position_pda",docs:["The Mayflower PersonalPosition PDA owned by this program."],type:"pubkey"},{name:"deposited_nav",docs:["navSOL deposited (local tracking, Mayflower is source of truth)."],type:"u64"},{name:"user_debt",docs:["SOL borrowed by the user (local tracking)."],type:"u64"},{name:"protocol_debt",docs:["SOL borrowed by the protocol for reinvestment."],type:"u64"},{name:"max_reinvest_spread_bps",docs:["Max market/floor spread ratio (in bps) allowed for reinvest."],type:"u16"},{name:"last_admin_activity",docs:["Last time the admin signed an instruction (unix timestamp).","Used for future time-locked recovery mechanism."],type:"i64"},{name:"bump",docs:["Bump seed for the position PDA."],type:"u8"}]}},{name:"ProtocolConfig",docs:['Global protocol configuration. Singleton PDA (seeds = [b"config"]).'],type:{kind:"struct",fields:[{name:"admin",docs:["The admin who initialized the protocol."],type:"pubkey"},{name:"bump",docs:["Bump seed for the config PDA."],type:"u8"}]}}],ZO={address:$O,metadata:VO,instructions:qO,accounts:GO,errors:jO,types:YO};function XO(n,e){const t=new qs(n,e,{commitment:"confirmed"});return new Yo(ZO,t)}async function JO(n,e){const[t]=Ly(),r=await n.methods.initializeProtocol().accounts({admin:e,config:t}).instruction();return{description:["Initialize Protocol",`Config PDA: ${t}`,`Admin: ${e}`],instructions:[r],extraSigners:[]}}async function QO(n,e,t){const r=li.generate(),i=r.publicKey,o=nt(e,i),[s]=KI(i),[a]=Uy(s,i),[c]=Er(),u=await n.methods.createPosition(t).accounts({admin:e,adminNftMint:i,adminNftAta:o,position:s,adminKeyAuth:a,programPda:c}).instruction();return{description:["Create Position",`Admin NFT Mint: ${pn(i)}`,`Position PDA: ${pn(s)}`,`Max Reinvest Spread: ${t} bps`],instructions:[u],extraSigners:[r]}}async function eC(n,e){const t=vr.value,r=br.value,i=_n.value,o=nt(e,t),[s]=Er(),[a]=no(s),[c]=au(a),[u]=as(),d=await n.methods.initMayflowerPosition().accounts({admin:e,adminNftAta:o,adminKeyAuth:r,position:i,programPda:s,mayflowerPersonalPosition:a,mayflowerUserShares:c,mayflowerMarketMeta:to,navSolMint:gr,mayflowerLog:u,mayflowerProgram:qr}).instruction();return{description:["Init Mayflower Position",`PersonalPosition: ${pn(a)}`],instructions:[d],extraSigners:[]}}const Kf=new X("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new X("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const a1=new X("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new X("So11111111111111111111111111111111111111112");new X("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");var Cd;(function(n){n[n.InitializeMint=0]="InitializeMint",n[n.InitializeAccount=1]="InitializeAccount",n[n.InitializeMultisig=2]="InitializeMultisig",n[n.Transfer=3]="Transfer",n[n.Approve=4]="Approve",n[n.Revoke=5]="Revoke",n[n.SetAuthority=6]="SetAuthority",n[n.MintTo=7]="MintTo",n[n.Burn=8]="Burn",n[n.CloseAccount=9]="CloseAccount",n[n.FreezeAccount=10]="FreezeAccount",n[n.ThawAccount=11]="ThawAccount",n[n.TransferChecked=12]="TransferChecked",n[n.ApproveChecked=13]="ApproveChecked",n[n.MintToChecked=14]="MintToChecked",n[n.BurnChecked=15]="BurnChecked",n[n.InitializeAccount2=16]="InitializeAccount2",n[n.SyncNative=17]="SyncNative",n[n.InitializeAccount3=18]="InitializeAccount3",n[n.InitializeMultisig2=19]="InitializeMultisig2",n[n.InitializeMint2=20]="InitializeMint2",n[n.GetAccountDataSize=21]="GetAccountDataSize",n[n.InitializeImmutableOwner=22]="InitializeImmutableOwner",n[n.AmountToUiAmount=23]="AmountToUiAmount",n[n.UiAmountToAmount=24]="UiAmountToAmount",n[n.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",n[n.TransferFeeExtension=26]="TransferFeeExtension",n[n.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",n[n.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",n[n.Reallocate=29]="Reallocate",n[n.MemoTransferExtension=30]="MemoTransferExtension",n[n.CreateNativeMint=31]="CreateNativeMint",n[n.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",n[n.InterestBearingMintExtension=33]="InterestBearingMintExtension",n[n.CpiGuardExtension=34]="CpiGuardExtension",n[n.InitializePermanentDelegate=35]="InitializePermanentDelegate",n[n.TransferHookExtension=36]="TransferHookExtension",n[n.MetadataPointerExtension=39]="MetadataPointerExtension",n[n.GroupPointerExtension=40]="GroupPointerExtension",n[n.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",n[n.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",n[n.PausableExtension=44]="PausableExtension"})(Cd||(Cd={}));function y0(n,e,t,r,i=Kf,o=a1){return tC(n,e,t,r,Buffer.alloc(0),i,o)}function tC(n,e,t,r,i,o=Kf,s=a1){const a=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:vt.programId,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!1,isWritable:!1}];return new De({keys:a,programId:s,data:i})}const _0=de([xe("instruction")]);function nC(n,e=Kf){const t=[{pubkey:n,isSigner:!1,isWritable:!0}],r=Buffer.alloc(_0.span);return _0.encode({instruction:Cd.SyncNative},r),new De({keys:t,programId:e,data:r})}async function rC(n,e){const t=[],r=["Setup Mayflower Accounts"];if(!mi.value){const i=await eC(n,e);t.push(...i.instructions),r.push(...i.description.slice(1))}if(!di.value){const[i]=Er(),o=nt(i,Un),s=nt(i,gr);t.push(y0(e,o,i,Un,Nc)),t.push(y0(e,s,i,gr,Nc)),r.push(`Create wSOL ATA: ${pn(o)}`),r.push(`Create navSOL ATA: ${pn(s)}`)}return t.length===0?null:{description:r,instructions:t,extraSigners:[]}}async function iC(n,e,t){const r=vr.value,i=br.value,o=_n.value,s=nt(e,r),[a]=Er(),[c]=no(a),[u]=au(c),[d]=as(),p=nt(a,Un),w=nt(a,gr),h=vt.transfer({fromPubkey:e,toPubkey:p,lamports:t}),b=nC(p,Nc),S=await n.methods.buy(new Mn(t)).accounts({signer:e,keyNftAta:s,keyAuth:i,position:o,programPda:a,personalPosition:c,userShares:u,userNavSolAta:w,userWsolAta:p,tenant:sa,marketGroup:aa,marketMeta:to,mayflowerMarket:ss,navSolMint:gr,marketBaseVault:ca,marketNavVault:ua,feeVault:la,wsolMint:Un,mayflowerProgram:qr,logAccount:d}).instruction();return{description:["Buy navSOL",`Amount: ${Xt(t)} SOL`,`Position: ${pn(o)}`,`Role: ${$r(kn.value)}`],instructions:[h,b,S],extraSigners:[]}}async function oC(n,e,t){const r=vr.value,i=br.value,o=_n.value,s=nt(e,r),[a]=Er(),[c]=no(a),[u]=au(c),[d]=as(),p=nt(a,Un),w=nt(a,gr),h=await n.methods.withdraw(new Mn(t)).accounts({admin:e,keyNftAta:s,keyAuth:i,position:o,programPda:a,personalPosition:c,userShares:u,userNavSolAta:w,userWsolAta:p,tenant:sa,marketGroup:aa,marketMeta:to,mayflowerMarket:ss,navSolMint:gr,marketBaseVault:ca,marketNavVault:ua,feeVault:la,wsolMint:Un,mayflowerProgram:qr,logAccount:d}).instruction();return{description:["Sell navSOL",`Amount: ${Xt(t)} SOL`,`Position: ${pn(o)}`],instructions:[h],extraSigners:[]}}async function sC(n,e,t){const r=vr.value,i=br.value,o=_n.value,s=nt(e,r),[a]=Er(),[c]=no(a),[u]=as(),d=nt(a,Un),p=await n.methods.borrow(new Mn(t)).accounts({admin:e,keyNftAta:s,keyAuth:i,position:o,programPda:a,personalPosition:c,userBaseTokenAta:d,tenant:sa,marketGroup:aa,marketMeta:to,marketBaseVault:ca,marketNavVault:ua,feeVault:la,wsolMint:Un,mayflowerMarket:ss,mayflowerProgram:qr,logAccount:u}).instruction();return{description:["Borrow",`Amount: ${Xt(t)} SOL`,`Position: ${pn(o)}`],instructions:[p],extraSigners:[]}}async function aC(n,e,t){const r=vr.value,i=br.value,o=_n.value,s=nt(e,r),[a]=Er(),[c]=no(a),[u]=as(),d=nt(a,Un),p=await n.methods.repay(new Mn(t)).accounts({signer:e,keyNftAta:s,keyAuth:i,position:o,programPda:a,personalPosition:c,userBaseTokenAta:d,tenant:sa,marketGroup:aa,marketMeta:to,marketBaseVault:ca,marketNavVault:ua,feeVault:la,wsolMint:Un,mayflowerMarket:ss,mayflowerProgram:qr,logAccount:u}).instruction();return{description:["Repay",`Amount: ${Xt(t)} SOL`,`Position: ${pn(o)}`],instructions:[p],extraSigners:[]}}async function cC(n,e){const t=vr.value,r=br.value,i=_n.value,o=nt(e,t),[s]=Er(),[a]=no(s),[c]=au(a),[u]=as(),d=nt(s,Un),p=nt(s,gr),w=Xc.setComputeUnitLimit({units:4e5}),h=await n.methods.reinvest().accounts({signer:e,keyNftAta:o,keyAuth:r,position:i,programPda:s,personalPosition:a,userShares:c,userNavSolAta:p,userWsolAta:d,userBaseTokenAta:d,tenant:sa,marketGroup:aa,marketMeta:to,mayflowerMarket:ss,navSolMint:gr,marketBaseVault:ca,marketNavVault:ua,feeVault:la,wsolMint:Un,mayflowerProgram:qr,logAccount:u}).instruction();return{description:["Reinvest",`Position: ${pn(i)}`,`Role: ${$r(kn.value)}`,"Borrows available capacity and buys more navSOL"],instructions:[w,h],extraSigners:[]}}async function uC(n,e,t,r){const i=new X(t),o=_n.value,s=vr.value,a=br.value,c=nt(e,s),[u]=Er(),d=li.generate(),p=d.publicKey,w=nt(i,p),[h]=Uy(o,p),b=await n.methods.authorizeKey(r).accounts({admin:e,adminNftAta:c,adminKeyAuth:a,position:o,newKeyMint:p,targetNftAta:w,targetWallet:i,newKeyAuth:h,programPda:u}).instruction();return{description:["Authorize Key",`Target: ${pn(i)}`,`Role: ${$r(r)} (${r})`,`Key NFT Mint: ${pn(p)}`],instructions:[b],extraSigners:[d]}}async function lC(n,e,t){const r=_n.value,i=vr.value,o=br.value,s=nt(e,i),a=await n.methods.revokeKey().accounts({admin:e,adminNftAta:s,adminKeyAuth:o,position:r,targetKeyAuth:t.pda}).instruction();return{description:["Revoke Key",`Key Mint: ${pn(t.mint)}`,`Role: ${$r(t.role)}`],instructions:[a],extraSigners:[]}}function dC({action:n,onClose:e,onRefresh:t}){var l,f;const{connection:r}=Ef(),i=ra(),[o,s]=Ge("form"),[a,c]=Ge(null),[u,d]=Ge(!1),[p,w]=Ge(null),[h,b]=Ge(""),[S,A]=Ge("500"),[I,x]=Ge(""),[k,B]=Ge("1"),[L,$]=Ge("0"),W=XO(r,i),Y=i.publicKey,D=()=>Dr.value==="custom"?qo.value||"http://localhost:8899":Dr.value;async function j(){try{let _;switch(n){case"initProtocol":_=await JO(W,Y);break;case"createPosition":_=await QO(W,Y,parseInt(S));break;case"setup":if(_=await rC(W,Y),!_){Vt("Setup already complete"),e();return}break;case"buy":{const E=Oa(h);if(!E){Vt("Invalid SOL amount",!0);return}_=await iC(W,Y,E);break}case"sell":{const E=Oa(h);if(!E){Vt("Invalid SOL amount",!0);return}_=await oC(W,Y,E);break}case"borrow":{const E=Oa(h);if(!E){Vt("Invalid SOL amount",!0);return}_=await sC(W,Y,E);break}case"repay":{const E=Oa(h);if(!E){Vt("Invalid SOL amount",!0);return}_=await aC(W,Y,E);break}case"reinvest":_=await cC(W,Y);break;case"authorize":{if(!I.trim()){Vt("Target wallet required",!0);return}const E=parseInt(k);if(E===0){Vt("Cannot create a second admin key",!0);return}_=await uC(W,Y,I.trim(),E);break}case"revoke":{const E=jo.value.filter(C=>C.role!==0),N=parseInt(L);if(N<0||N>=E.length){Vt("Invalid key index",!0);return}_=await lC(W,Y,E[N]);break}default:Vt("Unknown action: "+n,!0);return}c(_),s("confirm")}catch(_){Vt("Build error: "+_.message,!0)}}async function G(){if(!a)return;d(!0);const _=UI();Ep.value=_;try{const E=new Ne;for(const T of a.instructions)E.add(T);const{blockhash:N,lastValidBlockHeight:C}=await r.getLatestBlockhash("confirmed");E.recentBlockhash=N,E.feePayer=Y,a.extraSigners.length>0&&E.partialSign(...a.extraSigners);const P=await i.sendTransaction(E,r);await r.confirmTransaction({signature:P,blockhash:N,lastValidBlockHeight:C},"confirmed"),Vt("TX confirmed: "+P),kI.value=P,await t(),w({sig:P,snapshot:_}),s("result")}catch(E){Vt("TX failed: "+E.message,!0),Ep.value=null,d(!1)}}const V={initProtocol:"Initialize Protocol",createPosition:"Create Position",setup:"Setup Mayflower",buy:"Buy navSOL",sell:"Sell navSOL",borrow:"Borrow SOL",repay:"Repay SOL",reinvest:"Reinvest",authorize:"Authorize Key",revoke:"Revoke Key"};return o==="form"&&["initProtocol","reinvest","setup"].includes(n)?(j(),F("div",{class:"modal-overlay",onClick:e,children:F("div",{class:"modal",onClick:_=>_.stopPropagation(),children:[F("h3",{children:V[n]}),F("p",{children:[F("span",{class:"spinner"})," Building transaction..."]})]})})):F("div",{class:"modal-overlay",onClick:e,children:F("div",{class:"modal",onClick:_=>_.stopPropagation(),children:[F("h3",{children:V[n]}),o==="form"&&F("div",{children:[(n==="buy"||n==="sell"||n==="borrow"||n==="repay")&&F("div",{class:"form-group",children:[F("label",{children:"Amount (SOL)"}),F("input",{type:"text",value:h,onInput:_=>b(_.target.value),placeholder:n==="sell"?Xt(((l=Zn.value)==null?void 0:l.depositedNav)||0):n==="repay"?Xt(((f=Zn.value)==null?void 0:f.userDebt)||0):"0.0",autoFocus:!0})]}),n==="createPosition"&&F("div",{class:"form-group",children:[F("label",{children:"Max Reinvest Spread (bps)"}),F("input",{type:"number",value:S,onInput:_=>A(_.target.value),autoFocus:!0})]}),n==="authorize"&&F(Ln,{children:[F("div",{class:"form-group",children:[F("label",{children:"Target Wallet (pubkey)"}),F("input",{type:"text",value:I,onInput:_=>x(_.target.value),placeholder:"Enter wallet address...",autoFocus:!0})]}),F("div",{class:"form-group",children:[F("label",{children:"Role"}),F("select",{value:k,onChange:_=>B(_.target.value),children:[F("option",{value:"1",children:"Operator"}),F("option",{value:"2",children:"Depositor"}),F("option",{value:"3",children:"Keeper"})]})]})]}),n==="revoke"&&F("div",{class:"form-group",children:[F("label",{children:"Key to Revoke"}),F("select",{value:L,onChange:_=>$(_.target.value),children:jo.value.filter(_=>_.role!==0).map((_,E)=>F("option",{value:E,children:[pn(_.mint)," (",$r(_.role),")"]},E))})]}),F("div",{class:"btn-row",children:[F("button",{class:"btn",onClick:e,children:"Cancel"}),F("button",{class:"btn btn-primary",onClick:j,children:"Continue"})]})]}),o==="confirm"&&a&&F("div",{children:[F("ul",{class:"confirm-list",children:[a.description.map((_,E)=>F("li",{children:E===0?F("strong",{children:_}):_},E)),F("li",{children:[a.instructions.length," instruction(s)"]}),a.extraSigners.length>0&&F("li",{children:[a.extraSigners.length," extra signer(s)"]})]}),F("div",{class:"btn-row",children:[F("button",{class:"btn",onClick:e,disabled:u,children:"Cancel"}),F("button",{class:"btn btn-primary",onClick:G,disabled:u,children:u?F(Ln,{children:[F("span",{class:"spinner"}),"Sending..."]}):"Confirm"})]})]}),o==="result"&&p&&F("div",{children:[F("p",{style:{marginBottom:"10px"},children:"Transaction confirmed."}),F("p",{children:F("a",{class:"tx-link",href:qI(p.sig,D()),target:"_blank",rel:"noopener noreferrer",children:p.sig})}),p.snapshot&&Zn.value&&F("table",{class:"result-table",children:[F("thead",{children:F("tr",{children:[F("th",{children:"Field"}),F("th",{children:"Before"}),F("th",{children:"After"}),F("th",{children:"Delta"})]})}),F("tbody",{children:[["Deposited",p.snapshot.depositedNav,Zn.value.depositedNav],["User Debt",p.snapshot.userDebt,Zn.value.userDebt],["Protocol Debt",p.snapshot.protocolDebt,Zn.value.protocolDebt]].map(([_,E,N])=>{const C=$I(E,N),P=C.startsWith("+")?"positive":C.startsWith("-")?"negative":"";return F("tr",{children:[F("th",{children:_}),F("td",{children:Xt(E)}),F("td",{children:Xt(N)}),F("td",{class:`delta ${P}`,children:C})]},_)})})]}),F("div",{class:"btn-row",children:F("button",{class:"btn btn-primary",onClick:e,children:"Done"})})]})]})})}function fC(){const{connection:n}=Ef(),e=ra(),[t,r]=Ge(null),i=rn(async()=>{if(e.publicKey){Tc.value=!0,Vt("Refreshing...");try{await GI(n),await jI(n,e.publicKey),await XI(n),Vt("Refresh complete.")}catch(s){Vt("Refresh error: "+s.message,!0)}Tc.value=!1}},[n,e.publicKey]);return qt(()=>{e.connected&&e.publicKey?(vp.value=!0,i()):(vp.value=!1,Ed(),Go.value=!1)},[e.connected,e.publicKey,i]),qt(()=>{e.connected&&e.publicKey&&(Ed(),i())},[Dr.value,qo.value]),F("div",{children:[F("div",{class:"header",children:[F("h1",{children:"Hrdig"}),F("div",{class:"header-controls",children:[F(QI,{}),F(JI,{})]})]}),F(rT,{onAction:s=>{s==="refresh"?i():r(s)}}),t&&F(dC,{action:t,onClose:()=>r(null),onRefresh:i})]})}function hC(){const n=bt(()=>Dr.value==="custom"?qo.value||"http://localhost:8899":bI(Dr.value),[Dr.value,qo.value]),e=bt(()=>[],[]);return F(bS,{endpoint:n,children:F(lI,{wallets:e,autoConnect:!0,children:F(mI,{children:F(fC,{})})})})}Mo(F(hC,{}),document.getElementById("app"));
